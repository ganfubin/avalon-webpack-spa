webpackJsonp([0,9],[function(e,t,n){e.exports=n(1)},function(e,t,n){var a=n(2);n(3),n(4),n(5),n(6),n(8),n(11),n(12),n(31),n(34),n(39);var r="HelloWorld";alert(r);a.define({$id:"app"});a.state("home",{url:"/home",views:{"":{templateProvider:function(){return new Promise(function(e){n.e(1,function(t){e(n(40))})})},controllerProvider:function(){return new Promise(function(e){n.e(2,function(){e(n(41))})})}}}}),a.state("about",{url:"/about",views:{"":{templateProvider:function(){return new Promise(function(e){n.e(3,function(t){e(n(42))})})},controllerProvider:function(){return new Promise(function(e){n.e(4,function(){e(n(43))})})}}}}),a.state("contact",{url:"/contact",views:{"":{templateProvider:function(){return new Promise(function(e){n.e(5,function(t){e(n(44))})})},controllerProvider:function(){return new Promise(function(e){n.e(6,function(){e(n(45))})})}}}}),a.state("services",{url:"/services",views:{"":{templateProvider:function(){return new Promise(function(e){n.e(7,function(t){e(n(46))})})},controllerProvider:function(){return new Promise(function(e){n.e(8,function(){e(n(47))})})}}}}),a.state.config({onError:function(){},onBegin:function(){},onViewEnter:function(e,t){}}),a.history.start({basepath:"/",fireAnchor:!1}),a.scan()},function(e,t,n){var a,r;!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("Avalon requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){function i(){n.console&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function l(){}function s(e,t){"string"==typeof e&&(e=e.match(Fe)||[]);for(var n={},a=void 0!==t?t:1,r=0,o=e.length;o>r;r++)n[e[r]]=a;return n}function c(){if(n.VBArray){var e=document.documentMode;return e?e:n.XMLHttpRequest?7:6}return NaN}function u(e){return Be.test(Ve.call(e))}function d(e,t){return e=Math.floor(e)||0,0>e?Math.max(t+e,0):Math.min(e,t)}function p(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var n=Ve.call(e).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(n))return!1;if("Array"===n)return!0;try{return{}.propertyIsEnumerable.call(e,"length")===!1?/^\s?function/.test(e.item||e.callee):!0}catch(a){return!e.window}}return!1}function f(e,t,n){var a="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n;return Function("fn,scope",a)}function h(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}}function v(){return(new XMLSerializer).serializeToString(this)}function m(e,t){if(e&&e.childNodes)for(var n,a=e.childNodes,r=0;n=a[r++];)if(n.tagName){var o=Ne.createElementNS(dt,n.tagName.toLowerCase());ze.forEach.call(n.attributes,function(e){o.setAttribute(e.name,e.value)}),m(n,o),t.appendChild(o)}}function g(e){var t={};for(var n in e)t[n]=e[n];var a=t.target=e.srcElement;if(0===e.type.indexOf("key"))t.which=null!=e.charCode?e.charCode:e.keyCode;else if(ft.test(e.type)){var r=a.ownerDocument||Ne,o="BackCompat"===r.compatMode?r.body:r.documentElement;t.pageX=e.clientX+(o.scrollLeft>>0)-(o.clientLeft>>0),t.pageY=e.clientY+(o.scrollTop>>0)-(o.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}function y(e){for(var t in e)if(We.call(e,t)){var n=e[t];"function"==typeof y.plugins[t]?y.plugins[t](n):"object"==typeof y[t]?avalon.mix(y[t],n):y[t]=n}return this}function b(e){return(e+"").replace(Tt,"\\$&")}function w(e,t,n){if(Array.isArray(e)){var a=e.concat();e.length=0;var r=O(e);return r.pushArray(a),r}if(!e||e.$id&&e.$events||e.nodeType>0&&e.nodeName)return e;var o=Array.isArray(e.$skipArray)?e.$skipArray:[];o.$special=t||{};var i={};n=n||{};var l={},s={},c=[];At.forEach(function(t){delete e[t]});var u=Object.keys(e);u.forEach(function(t,a){var r=e[t];if(n[t]=r,A(t,r,o)){l[t]=[];var i=avalon.type(r);"object"===i&&et(r.get)&&Object.keys(r).length<=2?(a=_(t,r),c.push(a)):a=je.test(i)?C(t,r,i,l[t],n):T(t,r),s[t]=a}}),i=Ot(i,Pt(s),e);for(var d=0;d<u.length;d++){var p=u[d];s[p]||(i[p]=e[p])}x(i,"$id",Ze()),x(i,"$model",n),x(i,"$events",l),Dt?x(i,"hasOwnProperty",function(e){return e in i.$model}):i.hasOwnProperty=function(e){return e in i.$model&&"hasOwnProperty"!==e};for(d in Mt)x(i,d,Mt[d].bind(i));return i.$reinitialize=function(){c.forEach(function(e){delete e._value,delete e.oldArgs,e.digest=function(){e.call(i)},Ft.begin({callback:function(t,n){var a=n._name;if(n!==e){var r=t.$events[a];P(r,e.digest)}}});try{e.get.call(i)}finally{Ft.end()}})},i.$reinitialize(),i}function x(e,t,n){Dt?Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0}):e[t]=n}function T(e,t){function n(e){var t=n._value;return arguments.length>0?(He||St(e,t)||(n.updateValue(this,e),n.notify(this,e,t)),this):(Ft.collectDependency(this,n),t)}return k(n,e),n._value=t,n}function _(e,t){function n(t){var a=n._value,r="_value"in n;if(arguments.length>0){if(He)return this;if("function"==typeof n.set&&n.oldArgs!==t){n.oldArgs=t;var o=this.$events,i=o[e];o[e]=[],n.set.call(this,t),o[e]=i,t=n.get.call(this),t!==a&&(n.updateValue(this,t),n.notify(this,t,a))}return this}return t=n.get.call(this),n.updateValue(this,t),r&&a!==t&&n.notify(this,t,a),t}return n.set=t.set,n.get=t.get,k(n,e),n}function C(e,t,n,a,r){function o(t){var a=o._value,r=o._vmodel;if(arguments.length>0){if(He)return this;if("array"===n){var i=r,l=t,s=i.length,c=l.length;i.$lock=!0,s>c?i.splice(c,s-c):c>s&&i.push.apply(i,l.slice(s));for(var u=Math.min(s,c),d=0;u>d;d++)i.set(d,l[d]);delete i.$lock,i._fire("set")}else if("object"===n){t=t.$model?t.$model:t;var p=this.$events[e]||[],f=avalon.mix(!0,{},t);for(d in r)r.hasOwnProperty(d)&&We.call(f,d)&&(r[d]=f[d]);r=o._vmodel=w(t),r.$events[Le]=p,p.length&&p.forEach(function(e){e.type&&(e.rollback&&e.rollback(),at[e.type](e,e.vmodels))})}return o.updateValue(this,r.$model),o.notify(this,this._value,a),this}return Ft.collectDependency(this,o),r}k(o,e),Array.isArray(t)?r[e]=t:r[e]=r[e]||{};var i=o._vmodel=w(t,0,r[e]);return i.$events[Le]=a,o}function $(e,t){e.$model[this._name]=this._value=t}function M(e,t,n){var a=this._name,r=e.$events[a];r&&(I(r),Mt.$fire.call(e,a,t,n))}function k(e,t){e._name=t,e.updateValue=$,e.notify=M}function A(e,t,n){if(et(t)||t&&t.nodeName&&t.nodeType>0)return!1;if(-1!==n.indexOf(e))return!1;var a=n.$special;return!e||"$"!==e.charAt(0)||a[e]}function E(e){for(var t=Object.keys(e.$model?e.$model:e),n=0;n<At.length;n++){var a=t.indexOf(At[n]);-1!==a&&t.splice(a,1)}return t}function D(e,t,n,a){var r=t[n];return 4!==arguments.length?r.call(e):void r.call(e,a)}function O(e){var t=[];t.$id=Ze(),t.$model=e,t.$events={},t.$events[Le]=[],t._=w({length:e.length}),t._.$watch("length",function(e,n){t.$fire("length",e,n)});for(var n in Mt)t[n]=Mt[n];return avalon.mix(t,Ht),t}function N(e,t,n,a,r,o,i){for(var l=this.length,s=2;--s;){switch(e){case"add":var c=this.$model.slice(t,t+n).map(function(e){return je.test(avalon.type(e))?e.$id?e:w(e,0,e):e});Lt.apply(this,[t,0].concat(c)),this._fire("add",t,n);break;case"del":var u=this._splice(t,n);this._fire("del",t,n)}r&&(e=r,t=o,n=i,s=2,r=0)}return this._fire("index",a),this.length!==l&&(this._.length=this.length),u}function S(e,t){for(var n={},a=0,r=t.length;r>a;a++){n[a]=e[a];var o=t[a];o in n?(e[a]=n[o],delete n[o]):e[a]=e[o]}}function P(e,t){t.oneTime||e&&avalon.Array.ensure(e,t)&&t.element&&(H(t,e),new Date-Yt>444&&F())}function I(e){if(e&&e.length){new Date-Yt>444&&"object"==typeof e[0]&&F();for(var t,n=Xe.call(arguments,1),a=e.length;t=e[--a];){var r=t.element;if(r&&r.parentNode)try{var o=t.evaluator;if(t.$repeat)t.handler.apply(t,n);else if("$repeat"in t||!o)at[t.type](t,t.vmodels);else if("on"!==t.type){var i=o.apply(0,t.args||[]);t.handler(i,r,t)}}catch(l){console.log(l)}}}}function L(e,t){return e.uuid||t||(e.uuid=++Rt),e.uuid}function H(e,t){var n=e.element;e.uuid||(1!==n.nodeType?e.uuid=e.type+L(n.parentNode)+"-"+ ++Rt:e.uuid=e.name+"-"+L(n));var a=e.lists||(e.lists=[]);avalon.Array.ensure(a,t),t.$uuid=t.$uuid||Ze(),Bt[e.uuid]||(Bt[e.uuid]=1,Bt.push(e))}function F(e){if(!avalon.optimize){for(var t=Bt.length,n=t,a=[],r={},o={};e=Bt[--t];){var i=e.type;o[i]?o[i]++:(o[i]=1,a.push(i))}var l=!1;if(a.forEach(function(e){Wt[e]!==o[e]&&(r[e]=1,l=!0)}),t=n,l)for(;e=Bt[--t];)if(null!==e.element){if(r[e.type]&&R(e.element)){Bt.splice(t,1),delete Bt[e.uuid];for(var s,c=e.lists,u=0;s=c[u++];)avalon.Array.remove(c,s),avalon.Array.remove(s,e);j(e)}}else Bt.splice(t,1);Wt=o,Yt=new Date}}function j(e){delete Bt[e.uuid],e.element=null,e.rollback&&e.rollback();for(var t in e)e[t]=null}function R(e){try{e.parentNode.nodeType}catch(t){return!0}return e.ifRemove&&!Ue.contains(e.ifRemove)&&Pe===e.parentNode?(e.parentNode&&e.parentNode.removeChild(e),!0):e.msRetain?0:1===e.nodeType?!Ue.contains(e):!avalon.contains(Ue,e)}function B(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&""===e.outerText}function Y(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function W(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function V(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function z(e){if(!("classList"in e)){e.classList={node:e};for(var t in Zt)e.classList[t.slice(1)]=Zt[t]}return e.classList}function X(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:Qt.test(e)?avalon.parseJSON(e):e}catch(t){}return e}function q(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function U(e,t){if(e.offsetWidth<=0){if(vn.test(rn["@:get"](e,"display"))){var n={node:e};for(var a in hn)n[a]=e.style[a],e.style[a]=hn[a];t.push(n)}var r=e.parentNode;r&&1===r.nodeType&&U(r,t)}}function G(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}function J(e,t,n,a){for(var r,o=[],i=" = "+n+".",l=e.length;r=e[--l];)t.hasOwnProperty(r)&&(o.push(r+i+r),a.vars.push(r),"duplex"===a.type&&(e.get=n+"."+r),e.splice(l,1));return o}function K(e){for(var t=[],n={},a=0;a<e.length;a++){var r=e[a],o=r&&"string"==typeof r.$id?r.$id:r;n[o]||(n[o]=t.push(r))}return t}function Z(e,t){return t=t.replace(On,"").replace(Nn,function(){return"],|"}).replace(Sn,function(e,t){return"["+bn(t)}).replace(Pn,function(){return'"],["'}).replace(In,function(){return'",'})+"]","return this.filters.$filter("+e+", "+t+")"}function Q(e,t,n){var a=n.type,r=n.filters||"",o=t.map(function(e){return String(e.$id).replace(Dn,"$1")})+e+a+r,s=kn(e).concat(),c=[],u=[],d=[],p="";t=K(t),n.vars=[];for(var f=0,h=t.length;h>f;f++)if(s.length){var v="vm"+Oe+"_"+f;u.push(v),d.push(t[f]),c.push.apply(c,J(s,t[f],v,n))}if(c.length||"duplex"!==a){"duplex"!==a&&(e.indexOf("||")>-1||e.indexOf("&&")>-1)&&n.vars.forEach(function(t){var n=new RegExp("\\b"+t+"(?:\\.\\w+|\\[\\w+\\])+","ig");e=e.replace(n,function(n,a){var r=n.charAt(t.length),o=e.slice(a+n.length),i=/^\s*\(/.test(o);if("."===r||"["===r||i){var l="var"+String(Math.random()).replace(/^0\./,"");if(i){var s=n.split(".");if(s.length>2){var u=s.pop();return c.push(l+" = "+s.join(".")),l+"."+u}return n}return c.push(l+" = "+n),l}return n})}),n.args=d,delete n.vars;var m=An.get(o);if(m)return void(n.evaluator=m);if(p=c.join(", "),p&&(p="var "+p),/\S/.test(r)){if(!/text|html/.test(n.type))throw Error("ms-"+n.type+"不支持过滤器");e="\nvar ret"+Oe+" = "+e+";\r\n",e+=Z("ret"+Oe,r);try{m=Function.apply(l,u.concat("'use strict';\n"+p+e)),n.evaluator=An.put(o,function(){return m.apply(avalon,arguments)})}catch(g){i("debug: parse error,"+g.message)}return void(s=c=u=null)}if("duplex"===a){var y="'use strict';\nreturn function(vvv){\n	"+p+";\n	if(!arguments.length){\n		return "+e+"\n	}\n	"+(En.test(e)?e:s.get)+"= vvv;\n} ";try{m=Function.apply(l,u.concat(y)),n.evaluator=An.put(o,m)}catch(g){i("debug: parse error,"+g.message)}return void(s=c=u=null)}if("on"===a){-1===e.indexOf("(")?e+=".call(this, $event)":e=e.replace("(",".call(this,"),u.push("$event"),e="\nreturn "+e+";";var b=e.lastIndexOf("\nreturn"),w=e.slice(0,b),x=e.slice(b);e=w+"\n"+x}else e="\nreturn "+e+";";try{m=Function.apply(l,u.concat("'use strict';\n"+p+e)),n.evaluator=An.put(o,m)}catch(g){i("debug: parse error,"+g.message)}s=c=u=null}}function ee(e){var t=bt.test(e);if(t){var n=de(e);return 1===n.length?n[0].value:n.map(function(e){return e.expr?"("+e.value+")":bn(e.value)}).join(" + ")}return e}function te(e,t,n,a){e=e||"",Q(e,t,n),n.evaluator&&!a&&(n.handler=rt[n.handlerName||n.type],avalon.injectBinding(n))}function ne(e,t,n){var a=setTimeout(function(){var r=e.innerHTML;clearTimeout(a),r===n?t():ne(e,t,r)})}function ae(e,t){var n=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",n),t.$events.expr=e.tagName+'[avalonctrl="'+n+'"]'}function re(e,t){for(var n,a=0;n=e[a++];)n.vmodels=t,at[n.type](n,t),n.evaluator&&n.element&&1===n.element.nodeType&&n.element.removeAttribute(n.name);e.length=0}function oe(e,t){return e.priority-t.priority}function ie(e,t,n){var a=!0;if(t.length){for(var r,o=Kn?Kn(e):e.attributes,l=[],s=[],c={},u={},d=0;r=o[d++];)if(r.specified&&(n=r.name.match(Rn))){var p=n[1],f=n[2]||"",h=r.value,v=r.name;if(u[v])continue;if(u[v]=1,Yn[p]?(f=p,p="on"):Wn[p]&&("enabled"===p&&(i("warning!ms-enabled或ms-attr-enabled已经被废弃"),p="disabled",h="!("+h+")"),f=p,p="attr",v="ms-"+p+"-"+f,s.push([r.name,v,h])),c[v]=h,"function"==typeof at[p]){var m=h.replace(jn,""),g=h!==m,y={type:p,param:f,element:e,name:v,value:m,oneTime:g,uuid:v+"-"+L(e),priority:(Bn[p]||10*p.charCodeAt(0))+(Number(f.replace(/\D/g,""))||0)};if("html"===p||"text"===p){var b=ue(h);avalon.mix(y,b),y.filters=y.filters.replace(Zn,function(){return y.type="html",y.group=1,""})}else if("duplex"===p)var w=v;else"ms-if-loop"===v&&(y.priority+=100);l.push(y),"widget"===p&&(e.msData=e.msData||c)}}if(l.length){for(l.sort(oe),s.forEach(function(t){i("warning!请改用"+t[1]+"代替"+t[0]+"!"),e.removeAttribute(t[0]),e.setAttribute(t[1],t[2])}),w&&c["ms-attr-value"]&&!e.scopeName&&"text"===e.type&&i("warning!一个控件不能同时定义ms-attr-value与"+w),d=0;y=l[d];d++){if(p=y.type,Vn.test(p))return re(l.slice(0,d+1),t);a&&(a=!zn.test(p))}re(l,t)}}a&&!Ln[e.tagName]&&xt.test(e.innerHTML.replace(ea,"<").replace(ta,">"))&&(Fn&&Fn(e),le(e,t))}function le(e,t){var n=avalon.slice(e.childNodes);se(n,t)}function se(e,t){for(var n,a=0;n=e[a++];)switch(n.nodeType){case 1:ce(n,t),n.msCallback&&(n.msCallback(),n.msCallback=void 0);break;case 3:bt.test(n.nodeValue)&&pe(n,t,a)}}function ce(e,t,n){var a=e.getAttribute("ms-skip");if(!e.getAttributeNode)return i("warning "+e.tagName+" no getAttributeNode method");var r=e.getAttributeNode("ms-important"),o=e.getAttributeNode("ms-controller");if("string"!=typeof a){if(n=r||o){var l=avalon.vmodels[n.value];if(!l)return;t=n===r?[l]:[l].concat(t);var s=n.name;e.removeAttribute(s),avalon(e).removeClass(s),ae(e,l)}ie(e,t)}}function ue(e){if(e.indexOf("|")>0){var t=e.replace(na,function(e){return Array(e.length+1).join("1")}),n=t.replace(Qn,"ᄢ㍄").indexOf("|");if(n>-1)return{filters:e.slice(n),value:e.slice(0,n),expr:!0}}return{value:e,filters:"",expr:!0}}function de(e){for(var t,n,a=[],r=0;;){if(n=e.indexOf(gt,r),-1===n)break;if(t=e.slice(r,n),t&&a.push({value:t,filters:"",expr:!1}),r=n+gt.length,n=e.indexOf(yt,r),-1===n)break;t=e.slice(r,n),t&&a.push(ue(t)),r=n+yt.length}return t=e.slice(r),t&&a.push({value:t,expr:!1,filters:""}),a}function pe(e,t){var n=[],a=de(e.data);if(a.length){for(var r,o=0;r=a[o++];){var i=Ne.createTextNode(r.value);r.expr&&(r.value=r.value.replace(jn,function(){return r.oneTime=!0,""}),r.type="text",r.element=i,r.filters=r.filters.replace(Zn,function(e,t,n){return r.type="html",""}),n.push(r)),Ge.appendChild(i)}e.parentNode.replaceChild(Ge,e),n.length&&re(n,t)}}function fe(e,t,n){var a=e.templateCache&&e.templateCache[t];if(a){for(var r,o=Ne.createDocumentFragment();r=a.firstChild;)o.appendChild(r);return o}return avalon.parseHTML(n)}function he(e){return null==e?"":e}function ve(e,t,n,a){return t.param.replace(/\w+/g,function(a){var r=avalon.duplexHooks[a];r&&"function"==typeof r[n]&&(e=r[n](e,t))}),e}function me(){for(var e=fa.length-1;e>=0;e--){var t=fa[e];t()===!1&&fa.splice(e,1)}fa.length||clearInterval(pa)}function ge(e){var t=NaN,n=NaN;if(e.setSelectionRange)t=e.selectionStart,n=e.selectionEnd;else{var a=document.selection.createRange();t=0-a.duplicate().moveStart("character",-1e5),n=t+a.text.length}return{start:t,end:n}}function ye(e,t,n){if(e.value&&!e.readOnly)if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.select()}else e.selectionStart=t,e.selectionEnd=n}function be(e,t,n,a){var r=e.template.cloneNode(!0),o=avalon.slice(r.childNodes);r.insertBefore(Ne.createComment(e.signature),r.firstChild),t.appendChild(r);var i=[n].concat(e.vmodels),l={nodes:o,vmodels:i};a.push(l)}function we(e){for(var t,n=[],a=e.element.parentNode.childNodes,r=0;t=a[r++];)if(t.nodeValue===e.signature)n.push(t);else if(t.nodeValue===e.signature+":end")break;return n}function xe(e,t,n){for(;;){var a=t.previousSibling;if(!a)break;if(a.parentNode.removeChild(a),n&&n.call(a),a===e)break}}function Te(){var e=w({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(e){this.$host[this.$key]=e}}},{$val:1});return e.$id=Ze("$proxy$with"),e}function _e(e,t,n){e=e||ga.pop(),e?e.$reinitialize():e=Te();var a=n.$repeat;return e.$key=t,e.$host=a,e.$outer=n.$outer,a.$events?e.$events.$val=a.$events[t]:e.$events={},e}function Ce(e){$e(e)}function $e(e){e.forEach(function(e){Ae(e,ya)}),e.length=0}function Me(e){var t={$host:[],$outer:{},$index:0,$first:!1,$last:!1,$remove:avalon.noop};t[e]={get:function(){var t=this.$events,n=t.$index;t.$index=t[e];try{return this.$host[this.$index]}finally{t.$index=n}},set:function(e){try{var t=this.$events,n=t.$index;t.$index=[],this.$host.set(this.$index,e)}finally{t.$index=n}}};var n={$last:1,$first:1,$index:1},a=w(t,n);return a.$id=Ze("$proxy$each"),a}function ke(e,t){for(var n,a=t.param||"el",r=0,o=ya.length;o>r;r++){var i=ya[r];i&&i.hasOwnProperty(a)&&(n=i,ya.splice(r,1))}n||(n=Me(a));var l=t.$repeat,s=l.length-1;return n.$index=e,n.$first=0===e,n.$last=e===s,n.$host=l,n.$outer=t.$outer,n.$remove=function(){return l.removeAt(n.$index)},n}function Ae(e,t){for(var n in e.$events){var a=e.$events[n];Array.isArray(a)&&(a.forEach(function(e){"object"==typeof e&&j(e)}),a.length=0)}e.$host=e.$outer={},t.unshift(e)>y.maxRepeatSize&&t.pop()}function Ee(e,t){var n="_"+e;if(!Ee[n]){var a=Ne.createElement(e);Ue.appendChild(a),t=qe?getComputedStyle(a,null).display:a.currentStyle.display,Ue.removeChild(a),Ee[n]=t}return Ee[n]}function De(e,t,n,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):3,i=a||",",l=n||".",s="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return s=(o?c(r,o):""+Math.round(r)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(s[1]||"").length<o&&(s[1]=s[1]||"",s[1]+=new Array(o-s[1].length+1).join("0")),s.join(l)}var Oe=new Date-0,Ne=n.document,Se=Ne.getElementsByTagName("head")[0],Pe=Se.insertBefore(document.createElement("avalon"),Se.firstChild);Pe.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",Pe.setAttribute("ms-skip","1"),Pe.className="avalonHide";var Ie=/\[native code\]/,Le="$"+Oe,He=!1,Fe=/[^, ]+/g,je=/^(?:object|array)$/,Re=/^\[object SVG\w*Element\]$/,Be=/^\[object (?:Window|DOMWindow|global)\]$/,Ye=Object.prototype,We=Ye.hasOwnProperty,Ve=Ye.toString,ze=Array.prototype,Xe=ze.slice,qe=n.dispatchEvent,Ue=Ne.documentElement,Ge=Ne.createDocumentFragment(),Je=Ne.createElement("div"),Ke={};"Boolean Number String Function Array Date RegExp Object Error".replace(Fe,function(e){Ke["[object "+e+"]"]=e.toLowerCase()});var Ze=function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)},Qe=c();avalon=function(e){return new avalon.init(e)},avalon.profile=function(){n.console&&avalon.config.profile&&Function.apply.call(console.log,console,arguments)},avalon.nextTick=new function(){function e(){for(var e=r.length,t=0;e>t;t++)r[t]();r=r.slice(e)}var t=n.setImmediate,a=n.MutationObserver;if(t)return t.bind(n);var r=[];if(a){var o=document.createTextNode("avalon");return new a(e).observe(o,{characterData:!0}),function(e){r.push(e),o.data=Math.random()}}return n.VBArray?function(t){r.push(t);var n=Ne.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,Se.removeChild(n),n=null},Se.appendChild(n)}:function(e){setTimeout(e,4)}},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Ke[Ve.call(e)]||"object":typeof e};var et="object"==typeof alert?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(t){return!1}}:function(e){return"[object Function]"===Ve.call(e)};avalon.isFunction=et,avalon.isWindow=function(e){return e?e==e.document&&e.document!=e:!1},u(n)&&(avalon.isWindow=u);var tt;for(tt in avalon({}))break;var nt="0"!==tt;avalon.isPlainObject=function(e,t){if(!e||"object"!==avalon.type(e)||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!We.call(e,"constructor")&&!We.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt)for(t in e)return We.call(e,t);for(t in e);return void 0===t||We.call(e,t)},Ie.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return"[object Object]"===Ve.call(e)&&Object.getPrototypeOf(e)===Ye}),avalon.mix=avalon.fn.mix=function(){var e,t,n,a,r,o,i=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[1]||{},l++),"object"==typeof i||et(i)||(i={}),l===s&&(i=this,l--);s>l;l++)if(null!=(e=arguments[l]))for(t in e){n=i[t];try{a=e[t]}catch(u){continue}i!==a&&(c&&a&&(avalon.isPlainObject(a)||(r=Array.isArray(a)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&avalon.isPlainObject(n)?n:{},i[t]=avalon.mix(c,o,a)):void 0!==a&&(i[t]=a))}return i},avalon.mix({rword:Fe,subscribers:Le,version:1.471,ui:{},log:i,slice:qe?function(e,t,n){return Xe.call(e,t,n)}:function(e,t,n){var a=[],r=e.length;if(void 0===n&&(n=r),"number"==typeof n&&isFinite(n)){t=d(t,r),n=d(n,r);for(var o=t;n>o;++o)a[o-t]=e[o]}return a},noop:l,error:function(e,t){throw(t||Error)(e)},oneObject:s,range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var a=-1,r=Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++a<r;)o[a]=e,e+=n;return o},eventHooks:[],bind:function(e,t,n,a){var r=avalon.eventHooks,o=r[t];"object"==typeof o&&(t=o.type||t,a=o.phase||!!a,n=o.fn?o.fn(e,n):n);var i=qe?n:function(t){n.call(e,g(t))};return qe?e.addEventListener(t,i,a):e.attachEvent("on"+t,i),i},unbind:function(e,t,n,a){var r=avalon.eventHooks,o=r[t],i=n||l;"object"==typeof o&&(t=o.type||t,a=o.phase||!!a),qe?e.removeEventListener(t,i,a):e.detachEvent("on"+t,i)},css:function(e,t,n){e instanceof avalon&&(e=e[0]);var a,r=/[_-]/.test(t)?V(t):t;if(t=avalon.cssName(r)||r,void 0===n||"boolean"==typeof n){a=rn[r+":get"]||rn["@:get"],"background"===t&&(t="backgroundColor");var o=a(e,t);return n===!0?parseFloat(o)||0:o}if(""===n)e.style[t]="";else{if(null==n||n!==n)return;isFinite(n)&&!avalon.cssNumber[r]&&(n+="px"),a=rn[r+":set"]||rn["@:set"],a(e,t,n)}},each:function(e,t){if(e){var n=0;if(p(e))for(var a=e.length;a>n&&t(n,e[n])!==!1;n++);else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}},getWidgetData:function(e,t){var n=avalon(e).data(),a={};for(var r in n)0===r.indexOf(t)&&(a[r.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=n[r]);return a},Array:{ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var at=avalon.bindingHandlers={},rt=avalon.bindingExecutors={},ot=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},t.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e};if(!"司徒正美".trim){var it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(it,"")}}var lt=!{toString:null}.propertyIsEnumerable("toString"),st=function(){}.propertyIsEnumerable("prototype"),ct=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ut=ct.length;if(Object.keys||(Object.keys=function(e){var t=[],n=st&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(var a=0;a<e.length;++a)t.push(String(a));else for(var r in e)n&&"prototype"===r||!We.call(e,r)||t.push(String(r));if(lt)for(var o=e.constructor,i=o&&o.prototype===e,l=0;ut>l;l++){var s=ct[l];i&&"constructor"===s||!We.call(e,s)||t.push(s)}return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Ve.call(e)}),l.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&void 0===e)return this;var t=this,n=arguments;return function(){var a,r=[];for(a=1;a<n.length;a++)r.push(n[a]);for(a=0;a<arguments.length;a++)r.push(arguments[a]);return t.apply(e,r)}}),Ie.test([].map)||avalon.mix(ze,{indexOf:function(e,t){var n=this.length,a=~~t;for(0>a&&(a+=n);n>a;a++)if(this[a]===e)return a;return-1},lastIndexOf:function(e,t){var n=this.length,a=null==t?n-1:t;for(0>a&&(a=Math.max(0,n+a));a>=0;a--)if(this[a]===e)return a;return-1},forEach:f("","_",""),filter:f("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:f("r=[],","r[i]=_","return r"),some:f("","if(_)return true","return false"),every:f("","if(!_)return false","return true")}),avalon.contains=h,Ne.contains||(Ne.contains=function(e){return h(Ne,e)}),n.SVGElement){Ne.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))});var dt="http://www.w3.org/2000/svg",pt=Ne.createElementNS(dt,"svg");pt.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',Re.test(pt.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:v,set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode,a=avalon.parseHTML(e);if("svg"===t)n.insertBefore(a,this);else{var r=Ne.createDocumentFragment();m(a,r),n.insertBefore(r,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);m(t,this)}}}})}!Ue.outerHTML&&n.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",v);var ft=/^(?:mouse|contextmenu|drag)|click/,ht=avalon.eventHooks;if("onmouseenter"in Ue||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ht[e]={type:t,fn:function(t,n){return function(a){var r=a.relatedTarget;return r&&(r===t||16&t.compareDocumentPosition(r))?void 0:(delete a.type,a.type=e,n.call(t,a))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){n[e]&&!ht.animationend&&(ht.animationend={type:t})}),"oninput"in Ne.createElement("input")||(ht.input={type:"propertychange",fn:function(e,t){return function(n){return"value"===n.propertyName?(n.type="input",t.call(e,n)):void 0}}}),void 0===Ne.onmousewheel){var vt=void 0!==Ne.onwheel?"wheel":"DOMMouseScroll",mt="wheel"===vt?"deltaY":"detail";ht.mousewheel={type:vt,fn:function(e,t){return function(n){n.wheelDeltaY=n.wheelDelta=n[mt]>0?-120:120,n.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(n,"type",{value:"mousewheel"}),t.call(e,n)}}}}var gt,yt,bt,wt,xt,Tt=/[-.*+?^${}()|[\]\/\\]/g,_t={interpolate:function(e){if(gt=e[0],yt=e[1],gt===yt)throw new SyntaxError("openTag===closeTag");var t=gt+"test"+yt;if(Je.innerHTML=t,Je.innerHTML!==t&&Je.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");y.openTag=gt,y.closeTag=yt,Je.innerHTML="";var n=b(gt),a=b(yt);bt=new RegExp(n+"(.*?)"+a),wt=new RegExp(n+"(.*?)"+a,"g"),xt=new RegExp(n+".*?"+a+"|\\sms-")}};y.debug=!1,y.plugins=_t,y.plugins.interpolate(["{{","}}"]),y.paths={},y.shim={},y.maxRepeatSize=100,avalon.config=y;var Ct=/(\w+)\[(avalonctrl)="(\S+)"\]/,$t=Ne.querySelectorAll?function(e){return Ne.querySelectorAll(e)}:function(e){for(var t,n=e.match(Ct),a=Ne.getElementsByTagName(n[1]),r=[],o=0;t=a[o++];)t.getAttribute(n[2])===n[3]&&r.push(t);return r},Mt={$watch:function(e,t){if("function"==typeof t){var n=this.$events[e];n?n.push(t):this.$events[e]=[t]}else this.$events=this.$watch.backup;return this},$unwatch:function(e,t){var n=arguments.length;if(0===n)this.$watch.backup=this.$events,this.$events={};else if(1===n)this.$events[e]=[];else for(var a=this.$events[e]||[],r=a.length;~--r<0;)if(a[r]===t)return a.splice(r,1);return this},$fire:function(e){var t,n,a,r;/^(\w+)!(\S+)$/.test(e)&&(t=RegExp.$1,e=RegExp.$2);var o=this.$events;if(o){var i=Xe.call(arguments,1),l=[e].concat(i);if("all"===t)for(n in avalon.vmodels)a=avalon.vmodels[n],a!==this&&a.$fire.apply(a,l);else if("up"===t||"down"===t){var s=o.expr?$t(o.expr):[];if(0===s.length)return;for(n in avalon.vmodels)if(a=avalon.vmodels[n],a!==this&&a.$events.expr){var c=$t(a.$events.expr);if(0===c.length)continue;ze.forEach.call(c,function(e){ze.forEach.call(s,function(n){var r="down"===t?n.contains(e):e.contains(n);r&&(e._avalon=a)})})}var u=Ne.getElementsByTagName("*"),d=[];for(ze.forEach.call(u,function(e){e._avalon&&(d.push(e._avalon),e._avalon="",e.removeAttribute("_avalon"))}),"up"===t&&d.reverse(),n=0;(r=d[n++])&&r.$fire.apply(r,l)!==!1;);}else{var p=o[e]||[],f=o.$all||[];for(n=0;r=p[n++];)et(r)&&r.apply(this,i);for(n=0;r=f[n++];)et(r)&&r.apply(this,arguments)}}}},kt=avalon.vmodels={};avalon.define=function(e,t){var n=e.$id||e;if(n||i("warning: vm必须指定$id"),kt[n]&&i("warning: "+n+" 已经存在于avalon.vmodels中"),"object"==typeof e)var a=w(e);else{var r={$watch:l};t(r),a=w(r),He=!0,t(a),He=!1}return a.$id=n,kt[n]=a};var At=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray,$reinitialize").match(Fe),Et=Object.defineProperty,Dt=!0;try{Et({},"_",{value:"x"});var Ot=Object.defineProperties}catch(Nt){Dt=!1}var St=Object.is||function(e,t){return 0===e&&0===t?1/e===1/t:e!==e?t!==t:e===t},Pt=qe?function(e){var t={};for(var n in e)t[n]={get:e[n],set:e[n],enumerable:!0,configurable:!0};return t}:function(e){return e};if(!Dt&&("__defineGetter__"in avalon&&(Et=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},Ot=function(e,t){for(var n in t)t.hasOwnProperty(n)&&Et(e,n,t[n]);return e}),Qe)){var It={};n.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),Ot=function(e,t,a){var r=[];r.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d"+Oe+", p"+Oe+")","		Set [__data__] = d"+Oe+": set [__proxy__] = p"+Oe,"		Set [__const__] = Me","	End Function");for(e in a)t.hasOwnProperty(e)||r.push("	Public ["+e+"]");At.forEach(function(e){t.hasOwnProperty(e)||r.push("	Public ["+e+"]")}),r.push("	Public [hasOwnProperty]");for(e in t)r.push("	Public Property Let ["+e+"](val"+Oe+")",'		Call [__proxy__](Me,[__data__], "'+e+'", val'+Oe+")","	End Property","	Public Property Set ["+e+"](val"+Oe+")",'		Call [__proxy__](Me,[__data__], "'+e+'", val'+Oe+")","	End Property","	Public Property Get ["+e+"]","	On Error Resume Next","		Set["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"	If Err.Number <> 0 Then","		["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"	End If","	On Error Goto 0","	End Property");
r.push("End Class");var o=r.join("\r\n"),i=It[o];i||(i=Ze("VBClass"),n.parseVB("Class "+i+o),n.parseVB(["Function "+i+"Factory(a, b)","	Dim o","	Set o = (New "+i+")(a, b)","	Set "+i+"Factory = o","End Function"].join("\r\n")),It[o]=i);var l=n[i+"Factory"](t,D);return l}}var Lt=ze.splice,Ht={_splice:Lt,_fire:function(e,t,n){I(this.$events[Le],e,t,n)},size:function(){return this._.length},pushArray:function(e){var t=e.length,n=this.length;return t&&(ze.push.apply(this.$model,e),N.call(this,"add",n,t,Math.max(0,n-1))),t+n},push:function(){var e,t=[],n=arguments.length;for(e=0;n>e;e++)t[e]=arguments[e];return this.pushArray(t)},unshift:function(){var e=arguments.length,t=this.length;return e&&(ze.unshift.apply(this.$model,arguments),N.call(this,"add",0,e,0)),e+t},shift:function(){if(this.length){var e=this.$model.shift();return N.call(this,"del",0,1,0),e}},pop:function(){var e=this.length;if(e){var t=this.$model.pop();return N.call(this,"del",e-1,1,Math.max(0,e-2)),t}},splice:function(e){var t,n=arguments.length,a=[],r=Lt.apply(this.$model,arguments);return r.length&&(a.push("del",e,r.length,0),t=!0),n>2&&(t?a.splice(3,1,0,"add",e,n-2):a.push("add",e,n-2,0),t=!0),t?N.apply(this,a):[]},contains:function(e){return-1!==this.indexOf(e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>=0?(this.$model.splice(e,1),N.call(this,"del",e,1,0)):[]},clear:function(){return this.$model.length=this.length=this._.length=0,this._fire("clear",0),this},removeAll:function(e){if(Array.isArray(e))for(var t=this.length-1;t>=0;t--)-1!==e.indexOf(this[t])&&this.removeAt(t);else if("function"==typeof e)for(t=this.length-1;t>=0;t--){var n=this[t];e(n,t)&&this.removeAt(t)}else this.clear()},ensure:function(e){return this.contains(e)||this.push(e),this},set:function(e,t){if(e<this.length&&e>-1){var n=avalon.type(t);t&&t.$model&&(t=t.$model);var a=this[e];if("object"===n)for(var r in t)a.hasOwnProperty(r)&&(a[r]=t[r]);else"array"===n?a.clear().push.apply(a,t):a!==t&&(this[e]=t,this.$model[e]=t,this._fire("set",e,t))}return this}};"sort,reverse".replace(Fe,function(e){Ht[e]=function(){var t,n=this.$model,a=n.concat(),r=Math.random(),o=[];ze[e].apply(n,arguments);for(var i=0,l=a.length;l>i;i++){var s=n[i],c=a[i];if(St(s,c))o.push(i);else{var u=a.indexOf(s);o.push(u),a[u]=r,t=!0}}return t&&(S(this,o),this._fire("move",o),this._fire("index",0)),this}});var Ft=function(){var e,t=[];return{begin:function(n){t.push(e),e=n},end:function(){e=t.pop()},collectDependency:function(t,n){e&&e.callback(t,n)}}}(),jt=/^(duplex|on)$/;avalon.injectBinding=function(e){var t=e.evaluator;if(t){Ft.begin({callback:function(t,n){P(t.$events[n._name],e)}});try{var n=jt.test(e.type)?e:t.apply(0,e.args);void 0===n&&delete e.evaluator,e.handler&&e.handler(n,e.element,e)}catch(a){i("warning:exception throwed in [avalon.injectBinding] ",a),delete e.evaluator;var r=e.element;if(r&&3===r.nodeType){var o=r.parentNode;y.commentInterpolate?o.replaceChild(Ne.createComment(e.value),r):r.data=gt+(e.oneTime?"::":"")+e.value+yt}}finally{Ft.end()}}};var Rt=0,Bt=avalon.$$subscribers=[],Yt=new Date,Wt={},Vt={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:qe?[0,"",""]:[1,"X<div>","</div>"]};Vt.th=Vt.td,Vt.optgroup=Vt.option,Vt.tbody=Vt.tfoot=Vt.colgroup=Vt.caption=Vt.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(Fe,function(e){Vt[e]=Vt.g});var zt=/<([\w:]+)/,Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=qe?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,Ut=s(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),Gt=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,Jt=Ne.createElement("script"),Kt=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=Ge.cloneNode(!1);if("string"!=typeof e)return t;if(!Kt.test(e))return t.appendChild(Ne.createTextNode(e)),t;e=e.replace(Xt,"<$1></$2>").trim();var n,a,r=(zt.exec(e)||["",""])[1].toLowerCase(),o=Vt[r]||Vt._default,i=Je;qe||(e=e.replace(qt,"<br class=msNoScope>$1")),i.innerHTML=o[1]+e+o[2];var l=i.getElementsByTagName("script");if(l.length)for(var s,c=0;s=l[c++];)Ut[s.type]&&(a=Jt.cloneNode(!1),ze.forEach.call(s.attributes,function(e){e&&e.specified&&(a[e.name]=e.value,a.setAttribute(e.name,e.value))}),a.text=s.text,s.parentNode.replaceChild(a,s));if(!qe){var u="X<div>"===o[1]?i.lastChild.firstChild:i.lastChild;if(u&&"TABLE"===u.tagName&&"tbody"!==r)for(l=u.childNodes,c=0;s=l[c++];)if("TBODY"===s.tagName&&!s.innerHTML){u.removeChild(s);break}l=i.getElementsByTagName("br");for(var d=l.length;s=l[--d];)"msNoScope"===s.className&&s.parentNode.removeChild(s);for(l=i.all,c=0;s=l[c++];)B(s)&&Y(s)}for(c=o[0];c--;i=i.lastChild);for(;n=i.firstChild;)t.appendChild(n);return t},avalon.innerHTML=function(e,t){if(!qe&&!qt.test(t)&&!Gt.test(t))try{return void(e.innerHTML=t)}catch(n){}var a=this.parseHTML(t);this.clearHTML(e).appendChild(a)},avalon.clearHTML=function(e){for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);return e};var Zt={_toString:function(){var e=this.node,t=e.className,n="string"==typeof t?t:t.baseVal;return n.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;Re.test(t)?t.setAttribute("class",e):t.className=e}};"add,remove".replace(Fe,function(e){avalon.fn[e+"Class"]=function(t){var n=this[0];return t&&"string"==typeof t&&n&&1===n.nodeType&&t.replace(/\S+/g,function(t){z(n)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&z(t).contains(e)},toggleClass:function(e,t){for(var n,a=0,r=String(e).split(/\s+/),o="boolean"==typeof t;n=r[a++];){var i=o?t:!this.hasClass(n);this[i?"addClass":"removeClass"](n)}return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){switch(e="data-"+W(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var n=this.attr(e);return X(n);case 0:var a={};return ze.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=V(e.slice(5)),a[e]=X(t.value)))}),a}},removeData:function(e){return e="data-"+W(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var a=avalon.css(this,e,t);return void 0!==a?a:this},position:function(){var e,t,n=this[0],a={top:0,left:0};if(n)return"fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(a=e.offset()),a.top+=avalon.css(e[0],"borderTopWidth",!0),a.left+=avalon.css(e[0],"borderLeftWidth",!0),a.top-=e.scrollTop(),a.left-=e.scrollLeft()),{top:t.top-a.top-avalon.css(n,"marginTop",!0),left:t.left-a.left-avalon.css(n,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||Ue)},bind:function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},unbind:function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},val:function(e){var t=this[0];if(t&&1===t.nodeType){var n=0===arguments.length,a=n?":get":":set",r=gn[G(t)+a];if(r)var o=r(t,e);else{if(n)return(t.value||"").replace(/\r/g,"");t.value=e}}return n?o:this}});var Qt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,en=/^[\],:{}\s]*$/,tn=/(?:^|:|,)(?:\s*\[)+/g,nn=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,an=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=n.JSON?JSON.parse:function(e){if("string"==typeof e){if(e=e.trim(),e&&en.test(e.replace(nn,"@").replace(an,"]").replace(tn,"")))return new Function("return "+e)();avalon.error("Invalid JSON: "+e)}return e},avalon.fireDom=function(e,t,n){if(Ne.createEvent){var a=Ne.createEvent("Events");a.initEvent(t,!0,!0),avalon.mix(a,n),e.dispatchEvent(a)}else try{a=Ne.createEventObject(),avalon.mix(a,n),e.fireEvent("on"+t,a)}catch(r){}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var a=this[0]||{},r=q(a),o="scrollTop"===e;return arguments.length?void(r?r.scrollTo(o?avalon(r).scrollLeft():n,o?n:avalon(r).scrollTop()):a[e]=n):r?t in r?r[t]:Ue[e]:a[e]}});var rn=avalon.cssHooks={},on=["","-webkit-","-o-","-moz-","-ms-"],ln={"float":qe?"cssFloat":"styleFloat"};if(avalon.cssNumber=s("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(ln[e])return ln[e];t=t||Ue.style;for(var a=0,r=on.length;r>a;a++)if(n=V(on[a]+e),n in t)return ln[e]=n;return null},rn["@:set"]=function(e,t,n){try{e.style[t]=n}catch(a){}},n.getComputedStyle)rn["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,a=getComputedStyle(e,null);return a&&(n="filter"===t?a.getPropertyValue(t):a[t],""===n&&(n=e.style[t])),n},rn["opacity:get"]=function(e){var t=rn["@:get"](e,"opacity");return""===t?"1":t};else{var sn=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,cn=/^(top|right|bottom|left)$/,un=/alpha\([^)]*\)/i,dn=!!n.XDomainRequest,pn="DXImageTransform.Microsoft.Alpha",fn={thin:dn?"1px":"2px",medium:dn?"3px":"4px",thick:dn?"5px":"6px"};rn["@:get"]=function(e,t){var n=e.currentStyle,a=n[t];if(sn.test(a)&&!cn.test(a)){var r=e.style,o=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=n.left,r.left="fontSize"===t?"1em":a||0,a=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=i}return"medium"===a&&(t=t.replace("Width","Style"),"none"===n[t]&&(a="0px")),""===a?"auto":fn[a]||a},rn["opacity:set"]=function(e,t,n){var a=e.style,r=isFinite(n)&&1>=n?"alpha(opacity="+100*n+")":"",o=a.filter||"";a.zoom=1,a.filter=(un.test(o)?o.replace(un,r):o+" "+r).trim(),a.filter||a.removeAttribute("filter")},rn["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[pn],n=t&&t.enabled?t.opacity:100;return n/100+""}}"top,left".replace(Fe,function(e){rn[e+":get"]=function(t){var n=rn["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var hn={position:"absolute",visibility:"hidden",display:"block"},vn=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(Fe,function(e){var t=e.toLowerCase(),n="client"+e,a="scroll"+e,r="offset"+e;rn[t+":get"]=function(t,n,a){var o=-4;"number"==typeof a&&(o=a),n="Width"===e?["Left","Right"]:["Top","Bottom"];var i=t[r];return 2===o?i+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>o&&(i=i-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===o&&(i=i-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),i)},rn[t+"&get"]=function(e){var n=[];U(e,n);for(var a,r=rn[t+":get"](e),o=0;a=n[o++];){e=a.node;for(var i in a)"string"==typeof a[i]&&(e.style[i]=a[i])}return r},avalon.fn[t]=function(o){var i=this[0];if(0===arguments.length){if(i.setTimeout)return i["inner"+e]||i.document.documentElement[n]||i.document.body[n];if(9===i.nodeType){var l=i.documentElement;return Math.max(i.body[a],l[a],i.body[r],l[r],l[n])}return rn[t+"&get"](i)}return this.css(t,o)},avalon.fn["inner"+e]=function(){return rn[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return rn[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,a=n.body,r=n.documentElement,o=n.defaultView||n.parentWindow;if(!avalon.contains(r,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var i=r.clientTop||a.clientTop,l=r.clientLeft||a.clientLeft,s=Math.max(o.pageYOffset||0,r.scrollTop,a.scrollTop),c=Math.max(o.pageXOffset||0,r.scrollLeft,a.scrollLeft);return{top:t.top+s-i,left:t.left+c-l}};var mn=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,gn={"option:get":Qe?function(e){return mn.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){for(var n,a=e.options,r=e.selectedIndex,o=gn["option:get"],i="select-one"===e.type||0>r,l=i?null:[],s=i?r+1:a.length,c=0>r?s:i?r:0;s>c;c++)if(n=a[c],(n.selected||c===r)&&!n.disabled){if(t=o(n),i)return t;l.push(t)}return l},"select:set":function(e,t,n){t=[].concat(t);for(var a,r=gn["option:get"],o=0;a=e.options[o++];)(a.selected=t.indexOf(r(a))>-1)&&(n=!0);n||(e.selectedIndex=-1)}},yn={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},bn=n.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(e){var t=yn[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},wn=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(","),xn=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,Tn=/[^\w$]+/g,_n=new RegExp(["\\b"+wn.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),Cn=/\b\d[^,]*/g,$n=/^,+|,+$/g,Mn=new ot(512),kn=function(e){var t=","+e.trim(),n=Mn.get(t);if(n)return n;var a=e.replace(xn,"").replace(Tn,",").replace(_n,"").replace(Cn,"").replace($n,"").split(/^$|,+/);return Mn.put(t,K(a))},An=new ot(128),En=/\w\[.*\]|\w\.\w/,Dn=/(\$proxy\$[a-z]+)\d+$/,On=/\)\s*$/,Nn=/\)\s*\|/g,Sn=/\|\s*([$\w]+)/g,Pn=/"\s*\["/g,In=/"\s*\(/g;avalon.parseExprProxy=te,avalon.scan=function(e,t){e=e||Ue;var n=t?[].concat(t):[];ce(e,n)};var Ln=s("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),Hn=function(e,t,n){var a=e.getAttribute(t);if(a)for(var r,o=0;r=n[o++];)if(r.hasOwnProperty(a)&&"function"==typeof r[a])return r[a]},Fn=Qe&&n.MutationObserver?function(e){for(var t,n=e.firstChild;n;){var a=n.nextSibling;3===n.nodeType?t?(t.nodeValue+=n.nodeValue,e.removeChild(n)):t=n:t=null,n=a}}:0,jn=/^\s*::/,Rn=/ms-(\w+)-?(.*)/,Bn={"if":10,repeat:90,data:100,widget:110,each:1400,"with":1500,duplex:2e3,on:3e3},Yn=s("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),Wn=s("value,title,alt,checked,selected,disabled,readonly,enabled"),Vn=/^if|widget|repeat$/,zn=/^each|with|html|include$/;if(!qe)var Xn=new ot(512),qn=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Un=/^['"]/,Gn=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,Jn=/&amp;/g,Kn=function(e){var t=e.outerHTML;if("</"===t.slice(0,2)||!t.trim())return[];var n,a,r,o=t.match(Gn)[0],i=[],l=Xn.get(o);if(l)return l;for(;a=qn.exec(o);){r=a[2],r&&(r=(Un.test(r)?r.slice(1,-1):r).replace(Jn,"&"));var s=a[1].toLowerCase();n=s.match(Rn);var c={name:s,specified:!0,value:r||""};i.push(c)}return Xn.put(o,i)};var Zn=/\|\s*html(?:\b|$)/,Qn=/\|\|/g,ea=/&lt;/g,ta=/&gt;/g,na=/(['"])(\\\1|.)+?\1/g,aa=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),ra={};aa.replace(Fe,function(e){ra[e.toLowerCase()]=e});var oa={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},ia=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");ia.replace(Fe,function(e){oa[e.toLowerCase()]=e});var la=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,sa=/<noscript.*?>([\s\S]+?)<\/noscript>/im,ca=function(){return new(n.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},ua=avalon.templateCache={};at.attr=function(e,t){var n=ee(e.value.trim());if("include"===e.type){var a=e.element;e.includeRendered=Hn(a,"data-include-rendered",t),e.includeLoaded=Hn(a,"data-include-loaded",t);var r=e.includeReplace=!!avalon(a).data("includeReplace");avalon(a).data("includeCache")&&(e.templateCache={}),e.startInclude=Ne.createComment("ms-include"),e.endInclude=Ne.createComment("ms-include-end"),r?(e.element=e.startInclude,a.parentNode.insertBefore(e.startInclude,a),a.parentNode.insertBefore(e.endInclude,a.nextSibling)):(a.insertBefore(e.startInclude,a.firstChild),a.appendChild(e.endInclude))}e.handlerName="attr",te(n,t,e)},rt.attr=function(e,t,a){var r=a.type,o=a.param;if("css"===r)avalon(t).css(o,e);else if("attr"===r){var i=e===!1||null===e||void 0===e;!qe&&oa[o]&&(o=oa[o]);var l=ra[o];if("boolean"==typeof t[l]&&(t[l]=!!e,e||(i=!0)),i)return t.removeAttribute(o);var s=Re.test(t)?!1:Ne.namespaces&&B(t)?!0:o in t.cloneNode(!1);s?t[o]=e+"":t.setAttribute(o,e)}else if("include"===r&&e){var c=a.vmodels,u=a.includeRendered,d=a.includeLoaded,p=a.includeReplace,f=p?t.parentNode:t,h=function(t){if(null!==a.vmodels){if(d){var n=d.apply(f,[t].concat(c));"string"==typeof n&&(t=n)}u&&ne(f,function(){u.call(f)},NaN);var r=a.includeLastID;if(a.templateCache&&r&&r!==e){var o=a.templateCache[r];o||(o=a.templateCache[r]=Ne.createElement("div"),Pe.appendChild(o))}for(a.includeLastID=e;a.startInclude;){var i=a.startInclude.nextSibling;if(!i||i===a.endInclude)break;f.removeChild(i),o&&o.appendChild(i)}var l=fe(a,e,t),s=avalon.slice(l.childNodes);f.insertBefore(l,a.endInclude),se(s,c)}};if("src"===a.param)if("string"==typeof ua[e])avalon.nextTick(function(){h(ua[e])});else if(Array.isArray(ua[e]))ua[e].push(h);else{var v=ca();v.onreadystatechange=function(){if(4===v.readyState){var t=v.status;if(t>=200&&300>t||304===t||1223===t){for(var n,a=v.responseText,r=0;n=ua[e][r++];)n(a);ua[e]=a}}},ua[e]=[h],v.open("GET",e,!0),"withCredentials"in v&&(v.withCredentials=!0),v.setRequestHeader("X-Requested-With","XMLHttpRequest"),v.send(null)}else{var m=e&&1===e.nodeType?e:Ne.getElementById(e);if(m){if("NOSCRIPT"===m.tagName&&!m.innerHTML&&!m.fixIE78){v=ca(),v.open("GET",location,!1),v.send(null);for(var g=Ne.getElementsByTagName("noscript"),y=(v.responseText||"").match(la)||[],b=y.length,w=0;b>w;w++){var x=g[w];x&&(x.style.display="none",x.fixIE78=(y[w].match(sa)||["","&nbsp;"])[1])}}avalon.nextTick(function(){h(m.fixIE78||m.value||m.innerText||m.innerHTML)})}}}else if(Ue.hasAttribute||"string"!=typeof e||"src"!==r&&"href"!==r||(e=e.replace(/&amp;/g,"&")),t[r]=e,n.chrome&&"EMBED"===t.tagName){var T=t.parentNode,_=document.createComment("ms-src");T.replaceChild(_,t),T.replaceChild(t,_)}},"title,alt,src,value,css,include,href".replace(Fe,function(e){at[e]=at.attr}),at["class"]=function(e,t){var n,a=e.param,r=e.value;if(e.handlerName="class",!a||isFinite(a)){e.param="";var o=r.replace(wt,function(e){return e.replace(/./g,"0")}).indexOf(":");if(-1===o){var i=r;n=!0}else i=r.slice(0,o),n=r.slice(o+1);i=bt.test(r)?ee(i):bn(i),e.expr="["+i+","+n+"]"}else e.expr="["+bn(a)+","+r+"]",e.oldStyle=a;var l=e.type;if("hover"===l||"active"===l){if(!e.hasBindEvent){var s=e.element,c=avalon(s),u="mouseenter",d="mouseleave";if("active"===l){s.tabIndex=s.tabIndex||-1,u="mousedown",d="mouseup";var p=c.bind("mouseleave",function(){e.toggleClass&&c.removeClass(e.newClass)})}}var f=c.bind(u,function(){e.toggleClass&&c.addClass(e.newClass)}),h=c.bind(d,function(){e.toggleClass&&c.removeClass(e.newClass)});e.rollback=function(){c.unbind("mouseleave",p),c.unbind(u,f),c.unbind(d,h)},e.hasBindEvent=!0}te(e.expr,t,e)},rt["class"]=function(e,t,n){var a=avalon(t);n.newClass=e[0],n.toggleClass=!!e[1],n.oldClass&&n.newClass!==n.oldClass&&a.removeClass(n.oldClass),n.oldClass=n.newClass,"class"===n.type&&(n.oldStyle?a.toggleClass(n.oldStyle,!!e[1]):a.toggleClass(n.newClass,n.toggleClass))},"hover,active".replace(Fe,function(e){at[e]=at["class"]}),rt.data=function(e,t,n){var a="data-"+n.param;e&&"object"==typeof e?t[a]=e:t.setAttribute(a,String(e))};var da=at.duplex=function(e,t){var n,a=e.element;if(te(e.value,t,e,1),e.changed=Hn(a,"data-duplex-changed",t)||l,e.evaluator&&e.args){var r=[],o=s("string,number,boolean,checked");"radio"===a.type&&""===e.param&&(e.param="checked"),a.msData&&(a.msData["ms-duplex"]=e.value),e.param.replace(/\w+/g,function(t){/^(checkbox|radio)$/.test(a.type)&&/^(radio|checked)$/.test(t)&&("radio"===t&&i("ms-duplex-radio已经更名为ms-duplex-checked"),t="checked",e.isChecked=!0),"bool"===t?(t="boolean",i("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===t&&(t="string",i("ms-duplex-text已经更名为ms-duplex-string")),o[t]&&(n=!0),avalon.Array.ensure(r,t)}),n||r.push("string"),e.param=r.join("-"),e.bound=function(t,n){a.addEventListener?a.addEventListener(t,n,!1):a.attachEvent("on"+t,n);var r=e.rollback;e.rollback=function(){a.avalonSetter=null,avalon.unbind(a,t,n),r&&r()}};for(var c in avalon.vmodels){var u=avalon.vmodels[c];u.$fire("avalon-ms-duplex-init",e)}var d=e.pipe||(e.pipe=ve);d(null,e,"init");var p=a.tagName;da[p]&&da[p](a,e.evaluator.apply(null,e.args),e)}};avalon.duplexHooks={checked:{get:function(e,t){return!t.element.oldValue}},string:{get:function(e){return e},set:he},"boolean":{get:function(e){return"true"===e},set:he},number:{get:function(e,t){var n=parseFloat(e);if(-e===-n)return n;var a=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(a[0]){case"strong":return 0;case"medium":return""===e?"":0;case"weak":return e}},set:he}};var pa,fa=[];avalon.tick=function(e){1===fa.push(e)&&(pa=setInterval(me,60))};var ha=l;!new function(){function e(e){t[this.tagName].call(this,e),!this.msFocus&&this.avalonSetter&&this.avalonSetter()}try{var t={},n=HTMLInputElement.prototype,a=HTMLTextAreaElement.prototype,r=HTMLInputElement.prototype;Object.getOwnPropertyNames(r),t.INPUT=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:e}),t.TEXTAREA=Object.getOwnPropertyDescriptor(a,"value").set,Object.defineProperty(a,"value",{set:e})}catch(o){ha=avalon.tick}},Qe&&avalon.bind(Ne,"selectionchange",function(e){var t=Ne.activeElement||{};!t.msFocus&&t.avalonSetter&&t.avalonSetter()});var va=/^(file|button|reset|submit|checkbox|radio|range)$/;da.INPUT=function(e,t,n){function a(e){n.changed.call(this,e,n)}function r(){p=!0}function o(){p=!1}function l(e){setTimeout(function(){f(e)})}var s,c=e.type,u=n.bound,d=avalon(e),p=!1,f=function(){var r=e.value;if(!p&&r!==s){var o=n.pipe(r,n,"get");d.data("duplexObserve")!==!1&&(s=r,t(o),a.call(e,o))}};if(n.handler=function(){var a=n.pipe(t(),n,"set");if(a!==s){var r=!1;if(e.msFocus)try{var o=ge(e);o.start===o.end&&(o=o.start,r=!0)}catch(i){}e.value=s=a,r&&!e.readyOnly&&ye(e,o,o)}},n.isChecked||"radio"===c){var h=6===Qe;f=function(){if(d.data("duplexObserve")!==!1){var r=n.pipe(e.value,n,"get");t(r),a.call(e,r)}},n.handler=function(){var a=t(),r=n.isChecked?!!a:a+""===e.value;e.oldValue=r,h?setTimeout(function(){e.defaultChecked=r,e.checked=r},31):e.checked=r},u("click",f)}else if("checkbox"===c)f=function(){if(d.data("duplexObserve")!==!1){var r=e.checked?"ensure":"remove",o=t();Array.isArray(o)||(i("ms-duplex应用于checkbox上要对应一个数组"),o=[o]);var l=n.pipe(e.value,n,"get");avalon.Array[r](o,l),a.call(e,o)}},n.handler=function(){var a=[].concat(t()),r=n.pipe(e.value,n,"get");e.checked=a.indexOf(r)>-1},u(qe?"change":"click",f);else{var v=e.getAttribute("data-duplex-event")||"input";e.attributes["data-event"]&&i("data-event指令已经废弃，请改用data-duplex-event"),v.replace(Fe,function(e){switch(e){case"input":Qe?(Qe>8?(9===Qe&&u("keyup",f),u("input",f)):u("propertychange",function(e){"value"===e.propertyName&&f()}),u("dragend",l)):(u("input",f),u("compositionstart",r),u("compositionend",o),u("DOMAutoComplete",f));break;default:u(e,f)}}),va.test(e.type)||("hidden"!==e.type&&(u("focus",function(){e.msFocus=!0}),u("blur",function(){e.msFocus=!1})),e.avalonSetter=f,ha(function(){if(Ue.contains(e))e.msFocus||f();else if(!e.msRetain)return!1}))}avalon.injectBinding(n),a.call(e,e.value)},da.TEXTAREA=da.INPUT,da.SELECT=function(e,t,n){function a(){if(r.data("duplexObserve")!==!1){var a=r.val();a=Array.isArray(a)?a.map(function(e){return n.pipe(e,n,"get")}):n.pipe(a,n,"get"),a+""!==e.oldValue&&t(a),n.changed.call(e,a,n)}}var r=avalon(e);n.handler=function(){var n=t();n=n&&n.$model||n,Array.isArray(n)?e.multiple||i("ms-duplex在<select multiple=true>上要求对应一个数组"):e.multiple&&i("ms-duplex在<select multiple=false>不能对应一个数组"),n=Array.isArray(n)?n.map(String):n+"",n+""!==e.oldValue&&(r.val(n),e.oldValue=n+"")},n.bound("change",a),e.msCallback=function(){avalon.injectBinding(n),n.changed.call(e,t(),n)}},rt.html=function(e,t,n){var a=1!==t.nodeType,r=a?t.parentNode:t;if(r&&(e=null==e?"":e,n.oldText!==e)){if(n.oldText=e,3===t.nodeType){var o=Ze("html");r.insertBefore(Ne.createComment(o),t),n.element=Ne.createComment(o+":end"),r.replaceChild(n.element,t),t=n.element}if("object"!=typeof e)var i=avalon.parseHTML(String(e));else if(11===e.nodeType)i=e;else if(1===e.nodeType||e.item){var l=1===e.nodeType?e.childNodes:e.item;for(i=Ge.cloneNode(!0);l[0];)i.appendChild(l[0])}if(l=avalon.slice(i.childNodes),a){for(var s=t.nodeValue.slice(0,-4);;){var c=t.previousSibling;if(!c||8===c.nodeType&&c.nodeValue===s)break;r.removeChild(c)}r.insertBefore(i,t)}else avalon.clearHTML(t).appendChild(i);se(l,n.vmodels)}},at["if"]=at.data=at.text=at.html=function(e,t){te(e.value,t,e)},rt["if"]=function(e,t,n){try{if(!t.parentNode)return}catch(a){return}if(e)8===t.nodeType&&(t.parentNode.replaceChild(n.template,t),t.ifRemove=null,t=n.element=n.template),t.getAttribute(n.name)&&(t.removeAttribute(n.name),ie(t,n.vmodels)),n.rollback=null;else if(1===t.nodeType){var r=n.element=Ne.createComment("ms-if");t.parentNode.replaceChild(r,t),t.ifRemove=r,n.template=t,Pe.appendChild(t),n.rollback=function(){t.parentNode===Pe&&Pe.removeChild(t)}}};var ma=/\(([^)]*)\)/;at.on=function(e,t){var n=e.value;e.type="on";var a=e.param.replace(/-\d+$/,"");if("function"==typeof at.on[a+"Hook"]&&at.on[a+"Hook"](e),n.indexOf("(")>0&&n.indexOf(")")>-1){var r=(n.match(ma)||["",""])[1].trim();""!==r&&"$event"!==r||(n=n.replace(ma,""))}te(n,t,e)},rt.on=function(e,t,n){e=function(e){var t=n.evaluator||l;return t.apply(this,n.args.concat(e))};var a=n.param.replace(/-\d+$/,"");if("scan"===a)e.call(t,{type:a});else if("function"==typeof n.specialBind)n.specialBind(t,e);else var r=avalon.bind(t,a,e);n.rollback=function(){"function"==typeof n.specialUnbind?n.specialUnbind():avalon.unbind(t,a,r)}},at.repeat=function(e,t){var n=e.type;te(e.value,t,e,1),e.proxies=[];var a=!1;try{var r=e.$repeat=e.evaluator.apply(0,e.args||[]),o=avalon.type(r);"object"!==o&&"array"!==o?(a=!0,avalon.log("warning:"+e.value+"只能是对象或数组")):e.xtype=o}catch(i){a=!0}var s=e.value.split(".")||[];if(s.length>1){s.pop();for(var c,u=s[0],d=0;c=t[d++];)if(c&&c.hasOwnProperty(u)){var p=c[u].$events||{};p[Le]=p[Le]||[],p[Le].push(e);break}}var f=e.handler;e.handler=l,avalon.injectBinding(e),e.handler=f;var h=e.element;if(1===h.nodeType){h.removeAttribute(e.name),e.sortedCallback=Hn(h,"data-with-sorted",t),e.renderedCallback=Hn(h,"data-"+n+"-rendered",t);var v=Ze(n),m=Ne.createComment(v),g=Ne.createComment(v+":end");if(e.signature=v,e.template=Ge.cloneNode(!1),"repeat"===n){var y=h.parentNode;y.replaceChild(g,h),y.insertBefore(m,g),e.template.appendChild(h)}else{for(;h.firstChild;)e.template.appendChild(h.firstChild);h.appendChild(m),h.appendChild(g)}e.element=g,e.handler=rt.repeat,e.rollback=function(){var t=e.element;t&&e.handler("clear")}}if(!a){e.$outer={};var b="$key",w="$val";for(Array.isArray(r)&&(b="$first",w="$last"),d=0;c=t[d++];)if(c.hasOwnProperty(b)&&c.hasOwnProperty(w)){e.$outer=c;break}var x=r.$events,T=(x||{})[Le];P(T,e),"object"===o?e.handler("append"):r.length&&e.handler("add",0,r.length)}},rt.repeat=function(e,t,n){var a=this;if(!e&&a.xtype){var r=a.$repeat,o=a.evaluator.apply(0,a.args||[]);if("array"===a.xtype){if(r.length===o.length){if(!(r!==o&&r.length>0))return;rt.repeat.call(this,"clear",t,n)}e="add",t=0,a.$repeat=o,n=o.length}else{if(E(r).join(";;")===E(o).join(";;"))return;e="append",a.$repeat=o}}if(e){var i,s,c=a.element,u=we(a),d=c.parentNode,p=a.proxies,f=Ge.cloneNode(!1);switch(e){case"add":for(var h=t+n,v=[],m=t;h>m;m++){var g=ke(m,a);p.splice(m,0,g),be(a,f,g,v)}for(d.insertBefore(f,u[t]||c),m=0;s=v[m++];)se(s.nodes,s.vmodels),s.nodes=s.vmodels=null;break;case"del":xe(u[t],u[t+n]||c);var y=p.splice(t,n);Ce(y,"each");break;case"clear":i=u[0],i&&(xe(i,c),"object"===a.xtype?d.insertBefore(i,c):Ce(p,"each"));break;case"move":if(i=u[0]){var b,w=i.nodeValue,x=[],T=[];for(xe(i,c,function(){T.unshift(this),this.nodeValue===w&&(x.unshift(T),T=[])}),S(x,t),S(p,t);T=x.shift();)for(;b=T.shift();)f.appendChild(b);d.insertBefore(f,c)}break;case"index":for(var _=p.length-1;n=p[t];t++)n.$index=t,n.$first=0===t,n.$last=t===_;return;case"set":g=p[t],g&&I(g.$events[a.param||"el"]);break;case"append":var C=a.$repeat,$=Array.isArray(p)||!p?{}:p;a.proxies=$;var M=[];v=[];for(var k in $)C.hasOwnProperty(k)||(Ae($[k],ga),delete $[k]);for(k in C)C.hasOwnProperty(k)&&"hasOwnProperty"!==k&&M.push(k);if(a.sortedCallback){var A=a.sortedCallback.call(d,M);A&&Array.isArray(A)&&A.length&&(M=A)}for(m=0;k=M[m++];)"hasOwnProperty"!==k&&($[k]=_e($[k],k,a),be(a,f,$[k],v));for(d.insertBefore(f,c),m=0;s=v[m++];)se(s.nodes,s.vmodels),s.nodes=s.vmodels=null}if(!a.$repeat||a.$repeat.hasOwnProperty("$lock"))return;"clear"===e&&(e="del");var D=a.renderedCallback||l,O=arguments;d.oldValue&&"SELECT"===d.tagName&&avalon(d).val(d.oldValue.split(",")),D.apply(d,O)}},"with,each".replace(Fe,function(e){at[e]=at.repeat});var ga=[],ya=[];rt.text=function(e,t){if(e=null==e?"":e,3===t.nodeType)try{t.data=e}catch(n){}else"textContent"in t?t.textContent=e:t.innerText=e},avalon.parseDisplay=Ee,at.visible=function(e,t){te(e.value,t,e)},rt.visible=function(e,t,n){e?(t.style.display=n.display||"","none"===avalon(t).css("display")&&(t.style.display=n.display=Ee(t.nodeName))):t.style.display="none"},at.widget=function(e,t){var a=e.value.match(Fe),r=e.element,o=a[0],s=a[1];s&&"$"!==s||(s=Ze(o));var c=a[2]||o,u=avalon.ui[o];if("function"==typeof u){t=r.vmodels||t;for(var d,p=0;d=t[p++];)if(d.hasOwnProperty(c)&&"object"==typeof d[c]){var f=d[c];f=f.$model||f;break}if(f){var h=f[o+"Id"];"string"==typeof h&&(i("warning!不再支持"+o+"Id"),s=h)}var v=avalon.getWidgetData(r,o);e.value=[o,s,c].join(","),e[o+"Id"]=s,e.evaluator=l,r.msData["ms-widget-id"]=s;var m=e[o+"Options"]=avalon.mix({},u.defaults,f||{},v);r.removeAttribute("ms-widget");var g=u(r,e,t)||{};if(g.$id){avalon.vmodels[s]=g,ae(r,g);try{g.$init(function(){avalon.scan(r,[g].concat(t)),"function"==typeof m.onInit&&m.onInit.call(r,g,m,t)})}catch(y){i(y)}e.rollback=function(){try{g.$remove(),g.widgetElement=null}catch(e){}r.msData={},delete avalon.vmodels[g.$id]},H(e,ba),n.chrome&&r.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(F)})}else avalon.scan(r,t)}else t.length&&(r.vmodels=t)};var ba=[],wa=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,xa=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Ta=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,_a={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},Ca=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$a=/([^\#-~| |!])/g,Ma=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e);
},$filter:function(e){for(var t=1,n=arguments.length;n>t;t++){var a=arguments[t],r=avalon.filters[a[0]];if("function"==typeof r){var o=[e].concat(a.slice(1));e=r.apply(null,o)}}return e},camelize:V,sanitize:function(e){return e.replace(wa,"").replace(Ta,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var a=_a[n[1]];a&&(e=e.replace(a,function(e,t,n){var a=n.charAt(0);return t+"="+a+"javascript:void(0)"+a}))}return e.replace(xa," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(Ca,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace($a,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,n){return(t||"￥")+De(e,isFinite(n)?n:2)},number:De};!new function(){function e(e){return parseInt(e,10)||0}function t(e,t,n){var a="";for(0>e&&(a="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),a+e}function n(e,n,a,r){return function(o){var i=o["get"+e]();return(a>0||i>-a)&&(i+=a),0===i&&-12===a&&(i=12),t(i,n,r)}}function a(e,t){return function(n,a){var r=n["get"+e](),o=(t?"SHORT"+e:e).toUpperCase();return a[o][r]}}function r(e){var n=-1*e.getTimezoneOffset(),a=n>=0?"+":"";return a+=t(Math[n>0?"floor":"ceil"](n/60),2)+t(Math.abs(n%60),2)}function o(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var i={yyyy:n("FullYear",4),yy:n("FullYear",2,0,!0),y:n("FullYear",1),MMMM:a("Month"),MMM:a("Month",!0),MM:n("Month",2,1),M:n("Month",1,1),dd:n("Date",2),d:n("Date",1),HH:n("Hours",2),H:n("Hours",1),hh:n("Hours",2,-12),h:n("Hours",1,-12),mm:n("Minutes",2),m:n("Minutes",1),ss:n("Seconds",2),s:n("Seconds",1),sss:n("Milliseconds",3),EEEE:a("Day"),EEE:a("Day",!0),a:o,Z:r},l=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,s=/^\/Date\((\d+)\)\/$/;Ma.date=function(t,n){var a,r,o=Ma.date.locate,c="",u=[];if(n=n||"mediumDate",n=o[n]||n,"string"==typeof t)if(/^\d+$/.test(t))t=e(t);else if(s.test(t))t=+RegExp.$1;else{var d=t.trim(),p=[0,0,0,0,0,0,0],f=new Date(0);d=d.replace(/^(\d+)\D(\d+)\D(\d+)/,function(t,n,a,r){var o=4===r.length?[r,n,a]:[n,a,r];return p[0]=e(o[0]),p[1]=e(o[1])-1,p[2]=e(o[2]),""});var h=f.setFullYear,v=f.setHours;d=d.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(t,n,a,r,o){return p[3]=e(n),p[4]=e(a),p[5]=e(r),o&&(p[6]=Math.round(1e3*parseFloat("0."+o))),""});var m=0,g=0;d=d.replace(/Z|([+-])(\d\d):?(\d\d)/,function(t,n,a,r){return h=f.setUTCFullYear,v=f.setUTCHours,n&&(m=e(n+a),g=e(n+r)),""}),p[3]-=m,p[4]-=g,h.apply(f,p.slice(0,3)),v.apply(f,p.slice(3)),t=f}if("number"==typeof t&&(t=new Date(t)),"date"===avalon.type(t)){for(;n;)r=l.exec(n),r?(u=u.concat(r.slice(1)),n=u.pop()):(u.push(n),n=null);return u.forEach(function(e){a=i[e],c+=a?a(t,o):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}};var c={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};c.SHORTMONTH=c.MONTH,Ma.date.locate=c},new function(){function e(e){for(a=1;e=n.shift();)e()}avalon.config({loader:!1});var t,n=[],a="complete"===Ne.readyState;avalon.bind(Ne,"DOMContentLoaded",t=function(){avalon.unbind(Ne,"DOMContentLoaded",t),e()});var r=setInterval(function(){"complete"===document.readyState&&document.body&&(clearInterval(r),e())},50);avalon.ready=function(e){a?e(avalon):n.push(e)},avalon.ready(function(){avalon.scan(Ne.body)})},a=[],r=function(){return avalon}.apply(t,a),!(void 0!==r&&(e.exports=r));var ka=n.avalon;return avalon.noConflict=function(e){return e&&n.avalon===avalon&&(n.avalon=ka),avalon},void 0===o&&(n.avalon=avalon),avalon})},function(e,t){},function(e,t){},function(e,t){},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(7)],__WEBPACK_AMD_DEFINE_RESULT__=function(avalon){function IE(){if(window.VBArray){var e=document.documentMode;return e?e:window.XMLHttpRequest?7:6}return 0}function parseJS(e){var t=eval;if(e=e.trim())if(1===e.indexOf("use strict")){var n=document.createElement("script");n.text=e,head.appendChild(n).parentNode.removeChild(n)}else t(e)}function parseXML(e,t,n){try{var a=document.documentMode;window.DOMParser&&(!a||a>8)?(n=new DOMParser,t=n.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(r){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||avalon.error("Invalid XML: "+e),t}function ajaxExtend(e){e=avalon.mix({},defaults,e),e.type=e.type.toUpperCase();var t="string"==typeof e.data?e.data:avalon.param(e.data);if(e.querystring=t||"",e.url=e.url.replace(rhash,"").replace(rprotocol,location.protocol+"//"),"boolean"!=typeof e.crossDomain){var n=document.createElement("a");try{n.href=e.url;var a="1"[0]?n.href:n.getAttribute("href",4);n.href=a,e.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=n.protocol+"//"+n.host}catch(r){e.crossDomain=!0}}return e.hasContent=!rnoContent.test(e.type),e.hasContent||(t&&(e.url+=(rquery.test(e.url)?"&":"?")+t),e.cache===!1&&(e.url+=(rquery.test(e.url)?"&":"?")+"_time="+(new Date-0))),e}function ok(e){return e}function ng(e){throw e}function paramInner(e,t,n){var a;if(Array.isArray(t))avalon.each(t,function(t,a){paramInner(e+"["+("object"==typeof a?t:"")+"]",a,n)});else if(avalon.isPlainObject(t))for(a in t)paramInner(e+"["+a+"]",t[a],n);else n(e,t)}function trimLine(e){return e.replace(rline,"\r\n")}var global=window||(0,eval)("this"),DOC=global.document,encode=encodeURIComponent,decode=decodeURIComponent,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rhash=/#.*$/,rquery=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,r20=/%20/g,originAnchor=document.createElement("a");originAnchor.href=location.href;var accepts={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",script:"text/javascript, application/javascript","*":["*/"]+["*"]},useOnload=0===IE()||IE()>8;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.lastIndexOf(e,t)===t});var head=DOC.getElementsByTagName("head")[0],isLocal=!1;try{isLocal=rlocalProtocol.test(location.protocol)}catch(e){}!new function(){var s=["XMLHttpRequest","ActiveXObject('MSXML2.XMLHTTP.6.0')","ActiveXObject('MSXML2.XMLHTTP.3.0')","ActiveXObject('MSXML2.XMLHTTP')","ActiveXObject('Microsoft.XMLHTTP')"];s[0]=IE()<8&&0!==IE()&&isLocal?"!":s[0];for(var i=0,axo;axo=s[i++];)try{if(eval("new "+axo)){avalon.xhr=new Function("return new "+axo);break}}catch(e){}};var supportCors="withCredentials"in avalon.xhr(),defaults={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,jsonp:"callback"},XHRMethods={setRequestHeader:function(e,t){return this.requestHeaders[e]=t,this},getAllResponseHeaders:function(){return 4===this.readyState?this.responseHeadersString:null},getResponseHeader:function(e,t){if(4===this.readyState){for(;t=rheaders.exec(this.responseHeadersString);)this.responseHeaders[t[1]]=t[2];t=this.responseHeaders[e]}return void 0===t?null:t},overrideMimeType:function(e){return this.mimeType=e,this},abort:function(e){return e=e||"abort",this.transport&&this.respond(0,e),this},dispatch:function(e,t){var n=t;if(this.transport){this.readyState=4;var a=e>=200&&300>e||304===e;if(a)if(204===e)n="nocontent";else if(304===e)n="notmodified";else if("undefined"==typeof this.response){var r=this.options.dataType||this.options.mimeType;(!r&&this.responseText||this.responseXML)&&(r=this.getResponseHeader("Content-Type")||"",r=r.match(/json|xml|script|html/)||["text"],r=r[0]);var o=this.responseText||"",i=this.responseXML||"";try{this.response=avalon.ajaxConverters[r].call(this,o,i)}catch(l){a=!1,this.error=l,n="parsererror"}}this.status=e,this.statusText=n+"",this.timeoutID&&(clearTimeout(this.timeoutID),delete this.timeoutID),this._transport=this.transport,a?this._resolve([this.response,n,this]):this._reject([this,n,this.error]),delete this.transport}}};avalon.ajax=function(e,t){e&&e.url||avalon.error("参数必须为Object并且拥有url属性"),e=ajaxExtend(e);var n,a,r={responseHeadersString:"",responseHeaders:{},requestHeaders:{},querystring:e.querystring,readyState:0,uniqueID:(""+Math.random()).replace(/0\./,""),status:0},t=new avalon.Promise(function(e,t){a=e,n=t});t.options=e,t._reject=n,t._resolve=a;var o=[],i=[];Array("done","fail","always").forEach(function(e){t[e]=function(t){return"function"==typeof t&&("fail"!==e&&o.push(t),"done"!==e&&i.push(t)),this}});var l=e.async===!1;l&&(avalon.log("warnning:与jquery1.8一样,async:false这配置已经被废弃"),t.async=!1),avalon.mix(t,r,XHRMethods),t.then(function(e){e=Array.isArray(e)?e:void 0===e?[]:[e];for(var n,a=0;n=o[a++];)n.apply(t,e);return e},function(e){e=Array.isArray(e)?e:void 0===e?[]:[e];for(var n,a=0;n=i[a++];)n.apply(t,e);return e}),t.done(e.success).fail(e.error).always(e.complete);var s=e.dataType,c=avalon.ajaxTransports;(e.crossDomain&&!supportCors||rjsonp.test(e.url))&&"json"===s&&"GET"===e.type&&(s=e.dataType="jsonp");var u=e.form?"upload":s,d=c[u]||c.xhr;avalon.mix(t,d),t.preproccess&&(s=t.preproccess()||s),e.contentType&&t.setRequestHeader("Content-Type",e.contentType),t.setRequestHeader("Accept",accepts[s]?accepts[s]+", */*; q=0.01":accepts["*"]);for(var p in e.headers)t.setRequestHeader(p,e.headers[p]);return e.async&&e.timeout>0&&(t.timeoutID=setTimeout(function(){t.abort("timeout"),t.dispatch(0,"timeout")},e.timeout)),t.request(),t},"get,post".replace(avalon.rword,function(e){avalon[e]=function(t,n,a,r){return"function"==typeof n&&(r=r||a,a=n,n=void 0),avalon.ajax({type:e,url:t,data:n,success:a,dataType:r})}}),avalon.getScript=function(e,t){return avalon.get(e,null,t,"script")},avalon.getJSON=function(e,t,n){return avalon.get(e,t,n,"json")},avalon.upload=function(e,t,n,a,r){return"function"==typeof n&&(r=a,a=n,n=void 0),avalon.ajax({url:e,type:"post",dataType:r,form:t,data:n,success:a})},avalon.ajaxConverters={text:function(e){return e},xml:function(e,t){return void 0!==t?t:parseXML(e)},html:function(e){return avalon.parseHTML(e)},json:function(e){return avalon.parseJSON||avalon.log("avalon.parseJSON不存在,请升级到最新版"),avalon.parseJSON(e)},script:function(e){return parseJS(e),e},jsonp:function(){var e,t;return this.jsonpCallback.startsWith("avalon.")?(t=this.jsonpCallback.replace(/avalon\./,""),e=avalon[t],delete avalon[t]):e=window[this.jsonpCallback],e}},avalon.param=function(e){var t,n=[],a=function(e,t){t=null==t?"":t,n[n.length]=encode(e)+"="+encode(t)};if(Array.isArray(e)||!avalon.isPlainObject(e))avalon.each(e,function(e,t){a(e,t)});else for(t in e)paramInner(t,e[t],a);return n.join("&").replace(r20,"+")},avalon.unparam=function(e){var t,n,a=/\[(.*?)\]/g,r=/(.+?)\[/,o={};return"string"!=(n=avalon.type(e))||"string"==n&&!n.length?{}:(-1!==e.indexOf("?")&&(e=e.split("?").pop()),t=decode(e).split("&"),!(n=t.length)||1==n&&""===n?o:(t.forEach(function(e){if(e.length){n=e.split("=");var t,i,l=n.shift(),s=n.join("=").replace(/\+/g," "),c=[];if(l.length){for(;n=a.exec(l);)c.push(n[1]);if(!(t=c.length))return void(o[l]=s);t--,n=r.exec(l),n&&(l=n[1])&&l.length&&("object"!==avalon.type(o[l])&&(o[l]={}),i=o[l],avalon.each(c,function(e,a){(n=a).length||(n=0,avalon.each(i,function(e){!isNaN(e)&&e>=0&&e%1===0&&e>=n&&(n=Number(e)+1)})),e==t?i[n]=s:i="object"!==avalon.type(i[n])?i[n]={}:i[n]}))}}}),o))};var rinput=/select|input|button|textarea/i,rcheckbox=/radio|checkbox/,rline=/\r?\n/g;avalon.serialize=function(e){var t={};return Array.prototype.filter.call(e.getElementsByTagName("*"),function(e){return rinput.test(e.nodeName)&&e.name&&!e.disabled?rcheckbox.test(e.type)?e.checked:!0:void 0}).forEach(function(e){var n=avalon(e).val();n=Array.isArray(n)?n.map(trimLine):trimLine(n);var a=e.name;a in t?Array.isArray(n)?t[a].push(n):t[a]=[t[a],n]:t[a]=n}),avalon.param(t,!1)};var transports=avalon.ajaxTransports={xhr:{request:function(){var e=this,t=this.options,n=this.transport=new avalon.xhr;n.open(t.type,t.url,t.async,t.username,t.password),this.mimeType&&n.overrideMimeType&&n.overrideMimeType(this.mimeType),t.crossDomain&&"withCredentials"in n&&(n.withCredentials=!0),t.crossDomain||(this.requestHeaders["X-Requested-With"]="XMLHttpRequest");for(var a in this.requestHeaders)n.setRequestHeader(a,this.requestHeaders[a]+"");if(t.progressCallback){var r=document.all&&!window.atob;r||(n.upload.onprogress=t.progressCallback)}var o=t.dataType;"responseType"in n&&/^(blob|arraybuffer|text)$/.test(o)&&(n.responseType=o,this.useResponseType=!0),n.send(t.hasContent&&(this.formdata||this.querystring)||null),t.async&&4!==n.readyState?useOnload?n.onload=n.onerror=function(t){this.readyState=4,this.status="load"===t.type?200:500,e.respond()}:n.onreadystatechange=function(){e.respond()}:this.respond()},respond:function(e,t){var n=this.transport;if(n){t&&this.timeoutID&&(clearTimeout(this.timeoutID),delete this.timeoutID);try{var a=4===n.readyState;if(t||a)if(n.onreadystatechange=avalon.noop,useOnload&&(n.onerror=n.onload=null),t)a||"function"!=typeof n.abort||n.abort();else{var r=n.status,o=n.responseText;this.responseText="string"==typeof o?o:void 0;try{var i=n.responseXML;this.responseXML=i.documentElement}catch(l){}this.useResponseType&&(this.response=n.response),this.responseHeadersString=n.getAllResponseHeaders();try{var s=n.statusText}catch(l){this.error=l,s="firefoxAccessError"}r||!isLocal||this.options.crossDomain?1223===r&&(r=204):r=this.responseText?200:404,this.dispatch(r,s)}}catch(c){t||this.dispatch(500,c)}}}},jsonp:{preproccess:function(){var e=this.options,t=this.jsonpCallback=e.jsonpCallback||"avalon.jsonp"+setTimeout("1");return rjsonp.test(e.url)?e.url=e.url.replace(rjsonp,"$1"+t):e.url=e.url+(rquery.test(e.url)?"&":"?")+e.jsonp+"="+t,t.startsWith("avalon.")?(t=t.replace(/avalon\./,""),avalon[t]=function(e){avalon[t]=e}):window[t]=function(e){window[t]=e},"script"}},script:{request:function(){var e=this.options,t=this.transport=DOC.createElement("script");e.charset&&(t.charset=e.charset);var n=this;t.onerror=t[useOnload?"onload":"onreadystatechange"]=function(){n.respond()},t.src=e.url,head.insertBefore(t,head.firstChild)},respond:function(e,t){var n=this.transport;if(n){t&&this.timeoutID&&(clearTimeout(this.timeoutID),delete this.timeoutID);var a=/loaded|complete|undefined/i.test(n.readyState);if(t||a){n.onerror=n.onload=n.onreadystatechange=null;var r=n.parentNode;if(r&&r.removeChild(n),!t){var o;if(this.jsonpCallback){var i=this.jsonpCallback.startsWith("avalon.")?avalon[this.jsonpCallback.replace(/avalon\./,"")]:window[this.jsonpCallback];o="function"==typeof i?[500,"error"]:[200,"success"]}else o=[200,"success"];this.dispatch.apply(this,o)}}}}},upload:{preproccess:function(){var e,t=this.options;"function"==typeof t.form.append?(e=t.form,t.contentType=""):e=new FormData(t.form),avalon.each(t.data,function(t,n){e.append(t,n)}),this.formdata=e}}};if(avalon.mix(transports.jsonp,transports.script),avalon.mix(transports.upload,transports.xhr),!window.FormData){var str='Function BinaryToArray(binary)\r\n	                 Dim oDic\r\n	                 Set oDic = CreateObject("scripting.dictionary")\r\n	                 length = LenB(binary) - 1\r\n	                 For i = 1 To length\r\n	                     oDic.add i, AscB(MidB(binary, i, 1))\r\n	                 Next\r\n	                 BinaryToArray = oDic.Items\r\n	              End Function';execScript(str,"VBScript"),avalon.fixAjax=function(){function e(e){var t=avalon.parseHTML("<iframe  id='"+e+"' name='"+e+"' style='position:absolute;left:-9999px;top:-9999px;'/>").firstChild;return(DOC.body||DOC.documentElement).insertBefore(t,null)}function t(e,t){var n,a,r,o,i,l=[];for(n in t)for(a=Array.isArray(t[n]),r=a?t[n]:[t[n]],o=0;o<r.length;o++)i=DOC.createElement("input"),i.type="hidden",i.name=n,i.value=r[o],e.appendChild(i),l.push(i);return l}avalon.ajaxConverters.arraybuffer=function(){var e=this.tranport&&this.tranport.responseBody;return e?new VBArray(BinaryToArray(e)).toArray():void 0},avalon.ajaxTransports.upload={request:function(){var n=this,a=this.options,r="iframe-upload-"+this.uniqueID,o=a.form,i=this.transport=e(r),l={target:o.target||"",action:o.action||"",enctype:o.enctype,method:o.method},s=a.data?t(o,a.data):[];o.target=r,o.action=a.url,o.method="POST",o.enctype="multipart/form-data",this.uploadcallback=avalon.bind(i,"load",function(e){n.respond(e)}),o.submit();for(var c in l)o[c]=l[c];s.forEach(function(e){o.removeChild(e)})},respond:function(e){var t,n=this.transport;if(n){if(e&&"load"===e.type){var a=n.contentWindow.document;this.responseXML=a,a.body&&(this.responseText=a.body.innerHTML,(t=a.body.firstChild)&&"PRE"===t.nodeName.toUpperCase()&&t.firstChild&&(this.responseText=t.firstChild.nodeValue)),this.dispatch(200,"success")}this.uploadcallback=avalon.unbind(n,"load",this.uploadcallback),delete this.uploadcallback,setTimeout(function(){n.parentNode.removeChild(n)})}}},delete avalon.fixAjax},avalon.fixAjax()}return avalon}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,t,n){var a,r;a=[n(2)],r=function(e){function t(e){return e}function n(e){throw e}function a(e){return this.then(e,n)}function r(e){return this.then(t,e)}function o(){var e={};return e.promise=new this(function(t,n){e.resolve=t,e.reject=n}),e}function i(e,t){if("boolean"==typeof e.async)var n=e.async;else n=e.async=!0;n?window.setTimeout(t,0):t()}function l(e,t){if("pending"===e._state)if(t&&"function"==typeof t.then){var n=t instanceof d?"_then":"then";t[n](function(t){c(e,t,!0)},function(t){c(e,t,!1)})}else c(e,t,!0)}function s(e,t){"pending"===e._state&&c(e,t,!1)}function c(e,t,n){e._fired=!0,e._value=t,e._state=n?"fulfilled":"rejected",i(e,function(){e._callbacks.forEach(function(t){e._fire(t.onSuccess,t.onFail)})})}function u(e,t){t=Array.isArray(t)?t:[];var n,a=0,r=[];return new d(function(o,i){function l(l,s){l.then(function(i){n||(r[s]=i,a++,(e||a>=t.length)&&(o(e?i:r),n=!0))},function(e){n=!0,i(e)})}t.length||o(r);for(var s=0,c=t.length;c>s;s++)l(t[s],s)})}var d=function(e){this._callbacks=[];var t=this;if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");e(function(e){l(t,e)},function(e){s(t,e)})};d.resolve=function(e){return new d(function(t){t(e)})},d.reject=function(e){return new d(function(t,n){n(e)})},d.prototype={constructor:d,_state:"pending",_fired:!1,_fire:function(e,t){if("rejected"===this._state){if("function"!=typeof t)throw this._value;t(this._value)}else"function"==typeof e&&e(this._value)},_then:function(e,t){if(this._fired){var n=this;i(n,function(){n._fire(e,t)})}else this._callbacks.push({onSuccess:e,onFail:t})},then:function(e,a){e="function"==typeof e?e:t,a="function"==typeof a?a:n;var r=this,o=new d(function(t,n){r._then(function(a){try{a=e(a)}catch(r){return void n(r)}t(a)},function(e){try{e=a(e)}catch(r){return void n(r)}t(e)})});for(var i in r)p[i]||(o[i]=r[i]);return o},done:a,"catch":r,fail:r};var p={_state:1,_fired:1,_value:1,_callbacks:1};d.all=function(e){return u(!1,e)},d.race=function(e){return u(!0,e)},d.defer=o,e.Promise=d;var f=window.Promise;return/native code/.test(f)&&(f.prototype.done=a,f.prototype.fail=r,f.defer||(f.defer=o)),window.Promise=f||d}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(7),n(9)],r=function(){function e(){for(var e=$.oldNodes;e.length;){var t=e.length-1,n=e[t];n.parentNode&&n.parentNode.removeChild(n),e.splice(t,1),n=null}}function t(e,t,n){n in t&&(e[n]=t[n],delete t[n])}function n(){return document.getElementsByTagName("avalon")[0]}function a(e){var t,n=document.createDocumentFragment(),a=document.getElementById(e),r=a.eles,o=0;if(a)for(;t=r[o];)n.appendChild(t),o++;return n}function r(e,t){var n,a=document.createDocumentFragment(),r=document.getElementById(e);if(r||(r=document.createElement("div"),r.id=e,k.appendChild(r)),r.eles)avalon.each(r.eles,function(e,t){a.appendChild(t)});else{for(r.eles=[];n=t.firstChild;)a.appendChild(n),r.eles.push(n);M[e]=!0}r.appendChild(a)}function o(e,t,n,a){var o=$.lastLocal;if(o&&(t[0]||e[0])){var i=$._local,l=[];for(var s in o){var c=o[s];if(!(s in i)||i[s]!=c){if(c.$ctrl&&"$onBeforeUnload"in c.$ctrl&&c.$ctrl.$onBeforeUnload(n,a)===!1)return!1;c.element&&e[0]!=t[0]&&l.push(c)}}avalon.each(l,function(e,t){var n=t.element,a=avalon(n).data("currentCache");a&&r(a,n)}),l=null}}function i(e,t,n,a){if(n.hasClass("oni-mmRouter-slide")){var r=t.cloneNode(!0);r.setAttribute("ms-skip","true"),avalon(r).removeClass("oni-mmRouter-enter").addClass("oni-mmRouter-leave"),avalon(t).addClass("oni-mmRouter-enter"),t.parentNode.insertBefore(r,t),$.oldNodes.push(r),d("onViewEnter",a,t,r)}return t}function l(e,t){return avalon.mix(new(avalon.mix(function(){},{prototype:e})),t)}function s(e){return e instanceof Error}function c(e){if(s(e))throw e;d("onError",$,e,e&&e.state)}function u(e){var t=avalon.isFunction(e)?new Promise(e):Promise.all(e);return t}function d(e,t){return C.$fire.apply(C,arguments),avalon.state[e]?avalon.state[e].apply(t||$.currentState,[].slice.call(arguments,2)):0}function p(e,t){if(!(this instanceof p)){var n=_[e]=new p(e,t||{});return n}this.stateName=e,this.formate(t)}function f(){return this instanceof f?void(this.$vmodels=[]):new f}function h(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var n in t)if(!(n in e)||e[n]!==t[n])return!1;return!0}function v(e){return _[e]}function m(e,t){var n,t=t||"ms-view";return n=e.querySelectorAll?e.querySelectorAll("["+t+"]"):Array.prototype.filter.call(e.getElementsByTagName("*"),function(e){return"string"==typeof e.getAttribute(t)})}function g(e,t,n){var a=u(function(a,r){var o="function"==typeof e?e(t):e;"string"==typeof o?a(o):(n.message="template必须对应一个字符串或一个返回字符串的函数",r(n))});return a}function y(e,t,n){var a=u(function(a,r){return"function"==typeof e&&(e=e(t)),"string"!=typeof e?(n.message="templateUrl必须对应一个URL",r(n)):avalon.templateCache[e]?a(avalon.templateCache[e]):void avalon.state.templateLoader(e,a,r,n)});return a}function b(e,t,n){var a=u(function(a,r){if("function"==typeof e){var o=e(t);o&&o.then||"string"==typeof o?a(o):(n.message="templateProvider为函数时应该返回一个Promise或thenable对象或字符串",r(n))}else e&&e.then?a(e):(n.message="templateProvider不为函数时应该对应一个Promise或thenable对象",r(n))});return a}function w(e,t,n){return e.template?g(e.template,t,n):e.templateUrl?y(e.templateUrl,t,n):e.templateProvider?b(e.templateProvider,t,n):u(function(e,t){n.message="必须存在template, templateUrl, templateProvider中的一个",t(n)})}avalon.router.route=function(e,t,n,a){t=t.trim();for(var r,o=this.routingTable[e],i=0;r=o[i++];){var l=t.match(r.regexp);if(l&&r["abstract"]!==!0){var s={params:{}};return avalon.mix(s.params,r.params),s.keys=r.keys,s.params.query=n||{},l.shift(),r.keys.length&&this._parseArgs(l,s),void(r.stateName?$.transitionTo($.currentState,r,s.params,a):r.callback.apply(r,l))}}this.errorback&&this.errorback()};var x,T,_={};avalon.router.go=function(e,t,n){var a=$.currentState,r=p.is(e)?e:v(e),t=t||{},t=avalon.mix(!0,{},r.params,t);r&&$.transitionTo(a,r,t,n)};var C=window.$eventManager=avalon.define({$id:"$eventManager",$flag:0,uiqKey:function(){return"flag"+ ++C.$flag}});C.$watch("onAbort",e);var $=window.mmState={prevState:NaN,currentState:NaN,activeState:NaN,oldNodes:[],query:{},popOne:function(e,t,n,a){if($._toParams!==t)return n(!1,{type:"abort"});var r=e.pop(),o=this;if(!r)return n();if(a&&r.onBeforeExit()===!1)return n(!1);o.activeState=r.parentState||x,r.done=function(i){return r._pending=!1,r.done=null,r._local=null,i!==!1&&o.activeState?o.popOne(e,t,n,a):n(i)};var i=r.onExit();!r._pending&&r.done&&r.done(i)},pushOne:function(e,t,n,a,r){if($._toParams!==t)return n(!1,{type:"abort"});var o=e.shift(),i=this;if(!o)return e=null,n();if(o.syncParams(t),o.onBeforeEnter()===!1)return o.syncParams(o.oldParams),n(!1);var a=l(a);i.activeState=o,o.done=function(r){if(o.done){if(o._pending=!1,o.done=null,o.visited=!0,r===!1)return n(r);var l=o.callback.apply(o,[t,a]);l.$then(function(r){avalon.mix(!0,o.oldParams,o.params),i.pushOne(e,t,n,a)})}};var s=[];avalon.each(o.keys,function(e,t){var n=t.name;s.push(o.params[n])}),o._onEnter.apply(o,s),!o._pending&&o.done&&o.done()},transitionTo:function(e,t,n,a){var r,n=n||t.params;this.activeState&&this.activeState!=this.currentState&&(avalon.log("navigating to ["+this.currentState.stateName+"] will be stopped, redirect to ["+t.stateName+"] now"),this.activeState.done&&this.activeState.done(!1),e=this.activeState,r=!0),$.oldNodes=[];var i,s,c=avalon.router.urlFormate(t.url,n,n.query),u=this,a=a||{},p=a.reload,f=e&&e.chain||[],h=t.chain,v=0,m=h[v],g=x.sourceLocal,y=[];if(!p)for(;m&&m===f[v]&&!m.paramsChanged(n);)g=y[v]=m._local,v++,m=h[v];for(var b=f.slice(v),w=h.slice(v),T=g;m=h[v];)g=y[v]=l(g,m.sourceLocal),v++;return $._local=g,done=function(a,r){return i?void 0:(i=!0,u.currentState=u.activeState,w=b=T=g=n=null,$.oldNodes=[],a===!1?d("onError",u,{type:"transition",message:"transitionTo "+t.stateName+" faild",error:r,fromState:e,toState:t,params:n},u.currentState):($.lastLocal=$.currentState._local,x.fire("updateview",u.currentState,s),avalon.log("transitionTo "+t.stateName+" success"),d("onLoad",u,e,t),void 0))},t.path=("/"+c.path).replace(/^[\/]{2,}/g,"/"),p||e!==t||(s=t.paramsChanged(n))?($.query=avalon.mix({},n.query),!a||a.confirmed||d("onBeforeUnload",this,e,t)!==!1&&o(b,w,e,t)!==!1?void(i!==!0&&(avalon.log("begin transitionTo "+t.stateName+" from "+(e&&e.stateName||"unknown")),d("onUnload",this,e,t),this.currentState=t,this.prevState=e,$._toParams=n,c&&avalon.history&&avalon.history.updateLocation(c.path+c.query,avalon.mix({},a,{silent:!0}),!e&&location.hash),d("onBegin",this,e,t),this.popOne(b,n,function(e){return e===!1?done(e):void u.pushOne(w,n,done,T,y)},!(a&&a.confirmed)))):d("onAbort",this,e,t)):t==this.activeState&&r?done():void 0}},M={},k=n();avalon.bindingHandlers.view=function(e){function t(d,g,y){if(!document.contains(s))return e=n=r=c=s=o=f=t=null,!1;var b,w=o.data("statename")||"",T=v(w)||x;if(l.indexOf("@")<0&&(l+="@"+T.stateName),b=$.currentState._local&&$.currentState._local[l],(!d||b)&&p!==b){p=b,_currentState=b&&b.state;var _=o.data("viewCache"),C=o.data("currentCache");if(b?_=(b.viewCache===!1?!1:b.viewCache||_)&&l+"@"+_currentState.stateName:_&&(_=l+"@__default__"),!(b&&_currentState===g&&b.ignoreChange&&b.ignoreChange(y,l)||_&&_===C)){i(h,r,o,_currentState);var k,A=b?b.template:u;if(_&&(b?b.element=r:$.currentState._local[l]={state:$.currentState,template:u,element:r}),avalon.clearHTML(r),r.removeAttribute("ms-view"),r.setAttribute("ui-view",e.value||e.expr||""),_){if(k=M[_]?a(_):avalon.parseHTML(A),r.appendChild(k),o.data("currentCache",_),M[_])return void(b.$ctrl.$onCacheRendered&&b.$ctrl.$onCacheRendered.apply(r,[b]))}else r.innerHTML=A,o.data("currentCache",!1);!b&&_&&o.data("currentCache",_),avalon.each(m(r),function(e,t){avalon(t).data("statename",_currentState&&_currentState.stateName||"")}),avalon.scan(r,(b&&b.vmodels||[]).concat(n||[])),b&&b.$ctrl&&b.$ctrl.$onRendered&&b.$ctrl.$onRendered.apply(r,[b])}}}var n=e.vmodels||arguments[1],r=($.currentState,e.element),o=avalon(r),l=e.value||e.expr||"",s=document.createComment("ms-view:"+l),c=r.parentNode,u=r.innerHTML,d=o.data("statename")||"",p=(v(d)||x,{}),f=r,h=r.outerHTML;r.removeAttribute("ms-view"),c.insertBefore(s,r),t("firsttime"),x.watch("updateview",function(e,n){return t.call(this,T,e,n)})},avalon.directives&&avalon.directive("view",{init:avalon.bindingHandlers.view}),avalon.state=function(e,t){var n=p(e,t);return avalon.router.get(n.url,function(e,t){var a,r,o=this,i=[],l=[],s=[];return n.resolved=u(function(e,t){a=e,r=t}),avalon.each(n.views,function(e,a){var r=o.params,c={type:"view",name:e,params:r,state:n,view:a},d=t[e]={name:e,state:n,params:n.filterParams(r),ignoreChange:"ignoreChange"in a?a.ignoreChange:o.ignoreChange,viewCache:"viewCache"in a?a.viewCache:o.viewCache},p=w(a,r,c);i.push(p),p.then(function(e){d.template=e},avalon.noop);var f,h=function(e){d.vmodels=e.$vmodels,a.$controller=d.$ctrl=e,v()},v=function(){var e=a.$controller&&a.$controller.$onEnter;if(e){var t=u(function(t,a){var o={type:"data",state:n,params:r},i=e(r,t,function(e){o.message=e,a(o)});i&&i.then?(l.push(i),i.then(function(){t(i)})):i&&i!==!0?(o.message=i,a(o)):i===T&&t()});t=t.then(function(e){avalon.isFunction(e)&&s.push(e)}),l.push(t)}};if(a.$controller&&a.cacheController!==!1)return h(a.$controller);if(a.controller)f=p.then(function(){h(avalon.controller(a.controller))});else if(a.controllerUrl)f=u(function(e,t){var n=avalon.isFunction(a.controllerUrl)?a.controllerUrl(r):a.controllerUrl;n=n instanceof Array?n:[n],avalon.controller.loader(n,function(t){p.then(function(){h(t),e()})})});else if(a.controllerProvider){var m=avalon.isFunction(a.controllerProvider)?a.controllerProvider(r):a.controllerProvider;f=u(function(e,t){m&&m.then?(l.push(m),m.then(function(t){p.then(function(){h(t),e()})},function(e){c.message=e,t(c)})):p.then(function(){h(m),e()})})}f&&f.then&&i.push(f)}),u(i).$then(function(e){n._local=t,u(l).$then(function(){avalon.each(s,function(e,t){t()}),i=l=s=null,a()})}),n.resolved},n),this},Promise.prototype.$then=function(e,t){var n=this.then(e,t);return n["catch"](c),n},avalon.state.onViewEntered=function(e,t){e!=t&&t.parentNode.removeChild(t)},avalon.state.config=function(e){return avalon.mix(avalon.state,e||{}),avalon},p.is=function(e){return e instanceof p},p.prototype={formate:function(e){avalon.mix(!0,this,e);var n=this.stateName,a=this,r=n.split("."),o=r.length-1,i=a.sourceLocal={};this.chain=[],avalon.each(r,function(e,t){if(e==o)a.chain.push(a);else{var n=r.slice(0,e+1).join("."),i=v(n);if(!i)throw new Error("必须先定义"+n);a.chain.push(i)}}),void 0===this.url&&(this["abstract"]=!0);var s=this.chain[o-1]||x;if(s&&(this.url=s.url+(this.url||""),this.parentState=s),!this.views&&""!=n){var c={};"template,templateUrl,templateProvider,controller,controllerUrl,controllerProvider,viewCache".replace(/\w+/g,function(e){t(c,a,e)});var u="viewname"in this?this.viewname:"";this.views={},this.views[u]=c}var d={},p=this.views instanceof Array;avalon.each(this.views,function(e,t){var n=p?t.name||"":e;n.indexOf("@")<0&&(n+="@"+(s?s.stateName||"":"")),d[n]=t,i[n]={}}),this.views=d,this._self=e,this._pending=!1,this.visited=!1,this.params=l(s&&s.params||{}),this.oldParams={},this.keys=[],this.events={}},watch:function(e,t){var n=this.events[e]||[];return this.events[e]=n,n.push(t),t},fire:function(e,t){for(var n=this.events[e]||[],a=0;n[a];){var r=n[a].apply(this,[].slice.call(arguments,1));r===!1?n.splice(a,1):a++}},unwatch:function(e,t){var n=this.events[e];if(n)for(var a=0;n[a];){if(n[a]==t)return n.splice(a,1);a++}},paramsChanged:function(e){var t=!1,n=this.keys,a=this.params;return avalon.each(n,function(n,r){var o=r.name;a[o]!=e[o]&&(t="param")}),t||$.currentState!==this||(t=!h(e.query,$.query)&&"query"),t},filterParams:function(e){var t=avalon.mix(!0,{},this.params),n=this.keys;return avalon.each(n,function(n,a){t[a.name]=e[a.name]}),t},syncParams:function(e){var t=this;avalon.each(this.keys,function(n,a){var r=a.name;r in e&&(t.params[r]=e[r])})},_onEnter:function(){this.query=this.getQuery();var e=this,t=Array.prototype.slice.call(arguments),n=e._async();u(function(a,r){var o={type:"data",state:e,params:e.params},i=function(t){o.message=t,n.apply(e,[!1]),r(o)},l=function(){n.apply(e),a()},s=e.onEnter.apply(e,t.concat([l,i]));s&&s.then?s.then(l)["catch"](c):s&&s!==!0?i(s):s===T&&l()})},getQuery:function(){
return $.query},getParams:function(){return this.params},_async:function(){return this.done&&(this._pending=!0),this.done||avalon.noop},onBeforeEnter:avalon.noop,onEnter:avalon.noop,onBeforeExit:avalon.noop,onExit:avalon.noop},x=p("",{url:"",views:null,"abstract":!0}),avalon.controller=function(){var e=arguments[0],t=arguments[1];if(e&&e instanceof f)return e;var n=f();if(avalon.isFunction(e))e(n);else if(avalon.isFunction(t))n.name=e,t(n);else{if("string"!=typeof e&&"object"!=typeof e)throw new Error("参数错误"+arguments);e=e instanceof Array?e:Array.prototype.slice.call(arguments),avalon.each(e,function(t,a){"string"==typeof a&&(e[t]=avalon.vmodels[a]),a=e[t],"$onRendered"in a&&(n.$onRendered=a.$onRendered),"$onEnter"in a&&(n.$onEnter=a.$onEnter)}),n.$vmodels=e}return n},avalon.controller.loader=function(e,t){avalon.require(e,function(e){t&&t(e)})},f.prototype={};var A=function(){return new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};avalon.state.templateLoader=function(e,t,n,a){var r=A();r.onreadystatechange=function(){if(4===r.readyState){var o=r.status;o>399&&600>o?(a.message="templateUrl对应资源不存在或没有开启 CORS",a.status=o,a.xhr=r,n(a)):t(avalon.templateCache[e]=r.responseText)}},r.open("GET",e,!0),"withCredentials"in r&&(r.withCredentials=!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send()}}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(10)],r=function(){function e(){var e={};"get,post,delete,put".replace(avalon.rword,function(t){e[t]=[]}),this.routingTable=e}function t(e){var t=e.split("?"),n={},a=t[0],r=t[1];if(r)for(var o,i=r.split("&"),l=i.length,s=0;l>s;s++)i[s]&&(o=i[s].split("="),n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]));return{path:a,query:n}}function n(e){if("string"==typeof e)return e;var t=[];for(var n in e)"query"!=n&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function a(e,t,n){var a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;var r=n?"?":"";return a+r+"("+t+")"+r}function r(){try{return localStorage.setItem("avalon",1),localStorage.removeItem("avalon"),!0}catch(e){return!1}}function o(e){return String(e).replace(/[,;"\\=\s%]/g,function(e){return encodeURIComponent(e)})}function i(e,t){var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=o(e)+"="+o(t)+";expires="+n.toGMTString()}function l(e){var t=String(document.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))||["",""];return decodeURIComponent(t[1])}var s=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;if(e.prototype={error:function(e){this.errorback=e},_pathToRegExp:function(e,t){for(var n,r,o,i,l=t.keys=[],c="^",u=0;n=s.exec(e);){r=n[2]||n[3],o=n[4]||("*"==n[1]?".*":"string"),i=e.substring(u,n.index);var d=this.$types[o],p={name:r};d&&(o=d.pattern,p.decode=d.decode),l.push(p),c+=a(i,o,!1),u=s.lastIndex}i=e.substring(u),c+=a(i)+(t.strict?t.last:"/?")+"$";var f="boolean"==typeof t.caseInsensitive?t.caseInsensitive:!0;return t.regexp=new RegExp(c,f?"i":void 0),t},add:function(e,t,n,a){var r=this.routingTable[e.toLowerCase()];if("/"!==t.charAt(0))throw"path必须以/开头";a=a||{},a.callback=n,t.length>2&&"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1),a.last="/"),avalon.Array.ensure(r,this._pathToRegExp(t,a))},route:function(e,t,n){t=t.trim();for(var a,r=this.routingTable[e],o=0;a=r[o++];){var i=t.match(a.regexp);if(i){a.query=n||{},a.path=t,a.params={};var l=a.keys;return i.shift(),l.length&&this._parseArgs(i,a),a.callback.apply(a,i)}}this.errorback&&this.errorback()},_parseArgs:function(e,t){for(var n=t.keys,a=0,r=n.length;r>a;a++){var o=n[a],i=e[a]||"";if("function"==typeof o.decode)var l=o.decode(i);else try{l=JSON.parse(i)}catch(s){l=i}e[a]=t.params[o.name]=l}},getLastPath:function(){return l("msLastPath")},setLastPath:function(e){i("msLastPath",e)},redirect:function(e){this.navigate(e,{replace:!0})},navigate:function(e,n){var a=t(("/"!==e.charAt(0)?"/":"")+e),n=n||{};"/"===e.charAt(0)&&(e=e.slice(1)),avalon.state&&!n.silent||avalon.history&&avalon.history.updateLocation(e,avalon.mix({},n,{silent:!0})),n.silent||this.route("get",a.path,a.query,n)},when:function(e,t){var n=this,e=e instanceof Array?e:[e];return avalon.each(e,function(e,a){n.add("get",a,function(){var e=n.urlFormate(t,this.params,this.query);n.navigate(e.path+e.query,{replace:!0})})}),this},get:function(e,t){},urlFormate:function(e,t,a){var a=a?n(a):"",r=e.replace(s,function(e){var n=e.replace(/[\{\}]/g,"").split(":");return n=n[0]?n[0]:n[1],void 0!==t[n]?t[n]:""}).replace(/^\//g,"");return{path:r,query:a}},$types:{date:{pattern:"[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])",decode:function(e){return new Date(e.replace(/\-/g,"/"))}},string:{pattern:"[^\\/]*"},bool:{decode:function(e){return 0!==parseInt(e,10)},pattern:"0|1"},"int":{decode:function(e){return parseInt(e,10)},pattern:"\\d+"}}},"get,put,delete,post".replace(avalon.rword,function(t){return e.prototype[t]=function(e,n,a){this.add(t,e,n,a)}}),r()){e.prototype.getLastPath=function(){return localStorage.getItem("msLastPath")};var c;e.prototype.setLastPath=function(e){c&&(clearTimeout(c),c=null),localStorage.setItem("msLastPath",e),c=setTimeout(function(){localStorage.removItem("msLastPath")},864e5)}}return avalon.router=new e,avalon}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(2)],r=function(e){function t(e){return!e||e===window.name||"_self"===e||"top"===e&&window==window.top}function n(e){for(var t,n=0;t=e[n++];)if("A"===t.nodeName)return t}function a(e,t){(t=document.getElementById(e))?t.scrollIntoView():(t=n(document.getElementsByName(e)))?t.scrollIntoView():window.scrollTo(0,0)}var r=document.createElement("a"),o=e.History=function(){this.location=location};o.started=!1,o.IEVersion=function(){var e=document.documentMode;return e?e:window.XMLHttpRequest?7:6}(),o.defaults={basepath:"/",html5Mode:!1,hashPrefix:"!",iframeID:null,interval:50,fireAnchor:!0,routeElementJudger:e.noop};var i=window.VBArray&&o.IEVersion<=7,l=!!window.history.pushState,s=!(!("onhashchange"in window)||window.VBArray&&i);return o.prototype={constructor:o,getFragment:function(e){return null==e&&(e="popstate"===this.monitorMode?this.getPath():this.getHash()),e.replace(/^[#\/]|\s+$/g,"")},getHash:function(e){var t=(e||this).location.href;return this._getHash(t.slice(t.indexOf("#")))},_getHash:function(e){return 0===e.indexOf("#/")?decodeURIComponent(e.slice(2)):0===e.indexOf("#!/")?decodeURIComponent(e.slice(3)):""},getPath:function(){var e=decodeURIComponent(this.location.pathname+this.location.search),t=this.basepath.slice(0,-1);return e.indexOf(t)||(e=e.slice(t.length)),e.slice(1)},_getAbsolutePath:function(e){return e.hasAttribute?e.href:e.getAttribute("href",4)},start:function(t){function n(e){var t=a.iframe;if("iframepoll"===a.monitorMode&&!t)return!1;var n,r=a.getFragment();if(t){var o=a.getHash(t);r!==a.fragment?(a._setIframeHistory(a.prefix+r),n=r):o!==a.fragment&&(a.location.hash=a.prefix+o,n=o)}else r!==a.fragment&&(n=r);void 0!==n&&(a.fragment=n,a.fireRouteChange(n,{fromHistory:!0}))}if(o.started)throw new Error("avalon.history has already been started");o.started=!0,this.options=e.mix({},o.defaults,t),this.html5Mode=!!this.options.html5Mode,this.monitorMode=this.html5Mode?"popstate":"hashchange",l||(this.html5Mode&&(e.log("如果浏览器不支持HTML5 pushState，强制使用hash hack!"),this.html5Mode=!1),this.monitorMode="hashchange"),s||(this.monitorMode="iframepoll"),this.prefix="#"+this.options.hashPrefix+"/",this.basepath=("/"+this.options.basepath+"/").replace(/^\/+|\/+$/g,"/"),this.fragment=this.getFragment(),r.href=this.basepath,this.rootpath=this._getAbsolutePath(r);var a=this,i="<!doctype html><html><body>@</body></html>";switch(this.options.domain&&(i=i.replace("<body>","<script>document.domain ="+this.options.domain+"</script><body>")),this.iframeHTML=i,"iframepoll"===this.monitorMode&&e.ready(function(){if(!a.iframe){var e=a.iframe||document.getElementById(a.iframeID)||document.createElement("iframe");e.src="javascript:0",e.style.display="none",e.tabIndex=-1,document.body.appendChild(e),a.iframe=e.contentWindow,a._setIframeHistory(a.prefix+a.fragment)}}),this.monitorMode){case"popstate":this.checkUrl=e.bind(window,"popstate",n),this._fireLocationChange=n;break;case"hashchange":this.checkUrl=e.bind(window,"hashchange",n);break;case"iframepoll":this.checkUrl=setInterval(n,this.options.interval)}e.ready(function(){a.fireRouteChange(a.fragment||"/",{replace:!0})})},fireRouteChange:function(t,n){var r=e.router;r&&r.navigate&&(r.setLastPath(t),r.navigate("/"===t?t:"/"+t,n)),this.options.fireAnchor&&a(t.replace(/\?.*/g,""))},stop:function(){e.unbind(window,"popstate",this.checkUrl),e.unbind(window,"hashchange",this.checkUrl),clearInterval(this.checkUrl),o.started=!1},updateLocation:function(t,n,a){var n=n||{},r=n.replace,o=n.silent;if("popstate"===this.monitorMode){var i=this.rootpath+t+(a||"");i!=this.location.href.split("#")[0]&&history[r?"replaceState":"pushState"]({path:i},document.title,i),o||this._fireLocationChange()}else{var l=this.prefix+t;o&&t!=this.getHash()&&(this._setIframeHistory(l,r),this.fragment&&e.router.setLastPath(this.fragment),this.fragment=this._getHash(l)),this._setHash(this.location,l,r)}},_setHash:function(e,t,n){var a=e.href.replace(/(javascript:|#).*$/,"");n?e.replace(a+t):e.hash=t},_setIframeHistory:function(e,t){if(this.iframe){var n=this.iframe.document;n.open(),n.write(this.iframeHTML),n.close(),this._setHash(n.location,e,t)}}},e.history=new o,e.bind(document,"click",function(n){var a="defaultPrevented"in n?n.defaultPrevented:n.returnValue===!1,r=e.history.options.routeElementJudger;if(!(a||n.ctrlKey||n.metaKey||2===n.which)){for(var o=n.target;"A"!==o.nodeName;)if(o=o.parentNode,!o||"BODY"===o.tagName)return;if(t(o.target)){var l=i?o.getAttribute("href",2):o.getAttribute("href")||o.getAttribute("xlink:href"),s=e.history.prefix;if(null===l)return;var c=l.replace(s,"").trim();0===l.indexOf(s)&&""!==c||(c=r(o,l),c===!0&&(c=l)),c&&(n.preventDefault(),e.router&&e.router.navigate(c))}}}),e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(2)],r=function(){function e(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}var t={stringify:function(e,t,n){var a=[e+"="+encodeURIComponent(t)];return isFinite(n)&&"number"==typeof n?a.push("Max-Age="+n):(n=n||{},n.maxAge&&a.push("Max-Age="+n.maxAge),n.domain&&a.push("Domain="+n.domain),n.path&&a.push("Path="+n.path),n.expires&&a.push("Expires="+n.expires.toUTCString()),n.httpOnly&&a.push("HttpOnly"),n.secure&&a.push("Secure")),a.join("; ")},forEach:function(t){var n=String(document.cookie).split(/; */);n.forEach(function(n){var a=n.indexOf("=");if(-1!==a){var r=n.substr(0,a).trim(),o=n.substr(++a,n.length).trim();t(r,e(o))}})},get:function(e){var n;try{t.forEach(function(t,a){if(t===e)throw n=a,""})}catch(a){}return n},getAll:function(){var e={};return t.forEach(function(t,n){t in e||(e[t]=n)}),e},set:function(e,n,a){document.cookie=t.stringify.apply(0,arguments)},remove:function(e,n){n=n||{},n.expires||(n.expires=new Date(1970,0,1)),t.set(e,"",n)},clear:function(){t.forEach(function(e,n){t.remove(e)})}};return avalon.cookie=t,avalon}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(13),n(14),n(15),n(24),n(30)],r=function(e,t){function n(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}var a=e.ui.coupledatepicker=function(r,o,i){function l(t){if(b){var n=b.length,a=e.getModel(b[0].trim(),i),r=1===n?null:e.getModel(b[1].trim(),i),o=a[1][a[0]],l=r?r[1][r[0]]:"";p=a,f=r,s(n,o,l),p&&(t=t.replace(/MS_OPTION_FROMDUPLEX/g,b[0].trim())),f&&(t=t.replace(/MS_OPTION_TODUPLEX/g,b[1].trim()))}return p||(m.inputFromValue="",t=t.replace(/MS_OPTION_FROMDUPLEX/g,"inputFromValue")),f||(m.inputToValue="",t=t.replace(/MS_OPTION_TODUPLEX/g,"inputToValue")),t}function s(e,t,n){e&&(2==e?(p?p[1][p[0]]=t&&g(t)&&t||"":M.inputFromValue=t&&g(t)&&t||"",f?f[1][f[0]]=n&&g(n)&&n||"":M.inputToValue=n&&g(n)&&n||""):1==e&&(p?p[1][p[0]]=t&&g(t)&&t||"":M.inputFromValue=t&&g(t)&&t||""))}function c(e){var t,a,r,o=T&&g(T),i=_&&g(_),l=f?f[1][f[0]]:M.inputToValue,s=M.rules,c={};if(e){for(var p=0,h=["defaultDate","minDate","maxDate"];p<h.length;p++)C[p]&&(c[h[p]]=d(C[p],e));if(t=c.minDate,a=c.maxDate,o=(t?t.getTime():-1)>(o?o.getTime():-1)?t:o,i=(a?a.getTime():Number.MAX_VALUE)>(i?i.getTime():Number.MAX_VALUE)?i:a,!l&&c.defaultDate&&(l=y(c.defaultDate)),o){var v=y(o);l||(l=v)}r=l&&g(l),r&&u(r,o,i)&&(l=v),f?f[1][f[0]]=l:M.inputToValue=l,o&&(s.toMinDate=n(o)),i&&(s.toMaxDate=n(i))}}function u(e,t,n){var a=e.getTime();return t&&a<t.getTime()?!0:!!(n&&a>n.getTime())}function d(e,t){var n,a,r,o,i=/([+-])?(\d+)([MDY])?/g;return e=(e||"").toString(),r=i.exec(e),o=r&&(r[1]||"+")+(r[3]||"D"),n=t?t:new Date,a=new Date("string"==typeof n?g(n):n),o&&k[o]&&k[o](a,1*r[2]),a}var p,f,h,v,m=o.coupledatepickerOptions,g="function"==typeof m.parseDate&&m.parseDate.bind(m)||a.defaults.parseDate.bind(m),y="function"==typeof m.formatDate&&m.formatDate.bind(m)||a.defaults.formatDate.bind(m),b=m.duplex&&m.duplex.split(","),w=m.container,x=m.rules,T="",_="",C="";if(x&&"string"===e.type(x)){var $=e.getModel(x,i);x=$[1][$[0]]}x&&"object"===e.type(x)?(x=e.mix({},x.$model||x),x.toMinDate=x.toMinDate||"",x.toMaxDate=x.toMaxDate||"",x.fromMinDate=x.fromMinDate||"",x.fromMaxDate=x.fromMaxDate||""):x="",m.rules=x,T=x.toMinDate,_=x.toMaxDate,C=m.rules&&m.rules.rules||"",C=C.length>0?C.split(","):[],"string"==typeof w&&(w=w.split(","),w[0]=document.getElementById(w[0]),w[1]=document.getElementById(w[1])),w.length||(w=r.getElementsByTagName("div")),m.container=w=w.length?e.slice(w,0):w,m.template=l(m.getTemplate(t,m));var M=e.define(o.coupledatepickerId,function(t){e.mix(t,m),t.$skipArray=["widgetElement","container","calendarWrapper","template","changeMonthAndYear","startDay","fromLabel","toLabel","duplex"],t.widgetElement=r,t.fromSelectCal=function(e){M.rules&&M.rules.rules&&c(e)},t.getDates=function(){var e=p?p[1][p[0]]:M.inputFromValue,t=g(e),n=f?f[1][f[0]]:M.inputToValue,a=g(n);return t&&a&&[t,a]||null},t.$fromConfig={changeMonthAndYear:m.changeMonthAndYear,startDay:m.startDay,parseDate:g,formatDate:y,minDate:"rules.fromMinDate",maxDate:"rules.fromMaxDate",onSelect:t.fromSelectCal,calendarLabel:m.fromLabel,onInit:function(e){h=e,m.disabled&&(h.disabled=!0)}},t.$toConfig={changeMonthAndYear:m.changeMonthAndYear,startDay:m.startDay,parseDate:g,formatDate:y,minDate:"rules.toMinDate",maxDate:"rules.toMaxDate",calendarLabel:m.toLabel,onInit:function(e){v=e,m.disabled&&(v.disabled=!0)}},t.$init=function(t){var n=m.template.split("MS_OPTION_TEMPLATE"),a=n[0],o=n[1],l=null,s=null,u=null,d=null,h=null,v=null,y="",b="",x=[M];e(r).addClass("oni-coupledatepicker"),p&&(b=p[1][p[0]],x.push(p[1])),f&&x.push(f[1]),c(b&&g(b)),w.length?(y=o,s=e.parseHTML(o),u=s.firstChild,d=s.lastChild,h=w[0],v=w[1],h.appendChild(u),v.appendChild(d),e(h).addClass("oni-coupledatepicker-item"),e(v).addClass("oni-coupledatepicker-item")):(y=a,l=e.parseHTML(y),r.appendChild(l)),e.scan(r,x.concat(i)),"function"==typeof m.onInit&&m.onInit.call(r,M,m,i)},t.$remove=function(){r.innerHTML=r.textContent=""}});M.$watch("disabled",function(e){h.disabled=e,v.disabled=e});var k={"+M":function(e,t){var n=e.getDate();e.setMonth(e.getMonth()+t),e.getDate()!==n&&e.setDate(0)},"-M":function(e,t){var n=e.getDate();e.setMonth(e.getMonth()-t),e.getDate()!==n&&e.setDate(0)},"+D":function(e,t){e.setDate(e.getDate()+t)},"-D":function(e,t){e.setDate(e.getDate()-t)},"+Y":function(e,t){e.setFullYear(e.getFullYear()+t)},"-Y":function(e,t){e.setFullYear(e.getFullYear()-t)}};return M};return a.version=1,a.defaults={container:[],fromLabel:"选择起始日期",toLabel:"选择结束日期",changeMonthAndYear:!1,widgetElement:"",disabled:!1,startDay:1,separator:"-",rules:"",parseDate:function(t){if("date"===e.type(t))return t;var n=this.separator,a="^(\\d{4})"+n+"(\\d{1,2})"+n+"(\\d{1,2})$";a=new RegExp(a);var r=t.match(a);return r?new Date(r[1],1*r[2]-1,r[3]):null},formatDate:function(t){if("date"!==e.type(t))return e.log("the type of "+t+"must be Date"),"";var n=this.separator,a=t.getFullYear(),r=t.getMonth(),o=t.getDate();return a+n+this.formatNum(r+1,2)+n+this.formatNum(o,2)},formatNum:function(e,t){e=String(e);for(var n=0,a=t-e.length;a>n;n++)e="0"+e;return e},getTemplate:function(e,t){return e}},e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a,r;a=[n(2)],r=function(e){function t(e,t,n){for(var a,r,o=t,i=0,l=e.length;l>i;i++){var s=e[i];if(r=o.$model||o,"undefined"==typeof r[s])return;a=o,o=o[s]}return n>1?a[s]:a}return e.getModel=function(e,n){if(!e)return null;var a=e.split("."),r=a.length,o=a[r-1];1!=a.length&&a.pop();for(var i=0,l=n.length;l>i;i++){var s=n[i],c=t(a,s,r);if("undefined"!=typeof c&&(c.hasOwnProperty(o)||Object.prototype.hasOwnProperty.call(c,o)))return[o,c,s]}return null},e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="oni-coupledatepicker-item">\n    <input\n    ms-widget="datepicker, $, $fromConfig"\n    ms-duplex="MS_OPTION_FROMDUPLEX"/>   \n</div>\n<span class="label">-</span>\n<div class="oni-coupledatepicker-item">\n    <input \n    ms-widget="datepicker, $, $toConfig"\n    ms-duplex="MS_OPTION_TODUPLEX"/>\n</div>\nMS_OPTION_TEMPLATE\n<input\n    ms-widget="datepicker, $, $fromConfig"\n    ms-duplex="MS_OPTION_FROMDUPLEX"/>   \n<input \n    ms-widget="datepicker, $, $toConfig"\n    ms-duplex="MS_OPTION_TODUPLEX"/>'},function(e,t,n){var a,r;a=[n(13),n(16),n(17),n(18),n(26),n(24),n(29)],r=function(e,t,n){function a(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function r(e){var t={},n=[];for(var a in e){var r=e[a],i=o(a);i&&(r.date=i,n.push(r))}n.sort(function(e,t){return(e.dayIndex||0)-(t.dayIndex||0)});for(var a=0,l=n.length;l>a;a++){var r=n[a],i=r.date,s=r.beforeTime||0,c=r.afterTime||0;i.setDate(i.getDate()-s-1);for(var u=-r.beforeTime;c+1>u;u++)i.setDate(i.getDate()+1),t[i.getTime()]={text:r.holidayName+(0>u?"前"+-u+"天":u>0?"后"+u+"天":""),cellClass:0===u&&r.holidayClass||"",cellText:0===u&&r.holidayText||""}}return t}function o(t){if(!t)return null;if("date"===e.type(t))return t;var n=this.separator||"-",a="^(\\d{4})"+n+"(\\d{1,2})"+n+"(\\d{1,2})[\\s\\w\\W]*$";a=new RegExp(a);var r=t.match(a);return r?new Date(r[1],1*r[2]-1,r[3]):null}function i(e){if(e){var t;t=this.$id&&this.regional?this.regional:d.defaultRegional;var n=t.holidayDate||{},r=a(new Date).getTime(),o=e.getTime();t.dayNames;if(r==o)return{text:t.currentDayFullText,cellClass:"c_today",cellText:t.currentDayText};if(r==o-s)return{text:t.nextDayText,cellClass:""};if(r==o-2*s)return{text:t.dayAfterTomorrow,cellClass:""};var i=n&&n[e.getTime()];return i?i:{text:t.weekDayNames[e.getDay()]}}}var l=n,s=864e5,c=1901,u=2050,d=e.ui.datepicker=function(t,n,r){function o(){var e=t.value,n=S(e),r=a(new Date),o=n,l=!1;e&&!n&&(D.tip=D.formatErrorTip,D.dateError="#ff8888",o=r),D.allowBlank?e?n&&(l=p(n,D)):(D.tip="",o=r):e?n&&(l=p(n,D)):(e=P(r),D.tip=i(r).text,o=r,l=p(r,D)),l&&(o=D.minDate||D.maxDate,e=P(o)),E=o.getFullYear(),k=o.getMonth(),A=o.getDate(),j=e}function s(e){var t=V._years,n=(e+"").substr(0,3),a=[];if(!~t.indexOf(e)){for(var r=0;9>=r;r++)a.push(Number(n+r));V._years=a}}function p(e,t){var n=e.getTime(),a=t.minDate,r=t.maxDate;return a&&n<a.getTime()?!0:!!(r&&n>r.getTime())}function f(n,r){var o=[[t,"focus",function(e){V.toggle=!0}],[document,"click",function(e){var t=e.target;if("range"!==D.type)return n.contains(t)||r.contains(t)||!V.toggle||V.timer?V.toggle||V.disabled||!r.contains(t)?void 0:void(V.toggle=!0):void(V.toggle=!1)}],[t,"keydown",function(e){var t,n,a=e.keyCode;if(n=e.key)switch(n){case"-":t="-";break;case"/":t="/"}else switch(a){case 189:t="-";break;case 191:t="/"}return V.toggle||(V.toggle=!0),(48>a||a>57&&96>a||a>105)&&13!==a&&8!==a&&D.separator!==t&&27!==a&&9!==a&&37!==a&&39!==a&&46!==a?(e.preventDefault(),!1):void 0}],[t,"keyup",function(e){var n,r,o,l=t.value,s=V.year,c=V.month,u=e.keyCode;if(37===u||39===u)return!1;if(13===u||27==u||9==u)return V.toggle=!1,!1;if(o=S(l))n=o.getMonth(),r=o.getFullYear(),V.dateError="#cccccc",V.tip=i(a(o)).text,V.day=o.getDate(),c!=n&&s!=r?(H=!0,V.year=r,V.month=n):c!=n?V.month=n:V.year=r;else{if(V.allowBlank&&""==l)return V.tip="",void(V.dateError="#cccccc");V.tip=V.formatErrorTip,V.dateError="#ff8888"}}]];e.each(o,function(t,n){e.bind(n[0],n[1],n[2])}),W=function(){e.each(o,function(t,n){e.unbind(n[0],n[1],n[2])}),o=null}}function h(e){var t,n=V.month,a=V.year,r=V.stepMonths,o=V.numberOfMonths,i=0,l=0;n="next"===e?n+r+o-1:n-r-o+1,t=new Date(a,n,1),i=t.getMonth(),l=t.getFullYear(),l!=V.year?(H=!0,V.year=l,V.month=i):V.month=i}function v(){for(var e=[],t=D.startDay,n=0,a=V.regional.dayNames;7>n;n++){var r=(n+t)%7;e.push(a[r])}return e}function m(e,t,n,a,r,o,l,s){var c=!1,u=i(e),d=u&&u.cellText||s,f=e.getDay(),h=f%7==0||f%7==6,v=p(e,t);n&&n.getDate()===+s&&a===n.getMonth()&&r===n.getFullYear()&&(c=!0),o.push({day:s+"",_day:d+"",month:a,year:r,weekend:h,selected:c,dateDisabled:v}),l.push(d+"")}function g(e,t){return"function"==typeof V.onBeforeRender?void V.onBeforeRender(V,e,t,function(){y(e,t)}):void y(e,t)}function y(e,n){var a,r,o,i=V.startDay,l=new Date(E,e,1),s=new Date(E,e,1-(l.getDay()-i+7)%7),c=V.showOtherMonths,u=S(t.value),d=V.minDate,p=V.maxDate,f=d?12*(E-d.getFullYear())+e-d.getMonth()>0:!0,h=p?12*(p.getFullYear()-E)+p.getMonth()-e>0:!0,v=[],g=[],y=[],b=[],w=[],x=[];V.prevMonth=f,V.nextMonth=h;for(var T=0,_=V.numberOfMonths;_>T;T++){for(var C=0;6>C;C++){w=[],x=[];for(var $=0;7>$;$++)r=s.getMonth(),a=s.getFullYear(),o=s.getDate(),a===E&&r===e?m(s,V,u,r,a,w,x,o):c&&0===C&&(E>a||e>r)?m(s,V,u,r,a,w,x,o):(x.push(""),w.push({day:"",month:!1,weekend:!1,selected:!1,dateDisabled:!0})),s=new Date(s.setDate(o+1));v.push(w),g.push(x)}y.push({year:E,month:e,rows:v}),b.push({year:E,month:e,rows:g}),e+=1,l=new Date(E,e,1),E=l.getFullYear(),e=l.getMonth(),s=new Date(E,e,1-(l.getDay()-i+7)%7),v=[],g=[]}F=y,V.data=b}function b(t,n,a,r,o,l,s,c,u,d){var f=!1,h=a&&a.getMonth(),v=a&&a.getFullYear(),m=i(t),g=m&&m.cellText||l,y=t.getDay(),b=y%7==0||y%7==6,w=p(t,n),x=F[c].rows[u][d],T=n.data[c].rows[u];g+="",l===+s&&r===h&&o===v&&(f=!0),x._day!=g||x.selected==f&&x.dateDisabled==w?x._day==g?e.mix(x,{month:r,year:o}):(e.mix(x,{day:l+"",_day:g,month:r,year:o,weekend:b,selected:f,dateDisabled:w}),T.set(d,g)):(e.mix(x,{month:r,year:o,selected:f,dateDisabled:w}),T.set(d,"").set(d,g))}function w(e,t,n){return"function"==typeof V.onBeforeRender?void V.onBeforeRender(V,e,t,function(){x(e,t,n)}):void x(e,t,n)}function x(n,a,r){var o,i,l,s=V.startDay,c=new Date(a,n,1),u=new Date(a,n,1-(c.getDay()-s+7)%7),d=V.showOtherMonths,p=S(t.value),f=V.minDate,h=V.maxDate,v=f?12*(a-f.getFullYear())+n-f.getMonth()>0:!0,m=h?12*(h.getFullYear()-a)+h.getMonth()-n>0:!0;V.prevMonth=v,V.nextMonth=m;for(var g=0,y=V.numberOfMonths;y>g;g++){V.data[g].year=a,V.data[g].month=n,F[g].year=a,F[g].month=n;for(var w=0;6>w;w++)for(var x=0;7>x;x++)i=u.getMonth(),o=u.getFullYear(),l=u.getDate(),o===a&&i===n?b(u,V,p,i,o,l,r,g,w,x):d&&0===w&&(a>o||n>i)?b(u,V,p,i,o,l,r,g,w,x):(V.data[g].rows[w].set(x,""),e.mix(F[g].rows[w][x],{day:"",_day:"",month:!1,weekend:!1,selected:!1,dateDisabled:!0})),5===w&&0===x&&(V._uc=!V._uc),u=new Date(u.setDate(l+1));n+=1,c=new Date(a,n,1),a=c.getFullYear(),n=c.getMonth(),u=new Date(a,n,1-(c.getDay()-s+7)%7)}}function T(e){return"string"==typeof e?S(e):e}function _(e){if("string"==typeof e){var t=S(e),n=/\s[0-2]?[0-9]:[0-5]?[0-9]/,a=e.match(n);if(t&&a&&a.length){var r=a[0].split(":"),o=+r[0],i=+r[1];t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),o,i)}return t}return e}var C,$,M,k,A,E,D=n.datepickerOptions,O=t.msData["ms-duplex"],N=O&&e.getModel(O,r),S=D.parseDate,P=D.formatDate,I=D.minDate,L=D.maxDate,H=!1,F=[],j="",R=null,B=[];if(l=D.template=D.getTemplate(l,D),e.scan(t,r),D.disabled=t.disabled||D.disabled,P=P.bind(D),S=S.bind(D),I=null!==I&&T(I),L=null!==L&&T(L),D.minDate&&!I&&(C=e.getModel(D.minDate,r),C&&(I=T(C[1][C[0]]))),I=D.minDate=I&&a(I),D.maxDate&&!L&&($=e.getModel(D.maxDate,r),$&&(L=T($[1][$[0]]))),L=D.maxDate=L&&a(L),I?c=I.getFullYear():0,L?u=L.getFullYear():0,"array"===e.type(D.years))B=D.years;else for(var Y=c;u>=Y;Y++)B.push(Y);D.mobileMonthAndYear&&(D.mobileYear=0),D.changeMonthAndYear&&(D.mobileMonthAndYear=!1),o();var W=e.noop,V=e.define(n.datepickerId,function(n){e.mix(n,D,{regional:d.defaultRegional}),n.$skipArray=["container","showDatepickerAlways","timer","sliderMinuteOpts","sliderHourOpts","template","widgetElement","rootElement","dayNames","allowBlank","months","years","numberOfMonths","showOtherMonths","watermark","weekNames","stepMonths","changeMonthAndYear","startDay","mobileMonthAndYear","formatErrorTip"],n._uc=!1,n._height=150,n.dateError=n.dateError||"",n.weekNames=[],n.tip=n.tip||"",n.widgetElement=t,n.rootElement={},n.data=[],n.prevMonth=-1,n.nextMonth=-1,n.month=k,n._month=k+1,n.year=E,n.day=A,n.years=B,n.months=[1,2,3,4,5,6,7,8,9,10,11,12],n._position="absolute",n._datepickerToggle=!0,n._monthToggle=!1,n._yearToggle=!1,n._years=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],n.elementYear=E,n.elementMonth=k,n._getPositionClass=function(e){var t=n._position;if("absolute"===t)switch(e){case"rb":return"oni-datepicker-wrapper-right";case"lt":return"oni-datepicker-wrapper-top";case"rt":return"oni-datepicker-wrapper-top-right";default:return e}},n._setWeekClass=function(e){var t=V.regional.day;return t?t.indexOf(e)%7==0||t.indexOf(e)%7==6?"oni-datepicker-week-end":"":void 0},n._setDayClass=function(e,t,n,a){var r="",o={};return""===a?"":(o=F[n].rows[t][e],o.weekend&&(r+=" oni-datepicker-week-end"),o.month||(r+=" oni-datepicker-day-none"),o.selected&&(r+=" oni-datepicker-selected"),o.dateDisabled&&(r+=" oni-state-disabled"),r.trim())},n._setHoverClass=function(e,t,n,a){var r="",o={};return""===a?"":(o=F[n].rows[t][e],r="oni-datepicker-day-hover")},n._setMobileYearClass=function(e,t,n,a){var r="";return e===t&&n===a&&(r+=" oni-datepicker-selected"),V.mobileYearDisabled(e)&&(r+=" oni-state-disabled"),r},n._rowShow=function(e){for(var t=e.length,n=!1,a=0;t>a;a++)if(""!==e[a]){n=!0;break}return n},n.sliderMinuteOpts={onInit:function(e,t,n){e.$watch("value",function(e){V.minute=e}),V.$watch("minute",function(t){e.value=t})}},n.sliderHourOpts={onInit:function(e,t,n){e.$watch("value",function(e){V.hour=e}),V.$watch("hour",function(t){e.value=t})}},n.$yearVmId=n.$id+"year",n.$monthVmId=n.$id+"month",n.$yearOpts={width:60,listWidth:60,height:160,position:!1,listClass:"oni-datepicker-dropdown",onSelect:function(e){e.stopPropagation()}},n.$monthOpts={width:45,height:160,listWidth:45,position:!1,listClass:"oni-datepicker-dropdown",onSelect:function(e){e.stopPropagation()}},n._selectDates=function(e){V.mobileMonthAndYear&&(V._monthToggle=!1,V._yearToggle=!1,V._datepickerToggle=!0,H=!0,V.year=V.mobileYear,V.month=e)},n._selectMonths=function(e,t){if(V.mobileMonthAndYear){if(t){if(V.mobileYearDisabled(t))return;V.mobileYear=t}else V.mobileYear=V.year;V._monthToggle=!0,V._yearToggle=!1,V._datepickerToggle=!1}},n._selectYears=function(){V.mobileMonthAndYear&&(V._monthToggle=!1,V._yearToggle=!0,V._datepickerToggle=!1)},n.getInitTime=function(e){var t=P(e),n=e.toTimeString(),a=n.substr(0,n.lastIndexOf(":"));return V.hour=e.getHours(),V.minute=e.getMinutes(),t+" "+a},n._dateCellRender=function(e,t,n,a){var r=V.dateCellRender,o=F[n],i=o.month,l=o.year;if(r&&"function"==typeof r){var s=F[n].rows[e][t];return i===V.month&&l===V.year?""===a?(s.html="",a):(a=r(a,V,s),s.html=a,a):s.html}return a},n._getNow=function(){var e=new Date,t=e.toTimeString(),n=t.substr(0,t.lastIndexOf(":"));return V.hour=e.getHours(),V.minute=e.getMinutes(),n},n._selectTime=function(n){var a=e.filters.timer,r=a(V.hour),o=a(V.minute),i=r+":"+o,l=P(S(t.value));n.stopPropagation(),t.value=l+" "+i,V.showDatepickerAlways||(V.toggle=!1),D.onSelectTime&&"function"===e.type(D.onSelectTime)&&D.onSelectTime.call(V,V)},n._selectYearMonth=function(e){e.stopPropagation()},n._prev=function(e,t){return e?(h("prev"),void t.stopPropagation()):!1},n._next=function(e,t){return e?(h("next"),void t.stopPropagation()):!1},n._prevYear=function(e){e!==V.years[0]&&(V.mobileYear=V.mobileYear-1)},n._nextYear=function(e){e!==V.years[V.years.length-1]&&(V.mobileYear=V.mobileYear+1)},n._prevYears=function(){V._years[0]<=V.years[0]||s(V._years[0]-1)},n._nextYears=function(){var e=V._years,t=V.years;e[e.length-1]>=t[t.length-1]||s(e[9]+1)},n.mobileYearDisabled=function(e){var t=V.years;return e<t[0]||e>t[t.length-1]},n.getRawValue=function(){return t.value},n.getDate=function(){var e=V.getRawValue();return S(e)},n._afterYearRendered=function(){this.setAttribute("ms-widget",["dropdown",n.$yearVmId,"$yearOpts"].join(",")),this.setAttribute("ms-duplex","year"),e.scan(this,V)},n._afterMonthRendered=function(){this.setAttribute("ms-widget",["dropdown",n.$monthVmId,"$monthOpts"].join(",")),this.setAttribute("ms-duplex","_month"),e.scan(this,V)},n._selectDate=function(n,r,o,l){var s=e.filters.timer,c=V.month,u=V.year,d=F[o].rows[r][n],p=d.year,f=d.month,h=+d.day,v=d.dateDisabled;if(l.stopPropagation(),l.preventDefault(),f!==!1&&!v&&!V.showDatepickerAlways){var m=new Date(p,f,h),g=P(m),y="range"===D.type?t["data-calenderwrapper"]:null;V.tip=i(a(m)).text,V.dateError="#cccccc",y||V.timer?(V.timer&&(g=g+" "+s(V.hour)+":"+s(V.minute)),t.value=g):(t.value=g,V.toggle=!1),f===c&&p===u&&V.day==h?V.$fire("day",h):V.day=h,f!==c&&p!==u?(H=!0,V.year=p,V.month=f):f!==c?V.month=f:p!==u&&(V.year=p)}if(!V.showDatepickerAlways&&!N){if("string"==typeof V.onSelect)return void e.log("onSelect 回调必须是个function！");V.onSelect.call(null,g,V,e(t).data())}},n.setRegional=function(e){V.regional=e},n.dataRendered=function(){R||(R=document.getElementById("oni-datepicker-days"),R&&(R.id=""))},n.$init=function(o){var s=t.parentNode,c=null;if(M=e.parseHTML(l).firstChild,s.insertBefore(M,t),s.insertBefore(t,M),e(t).attr("ms-css-width","width"),V.weekNames=v(),"INPUT"===t.tagName&&"range"!==V.type){var u=document.createElement("div");if(u.className="oni-datepicker-input-wrapper",u.setAttribute("ms-class","oni-datepicker-active:toggle"),u.setAttribute("ms-css-border-color","dateError"),u.setAttribute("ms-hover","oni-state-hover"),s.insertBefore(u,t),u.appendChild(t),V.showTip){var d=e.parseHTML("<div class='oni-datepicker-tip'>{{tip}}<i class='oni-icon oni-icon-calendar-o'>&#xf088;</i></div>");u.appendChild(d)}else t.style.paddingRight="0px";u.appendChild(M)}if(V.timer){V.width=100;var p=_(j);j&&p&&(j=V.getInitTime(p))}t.value=j,(c=S(j))&&(V.tip=i(a(c)).text),t.disabled=V.disabled,V.showDatepickerAlways?(t.style.display="none",V.toggle=!0,V._position="relative",u.style.borderWidth=0):f(M,u),"range"===D.type?(u=t["data-calenderwrapper"],V._position="static"):e.scan(u,[V]),n.rootElement=u,e.scan(M,[V].concat(r)),setTimeout(function(){g(V.month,V.year)},10),"function"==typeof D.onInit&&D.onInit.call(t,V,D,r)},n._getTitle=function(e,t){return V.regional.titleFormat.call(V.regional,e,t)},n.$remove=function(){W();var e=t.parentNode,n=e.parentNode,a=M.parentNode;M.innerHTML=M.textContent="",a.removeChild(M),n.removeChild(e)}});return i=i.bind(V),V.$watch("toggle",function(n){var a=t.value,r=S(a),o=r&&r.getFullYear(),i=r&&r.getMonth();if(n)V.elementMonth=i||-1,V.elementYear=o||-1,R&&(V._height=e(R).height(),R=null);else{if(V.year!=o&&V.month!=i)if(r)H=!0,V.year=o,V.month=i;else{H=!0;var l=new Date,s=l.getFullYear(),c=l.getMonth();V.year==s&&V.month==c?w(V.month,V.year,V.day):V.year==s?V.month=c:V.month==c?V.year=s:(H=!0,V.year=s,V.month=c)}else V.year!=o?V.year=o:V.month!=i&&(V.month=i);e.vmodels[V.$yearVmId]&&(e.vmodels[V.$yearVmId].toggle=!1),e.vmodels[V.$monthVmId]&&(e.vmodels[V.$monthVmId].toggle=!1),V.onClose(new Date(V.year,V.month,V.day),V)}}),V.$watch("year",function(e){V.mobileMonthAndYear&&s(e),H?H=!1:w(V.month,e,V.day),V.onChangeMonthYear(e,V.month+1,V)}),V.changeMonthAndYear&&V.$watch("_month",function(e){
V.month=e-1}),V.$watch("month",function(e){V._month=e+1,w(e,V.year,V.day),V.onChangeMonthYear(V.year,e,V)}),V.$watch("day",function(e,t){for(var n=F,a=V.month,r=V.year,o=!1,i=0,l=n.length;l>i;i++){var s=n[i];if(s.year==r&&s.month==a)for(var c=s.rows,u=0,d=c.length;d>u;u++)for(var p=c[u],f=0,h=p.length;h>f;f++){var v=p[f],m=v.day;m==e&&v.month==a&&v.year==r?(v.selected=!0,V.data[i].rows[u].set(f,"").set(f,v._day)):v.selected&&(v.selected=!1,V.data[i].rows[u].set(f,"").set(f,v._day))}else for(var u=0,d=c.length;d>u;u++){for(var p=c[u],f=0,h=p.length;h>f;f++){p[f];if(v.selected){v.selected=!1,V.data[i].rows[u].set(f,"").set(f,v._day),o=!0;break}}if(o)break}if(o)break}}),V.$watch("disabled",function(e){t.disabled=e}),V.$watch("minDate",function(e){var t=T(e);t?V.minDate=a(t):V.minDate="",w(V.month,V.year,V.day)}),V.$watch("maxDate",function(e){var t=T(e);t?V.maxDate=a(t):V.maxDate="",w(V.month,V.year,V.day)}),N&&N[1].$watch(N[0],function(n){var r,o,l;if(l=S(n)){if(r=l.getFullYear(),o=l.getMonth(),V.day=l.getDate(),o!==V.month&&r!==V.year?(H=!0,V.year=r,V.month=o):r!==V.year?V.year=r:o!==V.month&&(V.month=o),V.dateError="#cccccc",V.tip=i(a(l)).text,"string"==typeof V.onSelect)return void e.log("onSelect 回调必须是个function！");V.onSelect.call(null,l,V,e(t).data())}else V.allowBlank?V.tip="":(V.tip=V.formatErrorTip,V.dateError="#ff8888")}),C&&C[1].$watch(C[0],function(e){V.minDate=e}),$&&$[1].$watch($[0],function(e){V.maxDate=e}),V};return d.regional=[],d.regional["zh-CN"]={holidayDate:r(t),dayNames:["日","一","二","三","四","五","六"],weekDayNames:["周日","周一","周二","周三","周四","周五","周六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],closeText:"Done",prevText:"前",prevDayText:"昨天",nextText:"后",nextDayText:"明天",dayAfterTomorrow:"后天",currentDayText:"今天",currentDayFullText:"今天",showMonthAfterYear:!0,titleFormat:function(e,t){return e+"年 "+this.monthNames[t]},dayText:"天",weekText:"周",yearText:"年",monthText:"月",timerText:"时间",hourText:"时",minuteText:"分",nowText:"现在",confirmText:"确定"},d.defaultRegional=d.regional["zh-CN"],d.version=1,d.defaults={calendarWidth:196,startDay:1,minute:0,hour:0,width:90,showTip:!0,disabled:!1,changeMonthAndYear:!1,mobileMonthAndYear:!1,showOtherMonths:!1,numberOfMonths:1,allowBlank:!1,minDate:null,maxDate:null,stepMonths:1,toggle:!1,separator:"-",calendarLabel:"选择日期",onChangeMonthYear:e.noop,dateCellRender:!1,watermark:!0,zIndex:-1,showDatepickerAlways:!1,timer:!1,position:"",onBeforeRender:null,onSelect:e.noop,onClose:e.noop,onSelectTime:e.noop,parseDate:o,formatDate:function(t){if("date"!==e.type(t))return e.log("the type of "+t+"must be Date"),"";var n=this.separator,a=t.getFullYear(),r=t.getMonth(),o=t.getDate();return a+n+this.formatNum(r+1,2)+n+this.formatNum(o,2)},formatNum:function(e,t){e=String(e);for(var n=0,a=t-e.length;a>n;n++)e="0"+e;return e},widgetElement:"",formatErrorTip:"格式错误",getTemplate:function(e,t){return e}},e.filters.timer=function(e){var t=+e;return t>=0&&9>=t&&(e="0"+e),e},e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t,n){var a;a=function(){var e={"元旦节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_yuandan",holidayText:"元旦"},"除夕":{afterTime:0,beforeTime:0,dayIndex:0,holidayClass:"c_chuxi",holidayText:"除夕"},"春节":{afterTime:0,beforeTime:0,dayIndex:0,holidayClass:"c_chunjie",holidayText:"春节"},"元宵节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_yuanxiao",holidayText:"元宵"},"清明节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_qingming",holidayText:"清明"},"劳动节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_wuyi",holidayText:"劳动"},"端午节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_duanwu",holidayText:"端午"},"中秋节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_zhongqiu",holidayText:"中秋"},"国庆节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_guoqing",holidayText:"国庆"},"圣诞节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_shengdan",holidayText:"圣诞"}},t={"2014-01-01":{holidayName:"元旦节"},"2014-01-30":{holidayName:"除夕"},"2014-01-31":{holidayName:"春节"},"2014-02-01":{holidayName:"正月初二"},"2014-02-02":{holidayName:"正月初三"},"2014-02-14":{holidayName:"元宵节"},"2014-04-05":{holidayName:"清明节"},"2014-05-01":{holidayName:"劳动节"},"2014-06-01":{holidayName:"儿童节"},"2014-06-02":{holidayName:"端午节"},"2014-09-08":{holidayName:"中秋节"},"2014-09-10":{holidayName:"教师节"},"2014-10-01":{holidayName:"国庆节"},"2014-12-25":{holidayName:"圣诞节"},"2015-01-01":{holidayName:"元旦节"},"2015-02-18":{holidayName:"除夕"},"2015-02-19":{holidayName:"春节"},"2015-02-20":{holidayName:"正月初二"},"2015-02-21":{holidayName:"正月初三"},"2015-03-05":{holidayName:"元宵节"},"2015-04-05":{holidayName:"清明节"},"2015-05-01":{holidayName:"劳动节"},"2015-06-01":{holidayName:"儿童节"},"2015-06-20":{holidayName:"端午节"},"2015-09-27":{holidayName:"中秋节"},"2015-10-01":{holidayName:"国庆节"},"2015-12-25":{holidayName:"圣诞节"}};for(var n in t)if(t.hasOwnProperty(n)){var a=t[n],r=a.holidayName;if(r&&e[r]){var o=e[r];for(var i in o)!o.hasOwnProperty(i)||i in a||(a[i]=o[i])}}return t}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports='<div class="oni-datepicker"\n     ms-visible="toggle"\n     ms-class="oni-datepicker-multiple:numberOfMonths!==1">\n    <div class="oni-datepicker-wrapper" ms-css-position="_position" ms-class="{{_getPositionClass(position)}}">\n        <div class="oni-datepicker-content">\n            <div class="oni-datepicker-label" ms-if="numberOfMonths===1">{{calendarLabel}}</div>\n            <i  class="oni-datepicker-prev oni-icon" \n                ms-if="numberOfMonths!==1" \n                ms-click="_prev(prevMonth, $event)"\n                ms-class="oni-datepicker-prev-disabled:!prevMonth" \n                style="left:15px;">&#xf047;</i>\n            <i  class="oni-datepicker-next oni-icon" \n                ms-if="numberOfMonths!==1" \n                ms-click="_next(nextMonth, $event)"\n                ms-class="oni-datepicker-next-disabled:!nextMonth" \n                style="right:15px;">&#xf03e;</i>\n            <div class="oni-datepicker-content-content" \n                 ms-repeat-calendar="data" \n                 ms-visible="_datepickerToggle"\n                 ms-css-width=\'calendarWidth\'\n                 data-repeat-rendered="dataRendered">\n                <div class="oni-datepicker-header" ms-if="numberOfMonths===1">\n                    <i class="oni-datepicker-prev oni-icon" \n                       ms-click="_prev(prevMonth, $event)"\n                       ms-class="oni-datepicker-prev-disabled:!prevMonth">&#xf047;</i>\n                    <i class="oni-datepicker-next oni-icon"    \n                       ms-click="_next(nextMonth, $event)"\n                       ms-class="oni-datepicker-next-disabled:!nextMonth">&#xf03e;</i>\n                    <div class="oni-datepicker-title" ms-if="changeMonthAndYear && regional.showMonthAfterYear">\n                        <select ms-each="years" data-each-rendered="_afterYearRendered">\n                            <option ms-attr-value="el">{{el}}</option>\n                        </select>&nbsp;{{regional.yearText}}&nbsp;\n                        <select ms-each="months" data-each-rendered="_afterMonthRendered">\n                            <option ms-attr-value="{{el}}">{{el}}</option>\n                        </select>&nbsp;{{regional.monthText}}\n                    </div>\n                    <div class="oni-datepicker-title" ms-if="changeMonthAndYear && !regional.showMonthAfterYear">\n                        <select ms-each="months" data-each-rendered="_afterMonthRendered">\n                            <option ms-attr-value="{{el}}">{{el}}</option>\n                        </select>&nbsp;{{regional.monthText}}\n                        <select ms-each="years" data-each-rendered="_afterYearRendered">\n                            <option ms-attr-value="el">{{el}}</option>\n                        </select>&nbsp;{{regional.yearText}}&nbsp;\n                    </div>\n                    <div class="oni-datepicker-title"\n                         ms-click="_selectMonths"\n                         ms-if="!changeMonthAndYear">\n                        <span ms-hover="oni-state-hover:mobileMonthAndYear" ms-html="_getTitle(calendar.year, calendar.month)"></span>\n                    </div> \n                </div>\n                <div class="oni-datepicker-header" ms-if="numberOfMonths!==1">\n                    <div class="oni-datepicker-title">\n                        <span ms-hover="oni-state-hover:mobileMonthAndYear" ms-html="_getTitle(calendar.year, calendar.month)"></span>\n                    </div> \n                </div>\n                <table class="oni-datepicker-calendar-week">\n                    <thead>\n                        <tr>\n                            <th ms-repeat="weekNames"\n                                ms-class="{{_setWeekClass(el)}}">{{el}}\n                            </th>\n                        </tr>\n                    </thead>\n                </table>\n                <table class="oni-datepicker-calendar-days" id=\'oni-datepicker-days\'>\n                    <tbody>\n                        <tr ms-repeat-days="calendar.rows"\n                            ms-visible="_rowShow(days, _uc)">\n                            <td class="oni-datepicker-default"\n                                ms-repeat-item="days"\n                                ms-class="{{_setDayClass($index, $outer.$index, $outer.$outer.$index, item)}}"\n                                ms-hover="{{_setHoverClass($index, $outer.$index, $outer.$outer.$index, item)}}"\n                                ms-click="_selectDate($index, $outer.$index, $outer.$outer.$index, $event)"\n                                ms-html="_dateCellRender($outer.$index, $index, $outer.$outer.$index, item)"\n                                ms-attr-title="_dateCellRender($outer.$index, $index, $outer.$outer.$index, item)"\n                                ></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <div class="oni-datepicker-timer" ms-if="timer">\n                    <label>\n                        <span>{{regional.timerText}}</span>\n                        <b>{{hour|timer}}</b>&nbsp;:\n                        <b>{{minute|timer}}</b>\n                    </label>\n                    <p>\n                        <span>{{regional.hourText}}</span>\n                        <input ms-widget="slider, $, sliderHourOpts" data-slider-max="23" data-slider-min="0" data-slider-value="hour" data-slider-width="140">\n                    </p>\n                    <p>\n                        <span>{{regional.minuteText}}</span>\n                        <input ms-widget="slider, $, sliderMinuteOpts" data-slider-max="59" data-slider-min="0" data-slider-width="140" data-slider-value="minute">\n                    </p>\n                </div>\n                <div class="oni-datepicker-timer oni-helper-clearfix" ms-if="timer">\n                    <button type="button" class="oni-btn oni-btn-small" style="float: left" ms-click="_getNow">{{regional.nowText}}</button>\n                    <button type="button" class="oni-btn oni-btn-primary oni-btn-small" style="float:right" ms-click="_selectTime">{{regional.confirmText}}</button>\n                </div>\n                <div class="oni-datepicker-watermark" \n                     ms-if="watermark"\n                     ms-css-font-size=\'_height\'\n                     ms-css-line-height=\'{{_height}}px\'\n                     ms-css-width=\'calendarWidth\'\n                     ms-css-height=\'_height\'>\n                    {{calendar.month+1}}\n                </div>\n            </div>\n            <div class="oni-datepicker-content-content oni-datepicker-month-year" ms-if="mobileMonthAndYear" ms-visible="_monthToggle" ms-css-width=\'calendarWidth\'>\n                <table>\n                    <thead>\n                        <tr class="oni-datepicker-title">\n                            <th class="prev" style="visibility: visible;text-align:left">\n                                <i class="oni-datepicker-prev oni-icon" \n                                   ms-click="_prevYear(mobileYear)"\n                                   ms-class="oni-datepicker-prev-disabled:mobileYear===years[0]">&#xf047;</i>\n                            </th>\n                            <th style="text-align:center" \n                                ms-click="_selectYears" \n                                ms-hover="oni-state-hover:mobileMonthAndYear">{{mobileYear}}</th>\n                            <th class="next" style="visibility: visible;text-align:right">\n                                <i class="oni-datepicker-next oni-icon" \n                                   ms-click="_nextYear(mobileYear)"\n                                   ms-class="oni-datepicker-prev-disabled:mobileYear===years[years.length-1]">&#xf03e;</i>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td colspan="3" style="padding:0px">\n                                <span ms-repeat-m="months" \n                                      ms-class="oni-datepicker-selected: (m-1)===elementMonth && mobileYear===elementYear"\n                                      ms-click="_selectDates(m-1)"\n                                      ms-hover="oni-datepicker-day-hover">{{regional.monthNamesShort[m - 1]}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tfoot>\n                        <tr>\n                            <th colspan="3" class="today" style="display: none;">Today</th>\n                        </tr>\n                        <tr>\n                            <th colspan="3" class="clear" style="display: none;">Clear</th>\n                        </tr>\n                    </tfoot>\n                </table>\n            </div>\n\n            <div class="oni-datepicker-content-content oni-datepicker-month-year" ms-if="mobileMonthAndYear" ms-visible="_yearToggle" ms-css-width=\'calendarWidth\'>\n                <table>\n                    <thead>\n                        <tr class="oni-datepicker-title">\n                            <th class="prev" style="visibility: visible;text-align:left">\n                                <i class="oni-datepicker-prev oni-icon" \n                                   ms-click="_prevYears" \n                                   ms-class="oni-datepicker-prev-disabled:_years[0]<=years[0]">&#xf047;</i>\n                            </th>\n                            <th style="text-align:center" \n                                ms-hover="oni-state-hover:mobileMonthAndYear">{{_years[0]}}-{{_years[9]}}\n                            </th>\n                            <th class="next" style="visibility: visible;text-align:right">\n                                <i class="oni-datepicker-next oni-icon" \n                                    ms-click="_nextYears"\n                                    ms-class="oni-datepicker-next-disabled:_years[_years.length-1]>=years[years.length-1]">&#xf03e;</i>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td colspan="3" style="padding:0px">\n                                <span class="oni-datepicker-prev-year"\n                                      ms-class="{{_setMobileYearClass(_years[0]-1, elementYear, month, elementMonth)}}"\n                                      ms-click="_selectMonths($event, _years[0]-1)"\n                                      ms-hover="oni-datepicker-day-hover"\n                                >{{_years[0]-1}}</span>\n                                <span ms-repeat-y="_years" \n                                      ms-class="_setMobileYearClass(y, elementYear, month, elementMonth)"\n                                      ms-click="_selectMonths($event, y)"\n                                      ms-hover="oni-datepicker-day-hover"\n                                >{{y}}</span>\n                                <span class="oni-datepicker-next-year"\n                                      ms-class="{{_setMobileYearClass(_years[9]+1, elementYear, month, elementMonth)}}"\n                                      ms-click="_selectMonths($event, _years[9]+1)"\n                                      ms-hover="oni-datepicker-day-hover"\n                                >{{_years[9]+1}}</span>\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tfoot>\n                        <tr>\n                            <th colspan="3" class="today" style="display: none;">Today</th></tr>\n\n                            <tr><th colspan="3" class="clear" style="display: none;">Clear</th>\n                        </tr>\n                    </tfoot>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var a,r;a=[n(2),n(19),n(13),n(20),n(24),n(25)],r=function(e,t){function n(e){try{e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:e}catch(t){}return e}function a(e,t,n){var r=t||[];n=n||null;for(var i,l=0;i=e[l++];)Array.isArray(i.options)?(r.push({label:i.label,value:i.value,enable:o(i.enable,!0),group:!0,parent:n,toggle:!0}),a(i.options,r,i)):("string"==typeof i&&(i={label:i,value:i,title:i}),r.push({label:i.label,value:i.value,title:i.title,enable:o(n&&n.enable,!0)&&o(i.enable,!0),group:!1,parent:n,data:i,toggle:!0}));return r}function r(e){for(var t,n,a,r=document.createDocumentFragment(),o=0;a=e[o++];)a.group?(n=document.createElement("optgroup"),n.label=a.label,n.disabled=!a.enable,r.appendChild(n),t=n):(n=document.createElement("option"),n.text=a.label,n.value=a.value,n.disabled=!a.enable,a.parent&&t?t.appendChild(n):r.appendChild(n));return r}function o(e,t){return"boolean"==typeof e?e:t}function i(e,t,a){var r=t||[],l=e.children;a=a||null;for(var s,c=0;s=l[c++];)1===s.nodeType&&("OPTGROUP"===s.tagName?(a={label:s.label,value:"",enable:!s.disabled,group:!0,parent:!1,toggle:!0},r.push(a),i(s,r,a)):"OPTION"===s.tagName&&r.push({label:s.label.trim()||s.text.trim()||s.value.trim(),title:s.title.trim(),value:n(s.value.trim()||s.text.trim()),enable:o(a&&a.enable,!0)&&!s.disabled,group:!1,parent:a,toggle:!0}));return r}function l(e,t,n){var a,r,o=e.size(),i=[],l=[],s={};for(a=0;t>a;a++)s=e[a],s.enable&&!s.group&&s.toggle&&i.push(a);for(a=t+1;o>a;a++)s=e[a],s.enable&&!s.group&&s.toggle&&l.push(a);return r=0===i.length&&0===l.length?null:n?l.length>0?l.shift():i.shift():i.length>0?i.pop():l.pop()}function s(e){for(var t=[];e;e=e.nextSibling)1===e.nodeType&&t.push(e);return t}var c=/^(\d+).*$/,u=!-[1]&&!window.XMLHttpRequest,d=e.ui.dropdown=function(o,d,f){function h(){e.each(o.getElementsByTagName("option"),function(t,a){if(H.value.$model.indexOf(a.value)>-1||H.value.$model.indexOf(n(a.value))>-1)try{a.selected=!0}catch(r){e(a).attr("selected","selected")}else try{a.selected=!1}catch(r){a.removeAttribute("selected")}})}function v(t){var a,r=(o.msData["ms-duplex"]||"").trim();if(r&&(a=e.getModel(r,f)))t.value=a[1][a[0]],t.$hasDuplex=!0;else if(O){var i=[];Array.prototype.forEach.call(o.options,function(e){e.selected&&i.push(n(e.value))}),t.value=i}else Array.isArray(t.value)||(t.value=[t.value||""]);if(!t.multiple){Array.isArray(t.value)&&(t.value=void 0!==t.value[0]?t.value[0]:"");var l=t.data.filter(function(e){return e.value===t.value&&!e.group}),s=t.data.filter(function(e){return!e.group});0===l.length&&s.length>0&&(t.value=s[0].value,a&&(a[1][a[0]]=t.value))}var c,u=A.attr("data-duplex-changed");u&&(c=e.getModel(u,f))&&(t.changedCallback=c[1][c[0]]),t.duplexName=r;var d=document.body,p=t.container;t.container=("object"===e.type(p)&&1===p.nodeType&&d.contains(p)?p:document.getElementById(p))||d}function m(){return e.parseHTML(C)}function g(t){H.multiple||"array"!==e.type(t)||(t=t[0]);var n=H.data.$model.filter(function(e){return e.value===t});return n=n.length>0?n[0]:null,!n&&H.data.length?e.log("[log] avalon.dropdown 设置label出错"):n&&(H.label=n.label,H.title=n.title||n.label||""),n}function y(){var t=document.getElementById("title-"+H.$id),n=e(t);return H.width-n.css("paddingLeft").replace(c,"$1")-n.css("paddingRight").replace(c,"$1")}function b(){!H.multiple&&L&&H._position()}var w,x,T,_,C,$,M,k,A=e(o),E=o.parentNode,D=d.dropdownOptions,O=!0,N=!1;"multiple,size".replace(e.rword,function(e){p(o,e)&&(D[e]=o[e])}),D.enable=!o.disabled,T=D.template=D.getTemplate(t,D).replace(/MS_OPTION_ID/g,d.dropdownId).split("MS_OPTION_TEMPLATE"),_=T[0],C=T[1],w=D.data.$model||D.data,o.removeAttribute("ms-duplex"),e.scan(o,f),x=i(o),O=!!x.length,0===x.length&&(x=a(w)),D.data=x,e(o).css("display","none"),v(D);for(var S=0,P=x.length;P>S;S++)if(x[S].value==D.value){D.activeIndex=S,D.currentOption=e.mix(!0,{},x[S]);break}var I,L,H=e.define(d.dropdownId,function(t){e.mix(t,D),t.$skipArray=["widgetElement","duplexName","menuNode","dropdownNode","scrollWidget","rootElement"],t.multiple&&t.$hasDuplex&&-1===t.$skipArray.indexOf("value")&&t.$skipArray.push("value"),t.render=function(e){void 0!==e&&(H.data=a(e.$model||e),H.toggle&&H._styleFix(!0))},t.widgetElement=o,t.rootElement={},t.menuWidth="auto",t.menuHeight=t.height,t.dataSource=w,t.focusClass=!1,t.$init=function(t){if(H.multiple){L=m();var n=L.firstChild;E.insertBefore(L,o),n.appendChild(o)}else{var a;I=e.parseHTML(_),a=I.firstChild,E.insertBefore(I,o),a.appendChild(o),I=a,H.titleWidth=y(),g(H.value),$=e.bind(document.body,"click",function(e){return I.contains(e.target)?void H._toggle():void(L&&L.contains(e.target)||H.__cursorInList__||H.multiple||!H.toggle||(H.toggle=!1))}),H.position&&(M=e.bind(window,"scroll",b),k=e.bind(window,"resize",b))}if(O||(o.appendChild(r(x)),e.each(["multiple","size"],function(t,n){e(o).attr(n,H[n])})),H.multiple)H.value.$watch("length",function(){H.multipleChange=!H.multipleChange,h()});else{var i,l=(o.msData["ms-duplex"]||"").trim();l&&(i=e.getModel(l,f))&&i[1].$watch(i[0],function(e){H.value=e}),H.$watch("value",function(t,n){e.nextTick(function(){function a(e){e?(N=!0,H.value=n):(i&&(i[1][i[0]]=t,o.value=t),H.currentOption=g(t))}var r="function"===e.type(H.onChange)&&H.onChange||!1;return N?void(N=!1):void((r&&r.call(o,t,n,H,a)!==!1||!r)&&(i&&(i[1][i[0]]=t,o.value=t),H.currentOption=g(t)))})})}var s,c,u=o.msData["ms-disabled"],d=o.msData["ms-enabled"];u&&(s=e.getModel(u,f))&&(s[1].$watch(s[0],function(e){H.enable=!e}),H.enable=!s[1][s[0]]),d&&(c=e.getModel(d,f))&&(c[1].$watch(c[0],function(e){H.enable=e}),H.enable=c[1][c[0]]),H.enable=!o.disabled;var p,v=H.readonlyAttr;if(v&&(p=e.getModel(v,f))&&(p[1].$watch(p[0],function(e){H.readOnly=e}),H.readOnly=p[1][p[0]]),H.$source){if("string"===e.type(H.$source)){var w=e.getModel(H.$source,f);w&&(H.$source=w[1][w[0]])}else H.$source.$id?H.$source.length>0&&H._refresh(H.$source.length):H.$source=null;H.$source&&H.$source.$watch&&H.$source.$watch("length",function(e){H._refresh(e)})}e.scan(o.parentNode,[H].concat(f)),t?t():(e.log("请尽快升到avalon1.3.7+"),"function"==typeof D.onInit&&D.onInit.call(o,H,D,f)),H.multiple&&h()},t.repeatRendered=function(){H.multiple&&e.vmodels["scrollbar-"+H.$id].update()},t.$remove=function(){$&&e.unbind(window,"click",$),M&&e.unbind(window,"scroll",M),k&&e.unbind(window,"resize",k),H.toggle=!1,L&&H.container&&H.container.contains(L)&&H.container.removeChild(L),e.log("dropdown $remove")},t._select=function(t,n){var a=H.data[t].$model;if(a&&a.enable&&!a.group){var r=H.value;H.multiple?(t=H.value.indexOf(a.value),t>-1?H.value.splice(t,1):H.value.push(a.value)):H.value=a.value,H.toggle=!1,"function"===e.type(H.onSelect)&&H.onSelect.call(o,n,H.value,r,H),H.activeIndex=t}},t._refresh=function(e){if(H.data.clear(),H.label="",H.__cursorInList__=!1,e>0){H._disabledScrollbar(!1),H.data.pushArray(a(H.$source.$model||H.$source));var t;if(t=g(H.value))H.activeIndex=H.data.$model.indexOf(t);else{H.currentOption=H.data[0].$model,H.activeIndex=0;var n=H.data[0].value;!H.multiple||n instanceof Array||(n=[n]),g(H.value=n)}H.menuNode&&H._styleFix(!0)}},t._titleenter=function(){H.hoverAutoShow&&H._toggle()},t._titleleave=function(){H.hoverAutoShow&&(H.toggle=!1)},t._keydown=function(t){if(H.keyboardEvent!==!1&&!H.multiple){var n=H.activeIndex||0,a=H.value;switch(t.keyCode){case 9:case 27:t.preventDefault();break;case 13:H._select(n,t);break;case 38:case 63233:if(t.preventDefault(),n=l(H.data,n),null===n)return;H.value=H.data[n].value,H.activeIndex=n,H.scrollTo(n),"function"===e.type(H.onSelect)&&H.onSelect.call(o,t,H.value,a,H);break;case 40:case 63235:if(t.preventDefault(),n=l(H.data,n,!0),null===n)return;H.value=H.data[n].value,H.activeIndex=n,H.scrollTo(n),"function"===e.type(H.onSelect)&&H.onSelect.call(o,t,H.value,a,H)}}},t._toggle=function(n){if(0===H.data.length&&!H.realTimeData||!H.enable||H.readOnly)return void(H.toggle=!1);if(!L){var a;L=m(),a=L.firstChild,H.container.appendChild(L),L=a,t.rootElement=a,e.scan(a,[H].concat(f)),H.menuNode=document.getElementById("menu-"+H.$id),H.dropdownNode=document.getElementById("list-"+H.$id)}if("boolean"!=typeof n)return void(H.toggle=!H.toggle);if(n){var r,i,l=H.value;"array"!==e.type(l)&&(l=[l]),null==H.activeIndex&&(e.each(H.data,function(e,t){return void 0===r&&t.enable&&(r=e),t.value===l[0]?(i=e,!1):!0}),i||(i=r),H.activeIndex=i||0),H.scrollWidget=e.vmodels["scrollbar-"+H.$id],H._styleFix(),H._position(),"function"===e.type(H.onShow)&&H.onShow.call(o,L,H)}else"function"===e.type(H.onHide)&&H.onHide.call(o,L,H)},t.$watch("toggle",function(e){H.focusClass=e,H._toggle(e)}),t.toggle=!1,t._position=function(){for(var t=e(I),n=t.offset(),a=t.outerHeight(!0),r=e(L),o=e(I.firstChild),i=r.height(),l=e(window),s={},u=L.offsetParent,d=e(u);o.element&&1!=o.element.nodeType;)o=e(o.element.nextSibling);D.position&&n.top+a+i>l.scrollTop()+l.height()&&n.top-i>l.scrollTop()?s.top=n.top-i:s.top=n.top+a-o.css("borderBottomWidth").replace(c,"$1"),u&&"BODY"!==u.tagName&&"HTML"!==u.tagName?(s.top=s.top-d.offset().top+L.offsetParent.scrollTop,s.left=n.left-d.offset().left+L.offsetParent.scrollLeft):s.left=n.left,r.css(s)},t.__cursorInList__=!1,t._listenter=function(){H.__cursorInList__=!0,H.hoverAutoShow&&(H.toggle=!0)},t._listleave=function(){H.__cursorInList__=!1,H.hoverAutoShow&&(H.toggle=!1)},t._blur=function(){H.__cursorInList__||H.multiple||!H.toggle||(H.toggle=!1)},t.val=function(t){return"undefined"!=typeof t&&("array"!==e.type(t)&&(t=[t]),H.value=t),H.value},t.isActive=function(e){var t=e.value,n=e.enable,a=e.group;return H.multiple?H.value.indexOf(t)>-1&&n&&!a:H.value===t&&n&&!a},t._styleFix=function(t){var n=D.height||200,a=e(H.menuNode),r="";t&&(H.menuHeight="",e(H.dropdownNode).css({height:""})),r=H.dropdownNode.scrollHeight,H.menuWidth=u?H.listWidth:H.listWidth-a.css("borderLeftWidth").replace(c,"$1")-a.css("borderRightWidth").replace(c,"$1"),r>n?(H._disabledScrollbar(!1),r=n,e(H.dropdownNode).css({width:H.menuWidth-H.scrollWidget.getBars()[0].width()})):(H._disabledScrollbar(!0),e(H.dropdownNode).css({width:H.menuWidth})),H.menuHeight=r,H.updateScrollbar(),H.scrollTo(H.activeIndex)},t.updateScrollbar=function(){H.scrollWidget.update()},t.scrollTo=function(t){if(H.dropdownNode){var n=s(H.dropdownNode.firstChild),a=e(n[t]),r=H.menuHeight,o=n.length?a.position().top-e(n[0]).position().top:0,i=n.length?a.height():0,l=H.dropdownNode.scrollTop;(o>l+r-i||l>o+i)&&H.scrollWidget.scrollTo(0,o+i-r)}},t._disabledScrollbar=function(e){H.scrollWidget&&(H.scrollWidget.disabled=!!e)}});return H.$watch("enable",function(e){e||(H.toggle=!1)}),H.$watch("readOnly",function(e){e&&(H.toggle=!1)}),H};d.version="1.0",d.defaults={realTimeData:!1,container:null,width:200,listWidth:200,titleWidth:0,height:200,enable:!0,readOnly:!1,hoverAutoShow:!1,readonlyAttr:null,currentOption:null,data:[],$source:null,textFiled:"text",valueField:"value",value:[],label:"",multiple:!1,listClass:"",title:"",titleClass:"",activeIndex:null,size:1,menuNode:null,dropdownNode:null,scrollWidget:null,position:!0,onSelect:null,onShow:null,onHide:null,onChange:null,$hasDuplex:!1,multipleChange:!1,keyboardEvent:!0,getTemplate:function(e,t){return e},onInit:e.noop};var p=document.documentElement.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){var n=e.outerHTML,a=n.slice(0,n.search(/\/?['"]?>(?![^<]*<['"])/));return new RegExp("\\s"+t+"\\b","i").test(a)};return e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="oni-dropdown"\n     ms-class="oni-state-disabled:!enable"\n     ms-class-1="{{titleClass}}"\n     ms-css-width="{{width}}"\n     ms-class-2="oni-state-focus: focusClass"\n     ms-hover="oni-state-hover"\n     ms-mouseenter="_titleenter"\n     ms-mouseleave="_titleleave"\n     ms-keydown="_keydown"\n     tabindex="0">\n    <div class="oni-dropdown-source">\n        <div class="oni-dropdown-input"\n             ms-attr-title="title"\n             ms-css-width="titleWidth"\n             id="title-MS_OPTION_ID">{{label|sanitize|html}}</div>\n        <div class="oni-dropdown-icon-wrap">\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-up"\n               ms-visible="toggle">&#xf028;</i>\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-down"\n               ms-visible="!toggle">&#xf032;</i>\n        </div>\n    </div>\n</div>\nMS_OPTION_TEMPLATE\n<div class="oni-dropdown"\n     ms-class="oni-dropdown-menu:!multiple"\n     ms-class-1="{{listClass}}"\n     ms-css-width="{{listWidth}}"\n     ms-mouseenter="_listenter"\n     ms-mouseleave="_listleave"\n     ms-visible="toggle||multiple">\n    <div class="oni-dropdown-menu-inner"\n         ms-css-width="menuWidth"\n         ms-css-height="menuHeight"\n         ms-widget="scrollbar,scrollbar-MS_OPTION_ID" id="menu-MS_OPTION_ID">\n        <div class="oni-scrollbar-scroller"\n             id="list-MS_OPTION_ID">\n            <div ms-repeat="data" class="oni-dropdown-item"\n                 ms-click-12="_select($index, $event)"\n                 ms-attr-title="el.title||el.label"\n                 ms-visible="el.toggle"\n                 ms-hover="oni-state-hover: el.enable"\n                 ms-class-1="oni-state-disabled:!el.enable"\n                 ms-class-2="oni-state-active:isActive(el, multipleChange)"\n                 ms-class-4="oni-dropdown-group:el.group"\n                 ms-class-5="oni-dropdown-divider:el.group && !$first"\n                 data-repeat-rendered="repeatRendered"\n                 >{{el.label|sanitize|html}}</div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var a,r;a=[n(2),n(21),n(22),n(23),n(24)],r=function(e,t){function n(t,n){var n=n||document.body;if(n.getElementsByClassName)return n.getElementsByClassName(t);var a=n.getElementsByTagName("*"),r=[];return e.each(a,function(n,a){var o=e(a);o.hasClass(t)&&r.push(a)}),r}function a(e){return Math.round(parseFloat(e))||0}var r,o=[],i=[],l=[],s=e.ui.scrollbar=function(s,c,u){var d=c.scrollbarOptions;d.template=d.getTemplate(t,d);var p=e.define(c.scrollbarId,function(t){e.mix(t,d),t.widgetElement=s,t.draggerHeight=t.draggerWidth="",t.inFocuse=!1,t._position=[],t.rootElement=s,t.viewElement=s,t.$skipArray=["rootElement"],t.dragging=!1;var c,f,h=[];t.$init=function(t){function n(t,n,a,r){e.each(n,function(e,n){h[e].data("oni-scrollbar-needed")&&p._computer(r||function(e){return p._clickComputer(e,t)},n[0],n[1],function(e){e||a.preventDefault()},"breakOutCallbackCannotIgnore")})}function v(e){p.disabled||p.inFocuse&&n(e.wheelDelta>0?"up":"down",b,e)}function m(e){if(!p.disabled){var t=e.keyCode;if(t>32&&41>t&p.inFocuse)if(t in{37:1,39:1,38:1,40:1})n(t in{37:1,38:1}?"up":"down",t in{38:1,40:1}?b:w,e);else{var r=t in{33:1,36:1}?"up":"down";n(r,b,e,function(n){
var o=f[0].scrollTop;if(t in{33:1,36:1}?o&&e.preventDefault():o<n.scrollerH-n.viewH&&e.preventDefault(),t in{36:1,35:1})return{x:0,y:36==t?0:n.draggerparHeight-n.draggerHeight+100};var i=(n.draggerparHeight-n.draggerHeight)*n.viewH/(n.scrollerH-n.viewH);return p._clickComputer(n,r,a(i)||1)})}}}if(!c){c=!0,p.widgetElement.style.position="relative",p.viewElement=p.widgetElement==document.body?document.getElementsByTagName("html")[0]:p.widgetElement,p.viewElement.style.overflow=p.viewElement.style.overflowX=p.viewElement.style.overflowY="hidden",p.widgetElement==document.body&&(p.widgetElement.style.overflow=p.widgetElement.style.overflowX=p.widgetElement.style.overflowY="hidden"),p._position=p.position.split(",");var g=e.parseHTML(d.template);p.widgetElement.appendChild(g),t?t():(e.log("avalon请尽快升到1.3.7+"),e.scan(s,[p].concat(u)),"function"==typeof d.onInit&&d.onInit.call(s,p,d,u));var y=p.widgetElement.childNodes;if(e.each(y,function(t,n){var a=e(n);a.hasClass("oni-scrollbar")||a.hasClass("ui-scrollbar")?h.push(a):(a.hasClass("oni-scrollbar-scroller")||a.hasClass("ui-scrollbar-scroller"))&&(f=a)}),p.position.match(/left|right/g)){var b=[],w=[];e.each(p._position,function(e,t){t.match(/left|right/g)?b.push([e,t]):w.push([e,t])}),p.widgetElement==document.body?(p.inFocuse=!0,o.push(v),i.push(m)):(e.bind(s,"mouseenter",function(e){p.inFocuse=!0,o.push(v),i.push(m)}),e.bind(s,"mouseleave",function(e){p.inFocuse=!1;for(var t=0,n=o.length;n>t;t++)if(o[t]===v){o.splice(t,1),i.splice(t,1);break}})),r||(r=!0,e.bind(document,"mousewheel",function(e){var t=o[o.length-1];t&&t(e)}),e.bind(document,"keydown",function(e){var t=i[i.length-1];t&&t(e)}))}e.bind(s,"mouseenter",function(){e.each(h,function(e,t){p._show("e",!1,t)})}),e.bind(s,"mouseleave",function(){p._hide()}),p.update("init"),f&&l.length&&(e.each(l,function(e,t){t()}),l=[])}},t.$draggableOpts={beforeStart:function(){p.dragging=!0},drag:function(t,n){var r=e(n.element);p._computer(function(e){var t={x:a(r.css("left"))>>0,y:a(r.css("top"))>>0};return t.x==e.draggerparWidth-e.draggerWidth&&(t.x+=100),t.y==e.draggerparHeight-e.draggerHeight&&(t.y+=100),t},r.attr("oni-scrollbar-index"),r.attr("oni-scrollbar-pos"))},handle:function(e,t){return!p.disabled&&this},containment:"parent"},t.$draggableOpts.stop=function(t,n){p.$draggableOpts.drag(t,n),p.dragging=!1,e(n.element).removeClass("oni-state-active")},t.$remove=function(){e.each(h,function(e,t){t[0]&&t[0].parentNode&&t[0].parentNode.removeChild(t[0])})},t._onScroll=function(){"scrolling"==p.show&&e.each(h,function(e,t){p._show("e",!1,t)})},t._show=function(e,t,n){if("scrolling"==p.show){e.stopPropagation&&e.stopPropagation();var a=n.css?n:h[n];a&&(clearTimeout(a.data("oni-scrollbar-hidetimer")),a.css("visibility","visible"),a.css("opacity",1),t||a.data("oni-scrollbar-hidetimer",setTimeout(function(){a.css("opacity",0)},1e3)))}},t._hide=function(t,n){"scrolling"==p.show&&(n&&h[n]?h[n].css("opacity",0):e.each(h,function(e,t){t.css("opacity",0)}))},t.getBars=function(){return h},t.getScroller=function(){return f},t.update=function(t,r,o){if(!p.disabled){if(!f)return l.push(function(){p.update(t,r,o)});var i,s,c,u=e(p.viewElement),d=p.widgetElement===document.body?p.viewElement.clientHeight:a(u.css("height")),v=a(u.css("width")),m=p.viewHeightGetter(u),g=p.viewWidthGetter(u),y=p.position,b={},o=void 0==o?p.scrollTop:o,r=void 0==r?p.scrollLeft:r;p.viewElement!=p.widgetElement&&y.match(/right|left/g)&&e(p.widgetElement).css("height",d);var w=f.width()-f.innerWidth(),x=f.height()-f.innerHeight();if(f.css("height",m+x),f.css("width",g+w),i=f[0].scrollWidth,s=f[0].scrollHeight,c={top:y.match(/top/g)&&i>g,right:y.match(/right/g)&&s>m,bottom:y.match(/bottom/g)&&i>g,left:y.match(/left/g)&&s>m},h.length>1)for(var T=["top","right","bottom","left"],_=0;4>_;_++)b[T[_]]=[(c[_?T[_-1]:T[3]]&&1)>>0,(c[3>_?T[_+1]:T[0]]&&1)>>0],_>1&&(b[T[_]]=b[T[_]].reverse());m=f.innerHeight(),g=f.innerWidth(),e.each(p._position,function(l,u){var y,T=h[l],_=u.match(/left|right/);if(T&&(y=e(n("oni-scrollbar-dragger",T.element)[0])),t&&y&&(y.attr("ms-draggable","$,$draggableOpts"),y.attr("oni-scrollbar-pos",u),y.attr("oni-scrollbar-index",l),e.scan(y[0],p)),!c[u])return void(T&&(T.css("opacity",0),T.css("visibility","hidden"),T.data("oni-scrollbar-needed",!1)));if(T&&(T.data("oni-scrollbar-needed",!0),T.css("visibility","visible"),"scrolling"==p.show||"never"==p.show?T.css("opacity",0):T.css("opacity",1)),T){var C=a(T.css("height")),$=a(T.css("width")),M=C,k=$,A=e(n("oni-scrollbar-draggerpar",T[0])[0]),E=p.showBarHeader?2:0,D=[];if(h.length>1){var O=[],N=b[u];_?(O=[["top",N[0]*k],["height",d-k*(N[0]+N[1])]],D=[["top",E/2*k],["height",d-k*(N[0]+N[1]+E)]]):(O=[["left",N[0]*M],["width",v-M*(N[0]+N[1])]],D=[["left",E/2*M],["width",v-M*(E+N[0]+N[1])]]),e.each(O,function(e,t){T.css.apply(T,t)}),M=T.height(),k=T.width()}else D=_?[["top",k],["height",d-2*k]]:[["left",M],["width",v-2*M]];var S;_?(S="always"==p.show?k:0,f.css("width",g+w-S)):(S="always"==p.show?M:0,f.css("height",m+x-S)),e.each(D,function(e,t){A.css.apply(A,t)}),C=M-E*k,$=k-E*M;var P;if(_){var I=o,L=a(m*C/s);L=p.limitRateV*k>L&&p.limitRateV*k||L,I=0>I?0:I,I=I>s-m?s-m:I,I=a((C-L)*I/(s-m)),I=Math.min(C-L,I),P=[["width","100%"],["height",L],["top",I]],o=o>0?o>s-m+S?s-m+S:o:0}else{var H=r,F=a(g*$/i);F=p.limitRateH*M>F&&p.limitRateH*M||F,H=0>H?0:H,H=H>i-g?i-g:H,H=a(($-F)*H/(i-g)),H=Math.min($-F,H),P=[["height","100%"],["width",F],["left",H]],r=r>0?r>i-g+S?i-g+S:r:0}e.each(P,function(e,t){y.css.apply(y,t)}),t&&(_?p._scrollTo(void 0,o):p._scrollTo(r,void 0)),p.showBarHeader&&(0==o&&_||!_&&0==r?e(n("oni-scrollbar-arrow-up",T[0])[0]).addClass("oni-state-disabled"):e(n("oni-scrollbar-arrow-up",T[0])[0]).removeClass("oni-state-disabled"),o>=A.innerHeight()-y.innerHeight()&&_||!_&&r>=A.innerWidth()-y.innerWidth()?!p.breakOutCallback&&e(n("oni-scrollbar-arrow-down",T[0])[0]).addClass("oni-state-disabled"):e(n("oni-scrollbar-arrow-down",T[0])[0]).removeClass("oni-state-disabled"))}})}},t._arrClick=function(e,t,n,a){p.disabled||p._computer(function(e){return p._clickComputer(e,t)},a,n)},t._clickComputer=function(e,t,n){var n=n||e.step||40,r=a(e.dragger.css("left"))>>0,o=a(e.dragger.css("top"))>>0,i="down"==t?r+n:r-n,l="down"==t?o+n:o-n;return{x:i,y:l}},t._arrDown=function(t,n,a,r,o){if(!p.disabled){var i=this,l=e(i);clearInterval(l.data("mousedownTimer")),clearTimeout(l.data("setTimer"));h[r];return o||l.hasClass("oni-state-disabled")?l.removeClass("oni-state-active"):void l.data("setTimer",setTimeout(function(){l.addClass("oni-state-active"),l.data("mousedownTimer",setInterval(function(){return p._computer(function(e){return p._clickComputer(e,n)},r,a,function(e){e&&(clearInterval(l.data("mousedownTimer")),clearTimeout(l.data("setTimer")))})},120))},10))}},t._barClick=function(t,n,a){if(!p.disabled){var r=e(this);r.hasClass("oni-scrollbar-dragger")||p._computer(function(e){return{x:Math.ceil(t.pageX-e.offset.left-e.draggerWidth/2),y:Math.ceil(t.pageY-e.offset.top-e.draggerHeight/2)}},a,n)}},t._computer=function(t,r,o,i,l){if(!p.disabled){var s=h[r];if(s&&s.data("oni-scrollbar-needed")){var c={},u=o.match(/left|right/g);c.dragger=e(n("oni-scrollbar-dragger",s[0])[0]),c.draggerWidth=a(c.dragger.css("width")),c.draggerHeight=a(c.dragger.css("height")),c.draggerpar=e(c.dragger[0].parentNode),c.draggerparWidth=a(c.draggerpar.css("width")),c.draggerparHeight=a(c.draggerpar.css("height")),c.offset=c.draggerpar.offset(),c.up=e(n("oni-scrollbar-arrow-up",s[0])[0]),c.down=e(n("oni-scrollbar-arrow-down",s[0])[0]),c.viewer=e(p.viewElement),c.viewH=f.innerHeight(),c.viewW=f.innerWidth(),c.scrollerH=f[0].scrollHeight,c.scrollerW=f[0].scrollWidth,c.step=u?40*(c.draggerparHeight-c.draggerHeight)/(c.scrollerH-c.viewH):40*(c.draggerparWidth-c.draggerWidth)/(c.scrollerW-c.viewW),c.step=a(c.step)||1;var d,v=t(c);if(v.x=a(v.x),v.y=a(v.y),u){v.y<0?(v.y=0,c.up.addClass("oni-state-disabled"),d=["v","up"]):c.up.removeClass("oni-state-disabled"),v.y>c.draggerparHeight-c.draggerHeight?(v.y=c.draggerparHeight-c.draggerHeight,d=["v","down"],c.down.addClass("oni-state-disabled")):c.down.removeClass("oni-state-disabled");a((c.scrollerH-c.viewH)*v.y/(c.draggerparHeight-c.draggerHeight))-p.scrollTop;c.dragger.css("top",v.y),p._scrollTo(void 0,a((c.scrollerH-c.viewH)*v.y/(c.draggerparHeight-c.draggerHeight)))}else v.x<0?(v.x=0,d=["h","up"],c.up.addClass("oni-state-disabled")):c.up.removeClass("oni-state-disabled"),v.x>c.draggerparWidth-c.draggerWidth?(v.x=c.draggerparWidth-c.draggerWidth,d=["h","down"],!p.breakOutCallback&&c.down.addClass("oni-state-disabled")):c.down.removeClass("oni-state-disabled"),c.dragger.css("left",v.x),p._scrollTo(a((c.scrollerW-c.viewW)*v.x/(c.draggerparWidth-c.draggerWidth)),void 0)}(!p.breakOutCallback||l)&&i&&i(d),p.breakOutCallback&&p.breakOutCallback(d,p,c)}},t._scrollTo=function(e,t){void 0!=t&&(f[0].scrollTop=t,p.scrollTop=f[0].scrollTop),void 0!=e&&(f[0].scrollLeft=e,p.scrollLeft=f[0].scrollLeft)},t.scrollTo=function(e,n){p.update(!1,e,n),t._scrollTo(e,n)},t._initWheel=function(e,t){"enter"==t?p.inFocuse=!0:p.inFocuse=!1},t._draggerDown=function(t,n){if(!p.disabled){var a=e(this);n?a.addClass("oni-state-active"):a.removeClass("oni-state-active")}},t._stopPropagation=function(e){e.stopPropagation()}});return p.$watch("scrollLeft",function(e,t){p._onScroll(),p.onScroll&&p.onScroll(e,t,"h",p)}),p.$watch("scrollTop",function(e,t){p._onScroll(),p.onScroll&&p.onScroll(e,t,"v",p)}),p};s.defaults={disabled:!1,toggle:!0,position:"right",limitRateV:1.5,limitRateH:1.5,scrollTop:0,scrollLeft:0,show:"always",showBarHeader:!0,draggerHTML:"",breakOutCallback:!1,onInit:e.noop,viewHeightGetter:function(e){return e.innerHeight()},viewWidthGetter:function(e){return e.innerWidth()},getTemplate:function(e,t){return e},onScroll:function(e,t,n,a){},size:"normal",$author:"skipper@123"}}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ms-repeat-pos="_position" class="oni-scrollbar oni-helper-reset oni-helper-clearfix oni-widget"\n     ms-visible="!disabled"\n	 ms-class-100="oni-scrollbar-{{pos}}" \n	 ms-class-101="oni-scrollbar-{{size}} oni-scrollbar-{{pos}}-{{size}}" \n	 ms-class-102="oni-state-disabled:disabled" \n	 ms-mouseenter="_show($event, \'always\', $index)" \n	 ms-visible="toggle">\n	<div ms-if="showBarHeader" class="oni-scrollbar-arrow oni-scrollbar-arrow-up" \n	 ms-click="_arrClick($event, \'up\', pos, $index)" \n	 ms-mousedown="_arrDown($event,\'up\', pos, $index)" \n	 ms-class-100="oni-state-disabled:disabled" \n	 ms-mouseup="_arrDown($event,\'up\', pos, $index,\'release\')" \n	 ms-hover="oni-state-hover oni-scrollbar-arrow-hover"><b class="oni-scrollbar-trangle  oni-scrollbar-trangle-up"></b></div>\n	<div class="oni-scrollbar-draggerpar" ms-click="_barClick($event, pos, $index)">\n		<div class="oni-scrollbar-dragger"\n		ms-attr-data-draggable-axis="pos == \'left\' || pos == \'right\' ? \'y\' : \'x\'" \n		ms-click="_stopPropagation($event)" \n		ms-class-100="oni-state-disabled:disabled" \n		ms-mouseover="_show($event,\'always\',$index)" \n		ms-mousedown="_draggerDown($event, true)" \n		ms-mouseup="_draggerDown($event, false)" \n		ms-mouseout="_draggerDown($event, false)" \n		ms-hover="oni-state-hover"\n		>{{draggerHTML | html}}</div>\n	</div>\n	<div ms-if="showBarHeader" class="oni-scrollbar-arrow oni-scrollbar-arrow-down"\n	 ms-click="_arrClick($event, \'down\', pos, $index)"\n	 ms-mousedown="_arrDown($event,\'down\', pos, $index)" \n	 ms-mouseup="_arrDown($event,\'down\', pos, $index,\'release\')" \n	 ms-class-100="oni-state-disabled:disabled" \n	 ms-hover="oni-state-hover"><b class="oni-scrollbar-trangle oni-scrollbar-trangle-down"></b></div>\n</div>'},function(e,t,n){var a,r;a=[n(2)],r=function(e){function t(e,t){var n="page"+t;return v?e.changedTouches[0][n]:e[n]}function n(e,n,a,r,o){var i=t(e,r);if(a.containment){var l="X"===r?a.containment[0]:a.containment[1],s="X"===r?a.containment[2]:a.containment[3],c=i-("X"===r?a.clickX:a.clickY);l>c?i+=Math.abs(l-c):c>s&&(i-=Math.abs(s-c))}a["page"+r]=i;var u=w[r],d=u.toLowerCase(),p=a["start"+u]+i-a["startPage"+r]+(o?a["end"+u]:0);a[d]=p,a["drag"+r]&&(n.style[d]=p+"px")}function a(){var e=window.event||{};e.returnValue=!1}function r(t,n){if(!t.containment){if(Array.isArray(n.containment))return;return void(n.containment=null)}var a=n.$element.width(),r=n.$element.height();if("window"===t.containment){var o=e(window);return void(n.containment=[o.scrollLeft(),o.scrollTop(),o.scrollLeft()+o.width()-n.marginLeft-a,o.scrollTop()+o.height()-n.marginTop-r])}if("document"===t.containment)return void(n.containment=[0,0,e(document).width()-n.marginLeft,e(document).height()-n.marginTop]);if(Array.isArray(t.containment)){var i=t.containment;return void(n.containment=[i[0],i[1],i[2]-a,i[3]-r])}if("parent"===t.containment||"#"===t.containment.charAt(0)){var l;if(l="parent"===t.containment?n.element.parentNode:document.getElementById(t.containment.slice(1))){var s=e(l).offset();n.containment=[s.left+n.marginLeft,s.top+n.marginTop,s.left+l.offsetWidth-n.marginLeft-a,s.top+l.offsetHeight-n.marginTop-r]}}}var o={ghosting:!1,delay:0,axis:"xy",started:!0,start:e.noop,beforeStart:e.noop,drag:e.noop,beforeStop:e.noop,stop:e.noop,scrollPlugin:!0,scrollSensitivity:20,scrollSpeed:20},i=document.getElementById("avalonStyle"),l=".ui-helper-global-drag *{ -webkit-touch-callout: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.ui-helper-global-drag img{-webkit-user-drag:none; pointer-events:none;}";try{i.innerHTML+=l}catch(s){i.styleSheet.cssText+=l}var c,u=navigator.userAgent,d=/Android/i.test(u),p=/BlackBerry/i.test(u),f=/IEMobile/i.test(u),h=/iPhone|iPad|iPod/i.test(u),v=d||p||f||h;if(v)m="touchstart",g="touchmove",y="touchend";else var m="mousedown",g="mousemove",y="mouseup";var b=e.bindingHandlers.draggable=function(n,a){var i,l,s=n.value.match(e.rword)||[],u=s[0]||"$",d=s[1]||"draggable";if("$"==u||(i=e.vmodels[u])){n.element.removeAttribute("ms-draggable"),i||(i=a.length?a[0]:null);var p=i||{};i&&"object"==typeof i[d]&&(l=i[d],l.$model&&(l=l.$model),p=l);var f=n.element,h=e(f),v=e.mix({},o,l||{},n[d]||{},e.getWidgetData(f,"draggable"));"drag,stop,start,beforeStart,beforeStop".replace(e.rword,function(e){var t=v[e];"string"==typeof t&&"function"==typeof p[t]&&(v[e]=p[t])}),""===v.axis||/^(x|y|xy)$/.test(v.axis)||(v.axis="xy"),c=document.body,h.bind(m,function(n){var a=e.mix({},v,{element:f,$element:h,pageX:t(n,"X"),pageY:t(n,"Y"),marginLeft:parseFloat(h.css("marginLeft"))||0,marginTop:parseFloat(h.css("marginTop"))||0});if(a.startPageX=a.pageX,a.startPageY=a.pageY,v.axis.replace(/./g,function(e){a["drag"+e.toUpperCase()]=!0}),a.dragX||a.dragY||(a.started=!1),"function"==typeof v.beforeStart&&v.beforeStart.call(a.element,n,a),a.handle&&p){var o=p[a.handle];if(o="function"==typeof o?o:a.handle,"function"==typeof o){var i=o.call(f,n,a);if(!i||1!==i.nodeType)return;if(!f.contains(i))return}}C();var l=h.css("position");/^(?:r|a|f)/.test(l)||(f.style.position="relative",f.style.top="0px",f.style.left="0px"),v.delay&&isFinite(v.delay)&&(a.started=!1,setTimeout(function(){a.started=!0},v.delay));var s=h.offset();if(v.ghosting){var u=f.cloneNode(!0);e(u).css("opacity",.7).width(f.offsetWidth).height(f.offsetHeight),a.clone=u,"fixed"!==l&&(u.style.position="absolute",u.style.top=s.top-a.marginTop+"px",u.style.left=s.left-a.marginLeft+"px"),c.appendChild(u)}var d=e(a.clone||a.element);a.startLeft=parseFloat(d.css("left")),a.startTop=parseFloat(d.css("top")),a.endLeft=parseFloat(h.css("left"))-a.startLeft,a.endTop=parseFloat(h.css("top"))-a.startTop,a.clickX=a.pageX-s.left,a.clickY=a.pageY-s.top,r(v,a),b.dragData=a,"start,drag,beforeStop,stop".replace(e.rword,function(e){b[e]=[v[e]]}),b.plugin.call("start",n,a)})}},w={X:"Left",Y:"Top"};b.dragData={},b.start=[],b.drag=[],b.stop=[],b.beforeStop=[],b.plugin={add:function(e,t){for(var n in t){var a=t[n];"function"==typeof a&&Array.isArray(b[n])&&(a.isPlugin=!0,a.pluginName=e+"Plugin",b[n].push(a))}},call:function(t,n,a){var r=b[t];if(Array.isArray(r)&&r.forEach(function(e){("undefined"==typeof e.pluginName?!0:a[e.pluginName])&&e.call(a.element,n,a)}),"stop"===t)for(var o in b)r=b[o],Array.isArray(r)&&r.forEach(function(t){t.isPlugin||e.Array.remove(r,t)})}};var x=new Date-0,T=document.querySelector?12:30;e(document).bind(g,function(e){var t=new Date-x;if(t>T){x=t;var a=b.dragData;if(a.started===!0){e.preventDefault();var r=a.clone||a.element;n(e,r,a,"X"),n(e,r,a,"Y"),b.plugin.call("drag",e,a)}}}),e(document).bind(y,function(e){var t=b.dragData;if(t.started===!0){$();var a=t.element;b.plugin.call("beforeStop",e,t),t.dragX&&n(e,a,t,"X",!0),t.dragY&&n(e,a,t,"Y",!0),t.clone&&c.removeChild(t.clone),b.plugin.call("stop",e,t),b.dragData={}}});var _=document.documentElement,C=function(){e(_).addClass("ui-helper-global-drag")},$=function(){e(_).removeClass("ui-helper-global-drag")};if(window.VBArray&&!("msUserSelect"in _.style)){var M;C=function(){M=c.onselectstart,c.onselectstart=a},$=function(){c.onselectstart=M}}return e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var a,r;a=[n(22),n(27),n(24),n(28),n(13)],r=function(e,t){var n,a=[],r=0,o=t,i=e.ui.slider=function(t,n,i){function l(e){return h>e&&(e=h),e>v&&(e=v),parseFloat(((e-h)/(v-h)*100).toFixed(5))}function s(e){var t=(v-h)*e+h;return t=c(t),parseFloat(t.toFixed(3))}function c(e){var t,n=p.step>0?p.step:1;try{t=n.toString().split(".")[1].length}catch(a){t=0}var r=Math.pow(10,t),o=(e-h)*r%n*r,i=(e-h)/n;return e=(h*r+(2*o>=n?n*r*Math.ceil(i):n*r*Math.floor(i)))/r}function u(e,t,n){if(isFinite(n))var a=n;else{var o=f?"left":"top",i=t[o]+parseFloat(t.$element.css("border-top-width")),c=i/C.$pixelTotal;f||(c=Math.abs(1-c)),c>.999&&(c=1),.001>c&&(c=0),a=s(c)}if(y){if(0===r){var u=C.values[1];a>u&&(a=u)}else u=C.values[0],u>a&&(a=u);C.values[r]=a,C["percent"+r]=l(a),C.value=C.values.join(),C.percent=l(C.values[1]-C.values[0]+h)}else C.value=a,C.percent=l(a)}var d=e(t),p=n.sliderOptions,f="horizontal"===p.orientation,h=p.min,v=p.max,m=p.range,g=p.values,y=m===!0,b=Number(p.value);if(isNaN(b)){var w=e.getModel(p.value,i);w&&(b=w[1][w[0]])}p.template=p.getTemplate(o,p),"min"===m&&g?b=g[0]:"max"===m&&g&&(b=g[1]),b||"min"!==m||g||0===b?b||"max"!==m||g||0===b||(b=v||b):b=h||b,1===p.step||/\D/.test(p.step)||(b=c(b)),y&&(g=Array.isArray(g)?1===g.length?[g[0],g[0]]:g.concat():[h,v]);var x=p.template.replace(/MS_OPTION_WIDTHORHEIGHT/g,f?"width":"height").replace(/MS_OPTION_LEFTORBOTTOM/g,f?"left":"bottom"),T=e.parseHTML(x).firstChild,_=[];t.parentNode.insertBefore(T,t.nextSibling),d.addClass("oni-helper-hidden-accessible");var C=e.define(n.sliderId,function(n){e.mix(n,p),n.$skipArray=["template","rootElement","widgetElement","step","_dragEnd"],n.rootElement=T,n.widgetElement=t,n.step=p.step>0?p.step:1,n.disabled=t.disabled,n.percent=l(y?g[1]-g[0]+h:b),n.percent0=y?l(g[0]):0,n.percent1=y?l(g[1]):0,n.value=y?g.join():b,n.values=g,n.$axis=f?"x":"y",n.$valueMin=h,n.$valueMax=v,n.$twohandlebars=y,n.$percent2Value=s,n.$pixelTotal=0,n._dragEnd=!1,n.dragstart=function(e,t){C.$pixelTotal=f?T.offsetWidth:T.offsetHeight,a=_,t.started=!C.disabled,t.dragX=t.dragY=!1,r=_.indexOf(t.element),t.$element.addClass("oni-state-active"),p.onDragStart.call(null,e,t)},n.dragend=function(e,t,n){t.$element.removeClass("oni-state-active"),p.onDragEnd.call(null,e,t),C._dragEnd=!1},n.drag=function(e,t,n){u(e,t,n),p.onDrag.call(null,C,t),C._dragEnd=!0},n.$init=function(){for(var n,a=T.getElementsByTagName("b"),r=0;n=a[r++];){if(n.sliderModel=C,!y&&e(n).hasClass("hander___flag")){_.push(n),e(n).removeClass("hander___flag");break}y&&!e(n).hasClass("hander___flag")&&_.push(n)}e(t).css({display:"none",height:0,width:0,padding:0}),e(T).css("width",C.width),e.scan(T,[C].concat(i)),"function"==typeof p.onInit&&p.onInit.call(t,C,p,i)},n.$remove=function(){T.innerHTML=T.textContent="",T.parentNode.removeChild(T)}});return C.$watch("value",function(e){e=c(Number(e)||0),!e||e<Number(C.min)?e=0:e>Number(C.max)&&(e=C.max),C.value=e,C.percent=l(e),C._dragEnd||p.onDragEnd.call(null,n)}),C};return i.defaults={max:100,min:0,width:-1,orientation:"horizontal",range:!1,step:1,value:0,values:null,disabled:!1,onDragStart:e.noop,onDrag:e.noop,onDragEnd:e.noop,getTemplate:function(e,t){return e}},e(document).bind("click",function(t){t.stopPropagation();var r=t.target,o=a.indexOf(r);-1!==o?(n&&n.removeClass("oni-state-focus"),n=e(r).addClass("oni-state-focus")):n&&(n.removeClass("oni-state-focus"),n=null)}),e(document).bind("keydown",function(e){if(n){var t,o=n[0].sliderModel,i=1==a.length?o.percent:o["percent"+r],l=o.$percent2Value(i/100);switch(e.which){case 34:case 39:case 38:t=Math.min(l+1,o.$valueMax);break;case 33:case 37:case 40:t=Math.max(l-1,o.$valueMin);break;case 36:t=o.$valueMin;break;case 35:t=o.$valueMax}isFinite(t)&&o.drag(e,{},t)}}),e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="oni-slider oni-widget oni-corner-all"\n     ms-class-1 = "oni-slider-horizontal: orientation===\'horizontal\'"\n     ms-class-2 = "oni-slider-vertical: orientation !== \'horizontal\'"\n     ms-class-oni-state-disabled="disabled"> \n    <div class="oni-slider-range oni-widget-header oni-corner-all" \n         ms-class-1 = "oni-slider-range-min:range===\'min\'"\n         ms-class-2 = "oni-slider-range-max:range===\'max\'"\n         ms-css-MS_OPTION_WIDTHORHEIGHT = "{{range === \'max\' ? 100-percent : percent}}%"\n         ms-css-MS_OPTION_LEFTORBOTTOM = "{{ $twohandlebars ? percent0 : \'auto\'}}%"\n         ms-if = "range"\n         style="width: 100%;">\n    </div>\n    <b  class="oni-slider-handle  oni-corner-all hander___flag"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n        ms-if = "!$twohandlebars"\n        ></b>\n    <b  class="oni-slider-handle  oni-corner-all"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent0}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n        ms-if = "$twohandlebars"\n        ></b>\n    <b  class="oni-slider-handle  oni-corner-all"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent1}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n     \n        ms-if = "$twohandlebars"\n        ></b>\n</div>'},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var a,r;a=[n(2),n(32),n(24),n(33)],r=function(e,t){function n(e,t){for(var n={},a=0,r=e.length;r>a;a++){var o=e[a];n[o]={action:"del",el:o}}for(var a=0,i=t.length;i>a;a++){var o=t[a];n[o]?n[o]={action:"retain",el:o}:n[o]={action:"add",el:o}}var l=[];for(var a in n)l.push({action:n[a].action,el:n[a].el});l.sort(function(e,t){return e.el-t.el}),l.forEach(function(e,t){e.index=t});for(var o,s=[],a=0;o=l[a++];)switch(o.action){case"add":e.splice(o.index,0,o.el);break;case"del":s.unshift(o)}for(var o,a=0;o=s[a++];)e.splice(o.index,1)}function a(e){var t=e.currentPage,n=Math.ceil((e.totalItems||0)/e.perPages),a=[],r=e.showPages,o=t,i=t;if(e.totalPages=n,r>=n)for(var l=1;n>=l;l++)a.push(l);else for(a.push(t);;){if(a.length>=r)break;if(o>1&&a.unshift(--o),a.length>=r)break;n>i&&a.push(++i)}return e.firstPage=a[0]||1,e.lastPage=a[a.length-1]||1,e.showFirstOmit=e.firstPage>2,e.showLastOmit=e.lastPage<n-1,a}var r=e.ui.pager=function(o,i,l){var s=i.pagerOptions,c=s.options;Array.isArray(c)?s.options=c.map(function(e){var t={};switch(typeof e){case"number":case"string":return t.value=e,t.text=e,t;case"object":return e}}):s.options=[],l.cb&&(t=t.replace(/ms-title/g,"ms-attr-title")),s.template=s.getTemplate(t,s),s._currentPage=s.currentPage;var u=e.define(i.pagerId,function(t){e.mix(t,s,{regional:r.defaultRegional}),t.widgetElement=o,t.rootElement={},t.$skipArray=["showPages","rootElement","widgetElement","template","ellipseText","alwaysShowPrev","alwaysShowNext"],t.$init=function(n){var a=s.template;o.style.display="none",setTimeout(function(){o.innerHTML=a,t.rootElement=o.getElementsByTagName("*")[0],o.style.display="block",n?n():(e.log("avalon请尽快升到1.3.7+"),e.scan(o,[u].concat(l)),"function"==typeof s.onInit&&s.onInit.call(o,u,s,l))},100)},t.$remove=function(){o.innerHTML=o.textContent=""},t.jumpPage=function(e,r){e.preventDefault();var i=-1===this.className.indexOf("state-disabled");if(i&&r!==t.currentPage){switch(r){case"first":t.currentPage=1;break;case"last":t.currentPage=t.totalPages;break;case"next":t.currentPage++,t.currentPage>t.totalPages&&(t.currentPage=t.totalPages);break;case"prev":t.currentPage--,t.currentPage<1&&(t.currentPage=1);break;default:t.currentPage=r}t.onJump.call(o,e,t),n(t.pages,a(t))}},t.$watch("totalItems",function(){n(t.pages,a(t))}),t.$watch("perPages",function(e){t.currentPage=1,n(t.pages,a(t))}),t.$watch("currentPage",function(e){u._currentPage=e,n(t.pages,a(t))}),t.isShowPrev=function(){var e=t.alwaysShowPrev,n=t.firstPage;return e||1!==n},t.isShowNext=function(){var e=t.alwaysShowNext,n=t.lastPage,a=t.totalPages;return e||n!==a},t.changeCurrentPage=function(e,n){if("keyup"===e.type){if(n=this.value,13!==e.keyCode)return}else n=u._currentPage;n=parseInt(n,10)||1,n>u.totalPages||1>n||(u.currentPage=n,u.pages=a(u),u.onJump.call(o,e,t))},t.pages=[],t.getPages=a,t.setRegional=function(e){u.regional=e},t._getTotalPages=function(e){var t=u.regional,n=[t.totalText,e];return e>1?n.push(t.pagesText):n.push(t.pageText),n=n.concat([" ",t.jumpToText,t.numberText]),n.join("")},t.getTitle=function(e,t,n){var a=u.regional;switch(e){case"first":return 1==t?a.currentText:a.jumpToText+" "+a.firstText;case"prev":return a.jumpToText+" "+a.prevText;case"next":return a.jumpToText+" "+a.nextText;case"last":return t==n?a.currentText:a.jumpToText+" "+a.lastText;default:return e===t?a.currentText:a.jumpToText+a.numberText+" "+e+a.pageText}}});return u.pages=a(u),u};return r.regional=[],r.regional["zh-CN"]={prevText:"上一页",nextText:"下一页",confirmText:"确定",totalText:"共",pagesText:"页",pageText:"页",toText:"到",jumpToText:"跳转到",currentText:"当前页",firstText:"第一页",lastText:"最后一页",numberText:"第"},r.defaultRegional=r.regional["zh-CN"],r.defaults={perPages:10,showPages:10,currentPage:1,_currentPage:1,totalItems:200,totalPages:0,pages:[],nextText:">",prevText:"<",ellipseText:"…",firstPage:0,lastPage:0,alwaysShowNext:!1,alwaysShowPrev:!1,showFirstOmit:!1,showLastOmit:!1,showJumper:!1,getTemplate:function(e,t){return e},options:[],onJump:function(e,t){}},e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="oni-pager" onselectstart="return false;" unselectable="on" ms-visible="!!totalPages">\n    <span class="oni-pager-prev"\n          ms-class="oni-state-disabled:firstPage==1"\n          ms-if="isShowPrev()"\n          ms-attr-title="getTitle(\'prev\')" \n          ms-click="jumpPage($event,\'prev\')" \n          ms-text="prevText"\n          ></span>\n    <span class="oni-pager-item"\n          ms-visible="firstPage!==1" \n          ms-attr-title="getTitle(\'first\', currentPage)" \n          ms-click="jumpPage($event,\'first\')" \n          ms-class-oni-state-active="currentPage == 1"\n          ms-hover="oni-state-hover">1</span>\n    <span class=\'oni-pager-omit\'\n          ms-if="showFirstOmit" \n          ms-text="ellipseText"\n          ></span>\n    <span  class="oni-pager-item" \n           ms-repeat="pages" \n           ms-attr-title="getTitle(el, currentPage)"\n           ms-hover="oni-state-hover"\n           ms-click="jumpPage($event,el)"\n           ms-class-oni-state-active="el == currentPage" \n           ms-text="el"\n           ></span>\n    <span class="oni-pager-omit"\n          ms-if="showLastOmit" \n          ms-text="ellipseText"\n          ></span>\n    <span class="oni-pager-item "\n          ms-visible="lastPage!==totalPages" \n          ms-attr-title="getTitle(\'last\', currentPage, totalPages)" \n          ms-hover="oni-state-hover" \n          ms-click="jumpPage($event,\'last\')"  \n          ms-text="totalPages"\n          ></span>\n    <span class="oni-pager-next"\n          ms-if="isShowNext()" \n          ms-attr-title="getTitle(\'next\')"\n          ms-click="jumpPage($event,\'next\')" \n          ms-class="oni-state-disabled:lastPage==totalPages"\n          ms-text="nextText"\n          ></span>\n    <div class="oni-pager-jump" ms-if="showJumper">\n        <span class="oni-pager-text" ms-html="_getTotalPages(totalPages)"></span>\n        <div class="oni-pager-textbox-wrapper">\n            <input class="oni-pager-textbox" ms-duplex="_currentPage" data-duplex-event="change" ms-keyup="changeCurrentPage">\n        </div>\n        <span class="oni-pager-text">{{regional.pageText}}</span>\n        <button class="oni-pager-button" ms-click="changeCurrentPage" >{{regional.confirmText}}</button>\n    </div>\n</div>\n'},function(e,t){},function(e,t,n){var a,r;a=[n(13),n(35),n(36),n(24),n(38),n(22)],r=function(e,t){function n(t){var n=t;if(n?"string"===e.type(n)&&(n=e.vmodels[n]):n=e.define("dialogVM"+setTimeout("1"),function(e){}),!n)throw new Error("您查找的"+n+"不存在");return!e.isPlainObject(n)||n.$id||n.$accessors||(n=e.define("dialogVM"+setTimeout("1"),function(n){e.mix(n,t)})),[].concat(n)}function a(e,t,n,a){var r,o=null;return function(){var i=this,l=+new Date;clearTimeout(o),r||(r=l),l-r>=n?(e.apply(i,a),r=l):o=setTimeout(function(){e.apply(i,a)},t)}}function r(t,n,a){var r,o,i,l,s,c,d,p=e(u),v=e(f),g=e(n),y=0,b=0;if(t.toggle&&(d=document.compatMode&&"css1compat"==document.compatMode.toLowerCase()?document.documentElement:document.body,r=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth,o=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight,s=document.body.scrollTop+document.documentElement.scrollTop,c=d.scrollLeft,i=n.offsetWidth,l=n.offsetHeight,y=o>l?(o-l)/2:0,b=r>i?(r-i)/2+c:0,o>l&&r>i?m||(t.position="fixed"):m||(t.position="absolute"),!a||"fixed"!=t.position)){if("absolute"===t.position){if(h.length>1)for(var w=0;w<h.length-1;w++)h[w].widgetElement.style.display="none";p.css({height:o,width:r,top:s,position:"absolute"}),v.css({height:o,width:r,top:s,overflow:"auto",position:"absolute"})}else{if(h.length>1)for(var w=0;w<h.length-1;w++)h[w].widgetElement.style.display="block";p.css({height:"auto",width:"auto",top:0,position:"fixed"}),v.css({height:"auto",width:"auto",top:0,position:"static"})}g.css({left:b,top:y})}}function o(){for(var t,n,a=document.body.children,r=10,o=0;n=a[o++];)if(1===n.nodeType){if(n===u)continue;t=~~e(n).css("z-index"),t&&(r=Math.max(r,t))}return r+1}function i(){var e=document.createElement('<iframe src="javascript:\'\'" style="position:absolute;top:0;left:0;bottom:0;margin:0;padding:0;right:0;zoom:1;width:'+u.style.width+";height:"+u.style.height+";z-index:"+(u.style.zIndex-1)+';"></iframe>');return document.body.appendChild(e),e}var l=t,s=l.split("MS_OPTION_WIDGET"),c=s[0],u=e.parseHTML(c).firstChild,d=!1,p=l.split("MS_OPTION_LAYOUT_SIMULATE")[1],f=e.parseHTML(p).firstChild,h=[],v=0,m=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6"),g=null,y=document.compatMode&&"css1compat"==document.compatMode.toLowerCase()?document.documentElement:document.body,b=e.ui.dialog=function(t,s,c){v++;var p=s.dialogOptions;p.type=p.type.toLowerCase(),p.template=p.getTemplate(l,p);var b=p.template.split("MS_OPTION_FOOTER"),w=b[0].split("MS_OPTION_CONTENT"),x=w[0].split("MS_OPTION_HEADER"),T=x[0].split("MS_OPTION_INNERWRAPPER"),_=w[1],C=x[1],$=b[1].split("MS_OPTION_LAYOUT_SIMULATE")[0],M=T[1],k="",A="",E=e(t),D=p.onDraftClick;
onDraftClickVM=null,onConfirm=p.onConfirm,onConfirmVM=null,onCancel=p.onCancel,onCancelVM=null,onOpen=p.onOpen,onOpenVM=null,onClose=p.onClose,onCloseVM=null,toggleClose=!0,position=m?"absolute":"fixed","string"==typeof onConfirm&&(onConfirmVM=e.getModel(onConfirm,c),p.onConfirm=onConfirmVM&&onConfirmVM[1][onConfirmVM[0]]||e.noop),"string"==typeof D&&(onDraftClickVM=e.getModel(D,c),p.onDraftClick=onDraftClickVM&&onDraftClickVM[1][onDraftClickVM[0]]||e.noop),"string"==typeof onCancel&&(onCancelVM=e.getModel(onCancel,c),p.onCancel=onCancelVM&&onCancelVM[1][onCancelVM[0]]||e.noop),"string"==typeof onClose&&(e.log("ms-widget='dialog' data-dialog-on-close 此用法已经被废弃"),onCloseVM=e.getModel(onClose,c),p.onClose=onCloseVM&&onCloseVM[1][onCloseVM[0]]||e.noop),"string"==typeof onOpen&&(onOpenVM=e.getModel(onOpen,c),p.onOpen=onOpenVM&&onOpenVM[1][onOpenVM[0]]||e.noop),$=p.getFooter($,p);var O=e.define(s.dialogId,function(l){e.mix(l,p),l.$skipArray=["widgetElement","template","container","modal","zIndexIncrementGlobal","initChange","content"],l.widgetElement=t,l.position=position,l.showClose="alert"===l.type?!1:l.showClose,l.initChange=!0,l._confirm=function(e){if("function"!=typeof O.onConfirm)throw new Error("onConfirm必须是一个回调方法");O.onConfirm.call(e.target,e,O)!==!1&&O._close(e)},l._draftClick=function(e){if("function"!=typeof O.onDraftClick)throw new Error("onDraftClick必须是一个回调方法");O.onDraftClick.call(e.target,e,O)!==!1&&O._close(e)},l._open=function(n){var a=0,o=document.getElementsByTagName("select").length,l=O.zIndex;e.Array.ensure(h,O),a=h.length,a&&(O.modal&&e(u).css("display","block"),e(f).css("display","block")),u.style.zIndex=2*a+l-1,f.style.zIndex=2*a+l-1,t.style.zIndex=2*a+l,n||(document.documentElement.style.overflow="hidden",r(O,t),m&&o&&null===g&&O.modal?g=i():m&&o&&O.modal&&(g.style.display="block",g.style.width=u.style.width,g.style.height=u.style.height,g.style.zIndex=u.style.zIndex-1),O.onOpen.call(t,O))},l._close=function(n){e.Array.remove(h,l);var a=h.length,o=O.zIndex,i=a&&h[a-1];if(n&&(toggleClose=!1),O.toggle=!1,!i||!i.modal)return e(u).css("display","none"),e(f).css("display","none"),null!==g&&(g.style.display="none"),document.documentElement.style.overflow="",void O.onClose.call(t,O);e(u).css("display","block"),e(f).css("display","block"),i.widgetElement.style.display="block",r(i,i.widgetElement);var s=2*a+o-1;u.style.zIndex=s,f.style.zIndex=s,g&&(g.style.zIndex=s-1),O.onClose.call(t,O)},l._cancel=function(e){if("function"!=typeof O.onCancel)throw new Error("onCancel必须是一个回调方法");O.onCancel.call(e.target,e,O)!==!1&&O._close(e)},l.setContent=function(t,n,a){var r=a?a:[O].concat(c);return k=t,A.innerHTML=k,n||e.scan(A,r),O},l.setTitle=function(e){return O.title=e,O},l.setModel=function(e){return e.$content&&O.setContent(e.$content,e.noScan,[O].concat(n(e)).concat(c)),e.$title&&(O.title=e.$title),O},l._renderView=function(){var n=null;t.setAttribute("ms-css-width","width"),A=e.parseHTML(_).firstChild,k=t.innerHTML||O.content,t.innerHTML="",A.innerHTML=k,n=e.parseHTML(M).firstChild,n.innerHTML=C,n.appendChild(A),n.appendChild(e.parseHTML($)),t.appendChild(n),d||(document.body.appendChild(u),document.body.appendChild(f),d=!0)},l.$init=function(n){var i=O.container,s=y.clientHeight,u=document.body,d=("object"===e.type(i)&&1===i.nodeType&&u.contains(i)?i:document.getElementById(i))||u,h=e.ui.dialog.defaults;h.zIndex||(h.zIndex=o(),O.zIndex=h.zIndex),e(u).height()<s&&e(u).css("min-height",s),O.draggable&&(E.attr("ms-draggable",""),O.draggable={handle:function(e){var t=e.target;do{if("oni-dialog-header"===t.className)return t;if("oni-dialog"===t.className)return}while(t=t.parentNode)}}),O.zIndex=O.zIndex+O.zIndexIncrementGlobal,O.title=O.title||"&nbsp;",E.addClass("oni-dialog"),t.setAttribute("ms-visible","toggle"),t.setAttribute("ms-css-position","position"),l._renderView(),u.contains(f)&&u==d?f.appendChild(t):d.appendChild(t),t.resizeCallback=e(window).bind("resize",a(r,50,100,[O,t])),t.scrollCallback=e(window).bind("scroll",a(r,50,100,[O,t,!0])),e.scan(t,[O].concat(c)),n?n():(e.log("avalon请尽快升到1.3.7+"),e.scan(t,[O].concat(c)),"function"==typeof p.onInit&&p.onInit.call(t,O,p,c))},l.$remove=function(){v--,t.innerHTML="",e.unbind(window,"resize",t.resizeCallback),e.unbind(window,"scroll",t.scrollCallback),v||(u.parentNode.removeChild(u),u.parentNode.removeChild(f),d=!1)},l.$watch("toggle",function(e){e?O._open():toggleClose===!1?toggleClose=!0:O._close()}),l.$watch("zIndex",function(e){O.initChange?O.initChange=!1:O._open(!0)})});return O};return b.version=1,b.defaults={width:480,title:"&nbsp;",draggable:!1,type:"confirm",hasDraft:!1,content:"",onDraftClick:e.noop,onConfirm:e.noop,onOpen:e.noop,onCancel:e.noop,onClose:e.noop,setTitle:e.noop,setContent:e.noop,setModel:e.noop,showClose:!0,toggle:!1,widgetElement:"",container:"body",confirmName:"确定",cancelName:"取消",getTemplate:function(e,t){return e},getFooter:function(e){return e},modal:!0,zIndex:0,zIndexIncrementGlobal:0},e(window).bind("keydown",function(e){var t=e.which,n=h.length;27===t&&n&&(h[n-1].toggle=!1)}),e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="oni-dialog-layout"></div>\nMS_OPTION_WIDGET\n<div ms-widget="dialog,MS_OPTION_ID,MS_OPTION_OPTS" ms-css-position="position">MS_OPTION_DIALOG_CONTENT</div>\nMS_OPTION_INNERWRAPPER\n<div class="oni-dialog-inner"></div>\nMS_OPTION_HEADER\n<div class="oni-dialog-header">\n    <div class="oni-dialog-close" ms-click="_close" ms-if="showClose">\n        <i class="oni-icon oni-icon-times">&#xf003;</i>\n    </div>\n    <div class="oni-dialog-title">{{ title|html }}</div>\n</div>\nMS_OPTION_CONTENT\n<div class="oni-dialog-content"></div>\nMS_OPTION_FOOTER\n<div class="oni-dialog-footer oni-helper-clearfix">\n    <div class="oni-dialog-btns">\n        <button ms-widget="button" ms-if="hasDraft" data-button-color="success" ms-hover="oni-state-hover" ms-click="_draftClick">{{draftName}}</button>\n        <button ms-widget="button"  data-button-color="success" ms-hover="oni-state-hover" ms-click="_confirm">{{confirmName}}</button>\n        <button ms-widget="button" ms-if="type ==\'confirm\'" ms-click="_cancel">{{cancelName}}</button>\n    </div>\n</div>\nMS_OPTION_LAYOUT_SIMULATE\n<div></div>'},function(e,t,n){var a,r;a=[n(2),n(24),n(37)],r=function(e){function t(t,a){var r,o=n.concat(),i=!1,l=a.icon||"",s=a.corner;if(a.label=a.label||"",s&&(o.push("oni-corner-all"),(s=parseInt(s))&&(t.style.borderRadius=s+"px")),a.size&&o.push("oni-button-"+a.size),a.color&&o.push("oni-button-"+a.color),a.disabled&&o.push("oni-state-disabled"),e(t).addClass(o.join(" ")),"input"===a.elementType&&a.label)return void e(t).val(a.label);switch(a.type){case"text":r="<span class='oni-button-text'>"+a.label+"</span>";break;case"labeledIcon":i=!0;case"icon":switch(a.iconPosition){case"left":r="<i class='oni-icon oni-icon-left'>"+l.replace(/\\/g,"")+"</i><span class='oni-button-text oni-button-text-right"+(i?"":" oni-button-text-hidden")+"'>"+a.label+"</span>";break;case"right":r="<span class='oni-button-text oni-button-text-left"+(i?"":" oni-button-text-hidden")+"'>"+a.label+"</span><i class='oni-icon oni-icon-right'>"+l.replace(/\\/g,"")+"</i>";break;case"left-right":var c=l&&l.split("-")||["",""],u=c[0],d=c[1];r="<i class='oni-icon oni-icon-left'>"+u.replace(/\\/g,"")+"&nbsp;</i><span class='oni-button-text oni-button-text-middle"+(i?"":" oni-button-text-hidden")+"'>"+a.label+"</span><i class='oni-icon oni-icon-right'>&nbsp;"+d.replace(/\\/g,"")+"</i>"}}t.innerHTML=r}var n=["oni-button","oni-widget","oni-state-default"],a=e.ui.button=function(n,a,r){function o(e){l.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}var i,l=a.buttonOptions,s=e(n);i={$init:function(){var a=l.data,i="",c=l.label,u=0,d=n.tagName.toLowerCase();if(l.groups&&a.length>1){var p="";return a.forEach(function(e,t){var n="<span ms-widget='button'";void 0!==e.type&&(n+=" data-button-type='"+e.type+"'"),void 0!==e.iconPosition&&(n+=" data-button-icon-position='"+e.iconPosition+"'"),void 0!==e.icon&&(n+=" data-button-icon='"+e.icon+"'"),void 0!==e.color&&(n+=" data-button-color='"+e.color+"'"),void 0!==e.size&&(n+=" data-button-size='"+e.size+"'"),void 0!==e.disabled&&(n+=" data-button-disabled='"+e.disabled+"'"),void 0!==e.label&&(n+=" data-button-label='"+e.label+"'"),n+=">"+(e.text||"")+"</span>",p+=n}),n.innerHTML=p,n.setAttribute("ms-widget","buttonset"),"vertical"==l.direction&&n.setAttribute("data-buttonset-direction","vertical"),l.corner||n.setAttribute("data-buttonset-corner",l.corner),l.width&&n.setAttribute("data-buttonset-width",parseInt(l.width)),void e.scan(n,r)}"boolean"!=typeof l.disabled?n.disabled=!!l.disabled:n.disabled=l.disabled,"input"===d&&(i="input"),(u=parseInt(l.width))&&(n.style.width=u+"px"),s.bind("mousedown",function(e){o(e),s.addClass("oni-state-active")}),s.bind("mouseup",function(e){o(e),s.removeClass("oni-state-active")}),s.bind("blur",function(){s.removeClass("oni-state-active"),s.removeClass("oni-state-focus")}),s.bind("focus",function(){s.addClass("oni-state-focus")}),l.label||(c="input"===i?n.value:n.innerHTML),l.elementType=i,l.label=c,t(n,l),e.scan(n,r)}},i.$init()};return e.ui.buttonset=function(t,n,a){var r=n.buttonsetOptions,o=r.corner,i=r.direction,l=e(t);o=void 0!==o?o:!0;var s={$init:function(){var s=[];s.push("oni-buttonset"),firstButtonClass="oni-corner-left",lastButtonClass="oni-corner-right",children=t.childNodes,buttons=[],buttonWidth=r.width,firstElement=!0;for(var c,u=0;c=children[u++];)1===c.nodeType&&(c.setAttribute("data-button-corner","false"),buttons.push(c),firstElement&&(e(c).addClass("oni-button-first"),firstElement=!1));var d=buttons.length;return d&&o&&("vertical"===i&&(firstButtonClass="oni-corner-top",lastButtonClass="oni-corner-bottom"),e(buttons[0]).addClass(firstButtonClass),e(buttons[d-1]).addClass(lastButtonClass)),"vertical"===i&&s.push("oni-buttonset-vertical"),l.addClass(s.join(" ")),n.buttons=buttons,e.scan(t,a),(buttonWidth=parseInt(buttonWidth))?void function(t){var n=[].concat(buttons);setTimeout(function(){for(var a=0;button=n[a++];){var r=e(button),o=button.tagName.toLowerCase();"input"===o||"button"===o?button.style.width=t+"px":button.style.width=t-parseInt(r.css("border-left-width"))-parseInt(r.css("border-right-width"))-2*parseInt(r.css("padding-left"))+"px"}},10)}(buttonWidth):void function(t){var n=0,a=0;t=t.concat(),n=setInterval(function(){for(var r,o,i=0,l=0;o=t[l++];)i=Math.max(i,e(o).outerWidth());if(i===a){a+=1;for(var o,l=0;o=t[l++];){var s=o.tagName.toLowerCase(),r=e(o);"input"===s||"button"===s?o.style.width=a+"px":o.style.width=a-parseInt(r.css("border-left-width"))-parseInt(r.css("border-right-width"))-2*parseInt(r.css("padding-left"))+"px"}return void clearInterval(n)}a=i},100)}(buttons)}};s.$init()},a.version=1,a.defaults={groups:!1,direction:"",data:[],type:"text",iconPosition:"left",icon:"",size:"",color:"",corner:!0,style:"",disabled:!1,label:"",width:""},e}.apply(t,a),!(void 0!==r&&(e.exports=r))},function(e,t){},function(e,t){},function(e,t,n){var a,r;a=[n(2),n(7)],r=function(e){function t(e){if(/^\d{15}$/.test(e))return!0;if(/^\d{17}[0-9xX]$/.test(e)){for(var t="1,0,x,9,8,7,6,5,4,3,2".split(","),n="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(","),a=e.toLowerCase().split(""),r=0,o=0;17>o;o++)r+=n[o]*a[o];return t[r%11]==a[17]}}function n(e){if("string"==typeof e&&e){var t=e.split("-");if(3===t.length&&4===t[0].length){var n=~~t[0],a=~~t[1]-1,r=~~t[2],o=new Date(n,a,r);return o.getFullYear()===n&&o.getMonth()===a&&o.getDate()===r}}return!1}function a(e){if(e.target)return e;var t={};for(var n in e)t[n]=e[n];var a=t.target=e.srcElement;if(0===e.type.indexOf("key"))t.which=null!=e.charCode?e.charCode:e.keyCode;else if(/mouse|click/.test(e.type)){var r=a.ownerDocument||document,o="BackCompat"===r.compatMode?r.body:r.documentElement;t.pageX=e.clientX+(o.scrollLeft>>0)-(o.clientLeft>>0),t.pageY=e.clientY+(o.scrollTop>>0)-(o.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}function r(){var e=this.data||{};return this.message.replace(u,function(t,n){return null==e[n]?"":e[n]})}if(!e.duplexHooks)throw new Error("你的版本少于avalon1.3.7，不支持ms-duplex2.0，请使用avalon.validation.old.js");var o=/^([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+@([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+\.[A-Z]{2,3}$/i,i=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,l=/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i,s={cm:/^(?:0?1)((?:3[56789]|5[0124789]|8[278])\d|34[0-8]|47\d)\d{7}$/,cu:/^(?:0?1)(?:3[012]|4[5]|5[356]|8[356]\d|349)\d{7}$/,ce:/^(?:0?1)(?:33|53|8[079])\d{8}$/,cn:/^(?:0?1)[3458]\d{9}$/};e.mix(e.duplexHooks,{trim:{get:function(e,t){return"password"!==t.element.type&&(e=String(e||"").trim()),e}},required:{message:"该项为必填项",get:function(e,t,n){return n(""!==e),e}},norequired:{message:"非必填项可以不填",get:function(e,t,n){return n(!0),e}},"int":{message:"必须填入整数",get:function(e,t,n){return n(/^\-?\d+$/.test(e)),e}},phone:{message:"输入的手机号不是正确的手机号码",get:function(e,t,n){var a=!1;e=String(e||"").trim();for(var r in s)if(s[r].test(e)){a=!0;break}return n(a),e}},decimal:{message:"必须是金额,保留到小数点后两位",get:function(e,t,n){return n(/^([1-9]\d*|0)(\.\d{1,2})?$/.test(e)),e}},alpha:{message:"必须是字母",get:function(e,t,n){return n(/^[a-z]+$/i.test(e)),e}},alpha_numeric:{message:"必须为字母或数字",get:function(e,t,n){return n(/^[a-z0-9]+$/i.test(e)),e}},tele:{message:"请输入正确格式的电话号码",get:function(e,t,n){return n(/^(^0\d{2}-?\d{8}$)|(^0\d{3}-?\d{7}$)|(^\(0\d{2}\)-?\d{8}$)|(^\(0\d{3}\)-?\d{7}$)$/.test(e)),e}},alpha_dash:{message:"必须为字母或数字及下划线等特殊字符",validate:function(e,t,n){return n(/^[a-z0-9_\-]+$/i.test(e)),e}},chs:{message:"必须是中文字符",get:function(e,t,n){return n(/^[\u4e00-\u9fa5]+$/.test(e)),e}},chs_numeric:{message:"必须是中文字符或数字及下划线等特殊字符",get:function(e,t,n){return n(/^[\\u4E00-\\u9FFF0-9_\-]+$/i.test(e)),e}},qq:{message:"腾讯QQ号从10000开始",get:function(e,t,n){return n(/^[1-9]\d{4,10}$/.test(e)),e}},id:{message:"输入的身份证格式不正确",get:function(e,n,a){return a(t(e)),e}},ipv4:{message:"ip地址不正确",get:function(e,t,n){return n(i.test(e)),e}},ipv6:{message:"ip地址不正确",get:function(e,t,n){return n(l.test(e)),e}},email:{message:"邮件地址错误",get:function(e,t,n){return n(o.test(e)),e}},paypsd:{message:"必须为六位数字",get:function(e,t,n){return n(/^[0-9]{6}$/.test(e)),e}},url:{message:"URL格式错误",get:function(e,t,n){return n(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(e)),e}},repeat:{message:"两次密码输入不一致",get:function(t,n,a){var r=n.element.getAttribute("data-duplex-repeat")||"",o=e(document.getElementById(r)).val()||"";return a(t===o),t}},date:{message:"必须符合日期格式 YYYY-MM-DD",get:function(e,t,a){return a(n(e)),e}},passport:{message:"护照格式错误或过长",get:function(e,t,n){return n(/^[a-zA-Z0-9]{4,20}$/i.test(e)),e}},minlength:{message:"最少输入{{min}}个字",get:function(e,t,n){var a=t.element,r=parseInt(a.getAttribute("minlength"),10);isFinite(r)||(r=parseInt(a.getAttribute("data-duplex-minlength"),10));var o=t.data.min=r;return n(e.length>=o),e}},maxlength:{message:"最多输入{{max}}个字",get:function(e,t,n){var a=t.element,r=parseInt(a.getAttribute("maxlength"),10);isFinite(r)||(r=parseInt(a.getAttribute("data-duplex-maxlength"),10));var o=t.data.max=r;return n(e.length<=o),e}},gt:{message:"必须大于{{max}}",get:function(e,t,n){var a=t.element,r=parseInt(a.getAttribute("max"),10);isFinite(r)||(r=parseInt(a.getAttribute("data-duplex-gt"),10));var o=t.data.max=r;return n(parseFloat(e)>o),e}},lt:{message:"必须小于{{min}}",get:function(e,t,n){var a=t.element,r=parseInt(a.getAttribute("min"),10);isFinite(r)||(r=parseInt(a.getAttribute("data-duplex-lt"),10));var o=t.data.min=r;return n(parseFloat(e)<o),e}},eq:{message:"必须等于{{eq}}",get:function(e,t,n){var a=t.element,r=parseInt(a.getAttribute("data-duplex-eq"),10),o=t.data.eq=r;return n(parseFloat(e)==o),e}},contains:{message:"必须包含{{array}}中的一个",get:function(e,t,n){var a=[].concat(e).map(String),r=(t.element.getAttribute("data-duplex-contains")||"").split(",");t.data.array=r;for(var o=!1,i=0,l=a.length;l>i;i++){var s=a[i];if(r.indexOf(s)>=0){o=!0;break}}return n(o),e}},contain:{message:"必须包含{{array}}",get:function(e,t,n){var a=[].concat(e).map(String),r=(t.element.getAttribute("data-duplex-contain")||"").split(",");if(t.data.array=r.join("与"),a.length){s=!0;for(var o=0,i=r.length;i>o;o++){var l=r[o];if(-1===a.indexOf(l)){s=!1;break}}}else var s=!1;return n(s),e}},pattern:{message:"必须匹配/{{pattern}}/这样的格式",get:function(e,t,n){var a=t.element,r=a.getAttribute("pattern"),o=a.getAttribute("data-duplex-pattern"),i=t.data.pattern=r||o,l=new RegExp("^(?:"+i+")$");return n(l.test(e)),e}}});var c=e.ui.validation=function(t,n,o){var i,l=n.validationOptions,s=e.define(n.validationId,function(n){e.mix(n,l),n.$skipArray=["widgetElement","data","validationHooks","validateInKeyup","validateAllInSubmit","resetInBlur"],n.widgetElement=t,n.data=[],n.$init=function(){t.setAttribute("novalidate","novalidate"),e.scan(t,[s].concat(o)),n.validateAllInSubmit&&(i=e.bind(t,"submit",function(e){e.preventDefault(),n.validateAll(n.onValidateAll)})),"function"==typeof l.onInit&&l.onInit.call(t,s,l,o)},n.$destory=function(){n.data=[],i&&e.unbind(t,"submit",i),t.textContent=t.innerHTML=""},n.validateAll=function(e){var t="function"==typeof e?e:n.onValidateAll,a=n.data.filter(function(e){var t=e.element;return t&&!t.disabled&&s.widgetElement.contains(t)}).map(function(e){return n.validate(e,!0)});Promise.all(a).then(function(e){for(var a,r=[],o=0;a=e[o++];)r=r.concat(a);if(n.deduplicateInValidateAll){var i={};r=r.filter(function(e){var t=e.element,n=t.getAttribute("data-validation-id");return n||(n=setTimeout("1"),t.setAttribute("data-validation-id",n)),i[n]?!1:(i[n]=!0,!0)})}t.call(n.widgetElement,r)})},n.resetAll=function(e){n.data.filter(function(e){return e.element}).forEach(function(e){try{n.onReset.call(e.element,{type:"reset"},e)}catch(t){}});var t="function"==typeof e?e:n.onResetAll;t.call(n.widgetElement)},n.validate=function(t,a,o){var i=t.valueAccessor(),l=s.validationHooks,c=e.duplexHooks,u=[],d=t.element;t.validateParam.replace(/\w+/g,function(e){var n=l[e]||c[e];if(!d.disabled){var a,o;u.push(new Promise(function(e,t){a=e,o=t}));var s=function(o){if(t.norequired&&""===i&&(o=!0),o)a(!0);else{var l={element:d,data:t.data,message:d.getAttribute("data-duplex-"+e+"-message")||d.getAttribute("data-duplex-message")||n.message,validateRule:e,getMessage:r};a(l)}};t.data={},n.get(i,t,s)}});var p=Promise.all(u).then(function(e){for(var t,r=[],i=0;t=e[i++];)"object"==typeof t&&r.push(t);return a||(r.length?n.onError.call(d,r,o):n.onSuccess.call(d,r,o),n.onComplete.call(d,r,o)),r});return p},n.$watch("avalon-ms-duplex-init",function(r){var o=s.validationHooks;switch(r.valueAccessor=r.evaluator.apply(null,r.args),e.type(r.valueAccessor())){case"array":r.valueResetor=function(){this.valueAccessor([])};break;case"boolean":r.valueResetor=function(){this.valueAccessor(!1)};break;case"number":r.valueResetor=function(){this.valueAccessor(0)};break;default:r.valueResetor=function(){this.valueAccessor("")}}var i=e.duplexHooks;if("function"!=typeof r.pipe&&e.contains(t,r.element)){var l=[],c=[];if(r.param.replace(/\w+/g,function(e){var t=o[e]||i[e];t&&"function"==typeof t.get&&t.message?c.push(e):l.push(e),"norequired"===e&&(r.norequired=!0)}),r.validate=n.validate,r.param=l.join("-"),r.validateParam=c.join("-"),c.length){n.validateInKeyup&&r.bound("keyup",function(e){var t=r.element&&r.element.getAttribute("data-duplex-event");if(!t||/^(?:key|mouse|click|input)/.test(t)){var o=a(e);setTimeout(function(){n.validate(r,0,o)})}}),n.validateInBlur&&r.bound("blur",function(e){n.validate(r,0,a(e))}),n.resetInFocus&&r.bound("focus",function(e){n.onReset.call(r.element,a(e),r)});var u=n.data.filter(function(e){return e.element});e.Array.ensure(u,r),n.data=u}return!1}})});return s},u=/\\?{{([^{}]+)\}}/gm;c.defaults={validationHooks:{},onSuccess:e.noop,onError:e.noop,onComplete:e.noop,onValidateAll:e.noop,onReset:e.noop,onResetAll:e.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1}}.apply(t,a),!(void 0!==r&&(e.exports=r))}]);